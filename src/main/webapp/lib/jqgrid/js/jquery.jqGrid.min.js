/**
 * @license jqGrid 4.15.5-pre - free jqGrid: https://github.com/free-jqgrid/jqGrid
 * Copyright (c) 2008-2014, Tony Tomov, tony@trirand.com
 * Copyright (c) 2014-2018, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2018-08-12
*/ !function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(r){return t(r,e.document)}):"object"==typeof module&&module.exports?module.exports=function(e,r){return e||(e=window),void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(r,e.document),r}:t(jQuery,e.document)}("undefined"!=typeof window?window:this,function($,document){"use strict";var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"},],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"},],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){return e<11||13<e?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{};var jgrid=$.jgrid;jgrid.locales=jgrid.locales||{};var locales=jgrid.locales,COMPONENT_NAMES={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};(null==jgrid.defaults||$.isEmptyObject(locales)||void 0===locales["en-US"])&&(void 0===locales["en-US"]&&$.extend(!0,jgrid,{locales:{"en-US":englishLanguageDefaults}}),jgrid.defaults=jgrid.defaults||{},void 0===jgrid.defaults.locale&&(jgrid.defaults.locale="en-US")),jgrid.defaults=jgrid.defaults||{};var defaults=jgrid.defaults;$.extend(!0,jgrid,{version:"4.15.5-pre",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-caret-1-sw",openRtl:"ui-icon-caret-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"},checkbox:{checkedClasses:"fa-check-square-o",checked:"fa-check-square-o fa-lg",unchecked:"fa-square-o fa-lg"}},fontAwesome5:{pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-up",desc:"fa-sort-down"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil-alt",add:"fa-plus",del:"fa-trash-alt",search:"fa-search",refresh:"fa-sync",view:"fa-file",save:"fa-save",cancel:"fa-ban",newbutton:"fa-external-link-alt"},actions:{common:"fa-fw",edit:"fa-pencil-alt",del:"fa-trash-alt",save:"fa-save",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-save",undo:"fa-undo",del:"fa-trash-alt",cancel:"fa-ban",resizableLtr:"fa-rss fa-lg fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square",minus:"fa-minus-square"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-down",leaf:"fa-dot-circle",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"},checkbox:{ignoreParents:!0,checkedClasses:"fa-check-square",checked:"far fa-check-square fa-lg",unchecked:"far fa-square fa-lg"}},fontAwesomeBrands:{baseIconSet:"fontAwesome5",common:"fab"},fontAwesomeLight:{baseIconSet:"fontAwesome5",common:"fal"},fontAwesomeRegular:{baseIconSet:"fontAwesome5",common:"far"},fontAwesomeSolid:{baseIconSet:"fontAwesome5",common:"fas"},fontAwesomeSVG:{baseIconSet:"fontAwesome5",common:"fas"},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"},checkbox:{checkedClasses:"glyphicon-check",checked:"glyphicon-check",unchecked:"glyphicon-unchecked"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui ui-menu ui-widget ui-widget-content ui-corner-all",menuItem:"ui-menu-item",menuItemButton:"ui-corner-all",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"ui-corner-all",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",hoverTh:"table-active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"d-none",closeButton:"btn btn-xs btn-outline-primary",fmButton:"btn btn-outline-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-outline-primary",actionsDiv:"",actionsButton:"btn btn-xs btn-outline-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"dropdown-item",operButton:"btn btn-xs btn-outline-secondary",clearButton:"btn btn-xs btn-outline-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldEncodePostedData:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldDecodePostedData:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},clearArray:function(e){for(;0<e.length;)e.pop()},format:function(e){var t=$.makeArray(arguments).slice(1);return null==e&&(e=""),e.replace(/\{(\d+)\}/g,function(e,r){return t[r]})},template:function(e){var t,r=$.makeArray(arguments).slice(1),i=r.length;return null==e&&(e=""),e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(e,a){var o,l;if(!isNaN(parseInt(a,10)))return r[parseInt(a,10)];for(t=0;t<i;t++)if($.isArray(r[t])){for(l=(o=r[t]).length;l--;)if(a===o[l].nm)return o[l].v}})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName?null!=(e=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&3===e.length&&(t=parseFloat(e[2]||-1)):"Netscape"===navigator.appName&&null!=(e=/rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&2===e.length&&(t=parseFloat(e[1]||-1)),t},fixMaxHeightOfDiv:function(e){return"Microsoft Internet Explorer"===navigator.appName?Math.min(e,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(e,17895696):e},getRelativeRect:function(e){var t,r,i=e instanceof $&&0<e.length?e[0]:e,a=$(i).outerHeight(),o=$(this).closest(".ui-jqgrid")[0];return o?(t=null!=i.getBoundingClientRect?i.getBoundingClientRect():$(i).offset(),r=null!=o.getBoundingClientRect?o.getBoundingClientRect():$(o).offset(),{top:t.top+a-r.top,left:t.left-r.left}):{top:0,left:0}},getCellIndex:function(e){var t=$(e);return t.is("tr")?-1:null==(t=(t.is("td")||t.is("th")?t:t.closest("td,th"))[0])?-1:jgrid.msie?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(e){return(e=String(e))?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/"/g,"'"):"":e},stripPref:function(e,t){var r=$.type(e);return"string"!==r&&"number"!==r||(t=""!==(e=String(e))?String(t).replace(String(e),""):t),t},getRes:function(e,t){var r,i=t.split("."),a=i.length;if(null!=e){for(r=0;r<a;r++){if(!i[r])return null;if(void 0===(e=e[i[r]])||"string"==typeof e)break}return e}},parseDate:function(e,t,r,i){var a,o,l,n=0,s=0,d="string"==typeof t?t.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,c=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},u={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},p=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};if(void 0===(i=function(e,t){var r,i,a=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],o=t||{},l=(jgrid.formatter||{}).date||{},n=((locales[(e||$.jgrid.defaults).locale]||{}).formatter||{}).date,s=a.length,d={};for(r=0;r<s;r++)void 0!==o[i=a[r]]?d[i]=o[i]:void 0!==l[i]?d[i]=l[i]:void 0!==n[i]&&(d[i]=n[i]);return d}(this.p,i)).parseRe&&(i.parseRe=/[#%\\\/:_;.,\t\s\-]/),i.masks.hasOwnProperty(e)&&(e=i.masks[e]),t&&null!=t){if(isNaN(t)||"u"!==String(e).toLowerCase()){if(isNaN(t)||"u1000"!==String(e).toLowerCase()){if(t.constructor===Date)n=t;else if(null!==d)n=new Date(parseInt(d[1],10)),d[3]&&(s=60*Number(d[5])+Number(d[6]),s*="-"===d[4]?1:-1,s-=n.getTimezoneOffset(),n.setTime(Number(Number(n)+60*s*1e3)));else{for("ISO8601Long"===i.srcformat&&"Z"===t.charAt(t.length-1)&&(s-=new Date().getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),o=0,l=Math.min(e.length,t.length);o<l;o++){switch(e[o]){case"M":-1!==(a=$.inArray(t[o],i.monthNames))&&a<12&&(t[o]=a+1,u.m=t[o]);break;case"F":-1!==(a=$.inArray(t[o],i.monthNames,12))&&11<a&&(t[o]=a+1-12,u.m=t[o]);break;case"n":u.m=parseInt(t[o],10);break;case"j":u.d=parseInt(t[o],10);break;case"g":u.h=parseInt(t[o],10);break;case"a":-1!==(a=$.inArray(t[o],i.AmPm))&&a<2&&t[o]===i.AmPm[a]&&(t[o]=a,u.h=p(t[o],u.h));break;case"A":-1!==(a=$.inArray(t[o],i.AmPm))&&1<a&&t[o]===i.AmPm[a]&&(t[o]=a-2,u.h=p(t[o],u.h))}void 0===t[o]||""===t[o]||isNaN(t[o])||(u[e[o].toLowerCase()]=parseInt(t[o],10))}if(u.f&&(u.m=u.f),0===u.m&&0===u.y&&0===u.d)return"&#160;";u.m=parseInt(u.m,10)-1;var h=u.y;70<=h&&h<=99?u.y=1900+u.y:0<=h&&h<=69&&(u.y=2e3+u.y),n=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u),0!==s&&n.setTime(Number(Number(n)+60*s*1e3))}}else n=new Date(parseFloat(t))}else n=new Date(1e3*parseFloat(t))}else n=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);if(i.userLocalTime&&0===s&&0!=(s-=new Date().getTimezoneOffset())&&n.setTime(Number(Number(n)+60*s*1e3)),void 0===r)return n;if(i.masks.hasOwnProperty(r)?r=i.masks[r]:r||(r="Y-m-d"),"u1000"===r.toLowerCase())return n.getTime();var f=n.getHours(),g=n.getMinutes(),m=n.getDate(),v=n.getMonth()+1,b=n.getTimezoneOffset(),w=n.getSeconds(),y=n.getMilliseconds(),_=n.getDay(),x=n.getFullYear(),C=(_+6)%7+1,j=(new Date(x,v-1,m)-new Date(x,0,1))/864e5,D=C<5?Math.floor((j+C-1)/7)+1:Math.floor((j+C-1)/7)||((new Date(x-1,0,1).getDay()+6)%7<4?53:52),R={d:c(m),D:i.dayNames[_],j:m,l:i.dayNames[_+7],N:C,S:i.S(m),w:_,z:j,W:D,F:i.monthNames[v-1+12],m:c(v),M:i.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:x,y:String(x).substring(2),a:f<12?i.AmPm[0]:i.AmPm[1],A:f<12?i.AmPm[2]:i.AmPm[3],B:"?",g:f%12||12,G:f,h:c(f%12||12),H:c(f),i:c(g),s:c(w),u:y,e:"?",I:"?",O:(0<b?"-":"+")+c(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),P:"?",T:(String(n).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g)||[""]).pop().replace(/[^\-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(n/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return R.hasOwnProperty(e)?R[e]:e.substring(1)})},parseDateToNumber:function(e,t){var r=jgrid.parseDate.call(this,e,t);return r instanceof Date?r.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){if(null==this.p||!this.p.id)return"";var t=this.p.id;switch(e){case COMPONENT_NAMES.GRID:return t;case COMPONENT_NAMES.GRID_BOX_DIV:return"gbox_"+t;case COMPONENT_NAMES.GRID_VIEW_DIV:return"gview_"+t;case COMPONENT_NAMES.DIALOG_ALERT_DIV:return"alertmod_"+t;case COMPONENT_NAMES.COLUMN_RESIZER_DIV:return"rs_m"+t;case COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+t;case COMPONENT_NAMES.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){var t=jgrid.getGridComponentId.call(this,e);return t?"#"+jgrid.jqID(t):""},isHTMLElement:function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:null!=e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},getGridComponent:function(e,t){var r;if(t instanceof $||0<t.length)r=t[0];else{if(!jgrid.isHTMLElement(t))return $();t=$(r=t)}switch(e){case COMPONENT_NAMES.BODY_TABLE:return t.hasClass("ui-jqgrid-bdiv")?t.children("div").children(".ui-jqgrid-btable"):$();case COMPONENT_NAMES.HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children("div").children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children("div").children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.FROZEN_HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FROZEN_FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.BODY_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=r.grid?$(r.grid.bDiv):$();case COMPONENT_NAMES.HEADER_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=r.grid?$(r.grid.hDiv):$();case COMPONENT_NAMES.FOOTER_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=r.grid?$(r.grid.sDiv):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var e=this.grid;if(e){var t=this.p,r=e.bDiv,i=function(e){var i=$(e).children("div").first();i.css(i.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",t.scrollOffset),e.scrollLeft=r.scrollLeft};0<$(r).width()&&(t.scrollOffset=r.offsetWidth-r.clientWidth,i(e.hDiv),e.sDiv&&i(e.sDiv))}},mergeCssClasses:function(){var e,t,r,i,a=$.makeArray(arguments),o={},l=[];for(e=0;e<a.length;e++)for(r=String(a[e]).replace(/[\t\r\n\f]/g," ").split(" "),t=0;t<r.length;t++)""===(i=r[t])||o.hasOwnProperty(i)||(o[i]=!0,l.push(i));return l.join(" ")},hasOneFromClasses:function(e,t){var r,i=$(e),a=String(t).replace(/[\t\r\n\f]/g," ").split(" "),o=a.length;for(r=0;r<o;r++)if(i.hasClass(a[r]))return!0;return!1},hasAllClasses:function(e,t){var r,i=$(e),a=String(t).replace(/[\t\r\n\f]/g," ").split(" "),o=a.length;for(r=0;r<o;r++)if(!i.hasClass(a[r]))return!1;return!0},detectRowEditing:function(e){return this.grid&&null!=this.p&&null!=this.p.editingInfo&&null!=this.p.editingInfo[e]?this.p.editingInfo[e]:null},getCell:function(e,t){var r,i,a=this.grid,o=this.p;return a&&o?((e instanceof $||0<e.length)&&(e=e[0]),("object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&e instanceof HTMLTableRowElement&&null!=e.cells?(i=$(e.cells[t]),null!=(r=a.fbRows)&&t<r[0].cells.length?i.add(r[e.rowIndex].cells[t]):i):$()):$()},getDataFieldOfCell:function(e,t){var r,i=this.p,a=jgrid.getCell.call(this,e,t);return i.treeGrid&&0<a.children("div.tree-wrap").length&&(a=a.children("span.cell-wrapperleaf,span.cell-wrapper")),i.colModel[t].autoResizable?0===(r=a.children("span."+i.autoResizing.wrapperClassName)).length&&(r=a):r=a,r},enumEditableCells:function(e,t,r){var i=this,a=i.grid,o=i.rows,l=i.p;if(null==a||null==o||null==l||null==e||null==e.rowIndex||!e.id||!$.isFunction(r))return null;var n,s,d,c,u,p,h,f,g,m,v,b=l.colModel,w=b.length,y=e.rowIndex,_=a.fbRows,x=null!=_,C=x?_[y]:null;for(x&&(e=i.rows[y]),n=0;n<w&&("cb"===(d=(s=b[n]).name)||"subgrid"===d||"rn"===d||(x&&!s.frozen&&(x=!1),(m=$(g=(x?C:e).cells[n])).hasClass("not-editable-cell")||(v=m.width(),!0===l.treeGrid&&d===l.ExpandColumn?(v-=m.children("div.tree-wrap").outerWidth(),m=m.children("span.cell-wrapperleaf,span.cell-wrapper").first()):v=0,u=stripPref(l.idPrefix,e.id),c={rowid:e.id,id:u,iCol:n,iRow:y,cmName:d,cm:s,mode:t,td:g,tr:e,trFrozen:C,dataElement:m[0],dataWidth:v},"local"===l.datatype&&(h=null!=(p=l._index[u])?l.data[p]:void 0)&&(c.item=h),s.edittype||(s.edittype="text"),((l.editingInfo[e.id]||{}).editable||{}).hasOwnProperty(d)?f=l.editingInfo[e.id].editable[d]:(f=s.editable,f=$.isFunction(f)?f.call(i,c):f),!0!==f&&"hidden"!==f||(c.editable=f,!1!==r.call(i,c)))));n++);},getEditedValue:function(e,t,r,i){var a,o,l,n,s,d,c=t.formatoptions||{},u=t.editoptions||{},p=u.custom_value,h="[name="+jgrid.jqID(t.name)+"]",f=this,g=$(f);if("hidden"===i||"readonly"===i)return $(f).jqGrid("getCell",e.closest("tr.jqgrow").attr("id"),t.name);switch(t.edittype){case"checkbox":o=["Yes","No"],"string"==typeof u.value&&(o=u.value.split(":")),a=e.find("input[type=checkbox]").is(":checked")?o[0]:o[1];break;case"text":case"password":case"textarea":case"button":a=(n=e.find("input"+h+",textarea"+h)).val(),"date"===n.prop("type")&&3===String(a).split("-").length&&(l=c.newformat||g.jqGrid("getGridRes","formatter.date.newformat"),a=jgrid.parseDate.call(f,"Y-m-d",a,l));break;case"select":n=e.find("select option:selected"),u.multiple?(s=[],d=[],n.each(function(){s.push($(this).val()),d.push($(this).text())}),a=s.join(","),r.text=d.join(",")):(a=n.val(),r.text=n.text()),r.value=a;break;case"custom":try{if(!$.isFunction(p))throw"e1";if(void 0===(a=p.call(f,e.find(".customelement"),"get")))throw"e2"}catch(m){var v,b=jgrid.info_dialog,w=function(e){g.jqGrid("getGridRes",e)};switch(String(m)){case"e1":v="function 'custom_value' "+w("edit.msg.nodefined");break;case"e2":break;default:v=m.message}b&&$.isFunction(b)?b.call(f,w("errors.errcap"),v,w("edit.bClose")):($.isFunction(defaults.fatalError)?defaults.fatalError:alert)(v)}break;default:a=e.find("*"+h).text()}return a},guid:1,uidPref:"jqg",randId:function(e){return(e||jgrid.uidPref)+jgrid.guid++},getAccessor:function(e,t){var r,i,a,o=[];if($.isFunction(t))return t(e);if(null!=e&&e.hasOwnProperty(t))return e[t];try{if("string"==typeof t&&(o=t.split(".")),a=o.length)for(r=e;null!=r&&a--;)i=o.shift(),r=r.hasOwnProperty(i)?r[i]:void 0}catch(l){}return r},getXmlData:function(e,t,r){var i="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;if($.isFunction(t))return t(e);if(i&&i[2])return i[1]?$(i[1],e).attr(i[2]):$(e).attr(i[2]);if(void 0!==e){var a=$(e).find(t);return r?a:0<a.length?$(a).text():void 0}},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),t=e.appendTo("body").find("td").width();return e.remove(),.1<Math.abs(t-5)},isCellClassHidden:function(e){if(null==e||""===e)return!1;var t=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(e||"")+"'></td></tr></table></div></div></div>"),r=t.appendTo("body").find("td").is(":hidden");return t.remove(),r},cell_width:!0,ajaxOptions:{},from:function(source){var QueryObject,context=this;return new function(d,q){var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],toString=Object.prototype.toString;if("object"!=typeof d||!d.push)throw"data provides is not an array";if(0<d.length&&"object"!=typeof d[0])throw"data items are not objects";return this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+" || '')"),_trim&&t.push(")"),_usecase||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"'),_usecase?e:e.toUpperCase()},this._funcLoop=function(e){var t=[];return $.each(_data,function(r,i){t.push(e(i))}),t},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_lastCommand(_lastField,e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,r){return void 0===r&&(r=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:("[object Date]"===toString.call(e)&&"[object Date]"===toString.call(t)||_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-r:t<e?r:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var r=_sorting[t].by,i=_sorting[t].dir,a=_sorting[t].type,o=_sorting[t].datefmt,l=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,r,i,a,o,l);t++;var n,s,d,c=self._getGroup(e,r,i,a,o),u=[];for(n=0;n<c.length;n++)for(d=self._doSort(c[n].items,t),s=0;s<d.length;s++)u.push(d[s]);return u},this._getOrder=function(e,t,r,i,a,o){var l,n,s,d=[],c=[],u="a"===r?1:-1;void 0===i&&(i="text"),s="float"===i||"number"===i||"currency"===i||"numeric"===i?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===i||"integer"===i?function(e){return null!=e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===i||"datetime"===i?function(e){return jgrid.parseDateToNumber.call(context,a,e)}:$.isFunction(i)?i:function(e){return e=null!=e?$.trim(String(e)):"",_usecase?e:e.toUpperCase()},$.each(e,function(e,r){void 0===(n=""!==t?jgrid.getAccessor(r,t):r)&&(n=""),n=s.call(context,n,r),c.push({vSort:n,data:r,index:e})}),$.isFunction(o)?c.sort(function(e,t){return o.call(context,e.vSort,t.vSort,u,e.data,t.data)}):c.sort(function(e,t){return self._compare(e.vSort,t.vSort,u)});for(var p=0,h=e.length;p<h;)d.push(e[l=c[p].index]),p++;return d},this._getGroup=function(e,t,r,i,a){var o=[],l=null,n=null;return $.each(self._getOrder(e,t,r,i,a),function(e,r){var i=jgrid.getAccessor(r,t);null==i&&(i=""),self._equals(n,i)||(n=i,null!==l&&o.push(l),l=self._group(t,i)),l.items.push(r)}),null!==l&&o.push(l),o},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match||($.each(_data,function(){(function(){var localMath;eval('(function (context) {\nvar yesObject = { 1: 1, x: 1, "true": 1, yes: 1, y: 1, on: 1 },noObject = { 0: 1, "false": 1, no: 1, n: 1, off: 1 },normilizeBoolean = function (v) {\nif (typeof v === "string") {\nif (noObject[v.toLowerCase()]) { return false; } else if (yesObject[v.toLowerCase()]) { return true; } }\nreturn !!v;\n},intFunc = function (jQuery, self) { return '+match+"; }; return intFunc.call(context.item, context.jQuery, context.context); }(this))")&&results.push(this.item)}).call({item:this,jQuery:$,context:context})}),_data=results),self},this.data=function(){return _data},this.select=function(e){if(self.execute(),$.isFunction(e)){var t=[];return $.each(_data,function(r,i){t.push(e(i))}),t}return self._hasData()?(self._performSort(),_data):[]},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),0<_data.length)},this.andNot=function(e,t,r){return _negate=!_negate,self.and(e,t,r)},this.orNot=function(e,t,r){return _negate=!_negate,self.or(e,t,r)},this.not=function(e,t,r){return self.andNot(e,t,r)},this.and=function(e,t,r){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,r)},this.or=function(e,t,r){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,r)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,r,i,a){var o=t;void 0===r&&(r=null);var l=r,n=void 0===a.stype?"text":a.stype;if(null!==r)switch(n){case"int":case"integer":l=String(l).replace(_stripNum,""),l=isNaN(Number(l))||""===l?"0":Number(l),o="parseInt("+o+"||0,10)",l=String(parseInt(l,10));break;case"boolean":o="normilizeBoolean("+o+")",l="normilizeBoolean("+String(l)+")";break;case"float":case"number":case"currency":case"numeric":l=String(l).replace(_stripNum,""),l=isNaN(Number(l))||""===l?"0":Number(l),o="parseFloat("+o+"||0)",l=String(l);break;case"date":case"datetime":l=String(jgrid.parseDateToNumber.call(context,a.newfmt||"Y-m-d",l)),o='jQuery.jgrid.parseDateToNumber.call(self,"'+a.srcfmt+'",'+o+")";break;default:o=self._getStr(o),l=self._getStr('"'+self._toStr(l)+'"')}return self._append(o+" "+i+" "+l),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,r){return self._compareValues(self.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return self._compareValues(self.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return self._compareValues(self.equals,e,null,"===",r)},this.greater=function(e,t,r){return self._compareValues(self.greater,e,t,">",r)},this.less=function(e,t,r){return self._compareValues(self.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return self._compareValues(self.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return self._compareValues(self.lessOrEquals,e,t,"<=",r)},this.startsWith=function(e,t){var r=null==t?e:t,i=_trim?$.trim(r.toString()).length:r.toString().length;return self._append(self._getStr(e)+".substr(0,"+i+") == "+self._getStr('"'+self._toStr(t)+'"')),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var r=null==t?e:t,i=_trim?$.trim(r.toString()).length:r.toString().length;return self._append(self._getStr(e)+".substr("+self._getStr(e)+".length-"+i+","+i+') == "'+self._toStr(t)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return self._append(self._getStr(e)+'.indexOf("'+self._toStr(t)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,r,i){return self._hasData()?self._getGroup(_data,e,t,r,i):null},this.orderBy=function(e,t,r,i,a){return null==r&&(r="text"),null==i&&(i="Y-m-d"),null==a&&(a=!1),"desc"!==(t=null==t?"a":$.trim(t.toString().toLowerCase()))&&"descending"!==t||(t="d"),"asc"!==t&&"ascending"!==t||(t="a"),_sorting.push({by:e,dir:t,type:r,datefmt:i,sfunc:a}),self},this.inSet=function(e,t,r){var i=void 0===t?null:t,a=void 0===r.stype?"text":r.stype;return i=self._getStr('"'+self._toStr(i)+'"'),"text"!==a?self._compareValues(self.equals,e,t,"==",r):(self._append("jQuery.inArray("+self._getStr(e)+","+i+".split('"+(context.p.inFilterSeparator||",")+"')) >= 0"),self._setCommand(self.inSet,e),self._resetNegate(),self)},this.custom=function(e,t,r){return self._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",iCol:self.p.iColByName["'+t+'"]>=0 ? self.p.iColByName["'+t+'"] : self.p.iPropByName["'+t+'"],isAddProp:self.p.iColByName["'+t+'"]<0,searchValue:"'+r+'"})'),self._setCommand(self.custom,t),self._resetNegate(),self},self}(source,null)},serializeFeedback:function(e,t,r){var i,a=this;return a instanceof $&&0<a.length&&(a=a[0]),"string"==typeof r?r:"string"==typeof(i=$(a).triggerHandler(t,r))?i:(null!=i&&"object"==typeof i||(i=r),$.isFunction(e)?e.call(a,i):i)},fullBoolFeedback:function(e,t){var r=$.makeArray(arguments).slice(2),i=$(this).triggerHandler(t,r);if(i=!1!==i&&"stop"!==i,$.isFunction(e)){var a=e.apply(this,r);!1!==a&&"stop"!==a||(i=!1)}return i},feedback:function(e,t,r,i){var a=this;if(a instanceof $&&0<a.length&&(a=a[0]),null==e||"string"!=typeof i||i.length<2)return null;var o="on"===i.substring(0,2)?"jqGrid"+t+i.charAt(2).toUpperCase()+i.substring(3):"jqGrid"+t+i.charAt(0).toUpperCase()+i.substring(1),l=$.makeArray(arguments).slice(4),n=e[i+r];return l.unshift(o),l.unshift(n),jgrid.fullBoolFeedback.apply(a,l)},builderSortIcons:function(e){var t=this,r=t.p,i=$(t),a=i.jqGrid("getGuiStyles","states.disabled"),o=function(o){var l=r.colModel[e],n=null!=l&&$.isFunction(l.sortIconName)?l.sortIconName:r.sortIconName,s=$.isFunction(n)?n.call(t,{order:o,iCol:e,cm:l}):i.jqGrid("getIconRes","sort."+o);return jgrid.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+o,"horizontal"===r.viewsortcols[1]?"ui-i-"+o:"",a,s,"ui-sort-"+r.direction)};return"<span class='s-ico"+(r.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+o("asc")+"'></span><span class='"+o("desc")+"'></span></span>"},builderFmButon:function(e,t,r,i,a){var o=this.p,l=$(this),n=function(e){return l.jqGrid("getGuiStyles","dialog."+e)};return null==o?"":"<a id='"+e+"' class='"+jgrid.mergeCssClasses("fm-button",n("fmButton"),n("right"===a?"rightCorner":"left"===a?"leftCorner":"defaultCorner"),"right"===i?"fm-button-icon-right":"left"===i?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(r?"<span class='fm-button-icon "+(l.jqGrid("getIconRes",r)||r)+"'></span>":"")+(t?"<span class='fm-button-text'>"+t+"</span>":"")+"</a>"},convertOnSaveLocally:function(e,t,r,i,a,o){if(null==this.p)return e;if($.isFunction(t.convertOnSave))return t.convertOnSave.call(this,{newValue:e,cm:t,oldValue:r,id:i,item:a,iCol:o});if("boolean"!=typeof r&&"number"!=typeof r)return e;if("boolean"!=typeof r||"checkbox"!==t.edittype&&"checkbox"!==t.formatter)"number"!=typeof r||isNaN(e)||("number"===t.formatter||"currency"===t.formatter?e=parseFloat(e):"integer"===t.formatter&&(e=parseInt(e,10)));else{var l=String(e).toLowerCase(),n=null!=t.editoptions&&"string"==typeof t.editoptions.value?t.editoptions.value.split(":"):["yes","no"];0<=$.inArray(l,["1","true",n[0].toLowerCase()])?e=!0:0<=$.inArray(l,["0","false",n[1].toLowerCase()])&&(e=!1)}return e},parseDataToHtml:function(e,t,r,i,a,o,l){var n,s,d,c,u,p,h,f,g,m,v,b,w,y,_,x,C,j,D,R,q,S,G,O,k,F,I,E,N=this,T=N.p,A=$(N),B=!1,z=[],P=[],M=!0!==T.altRows||A.jqGrid("isBootstrapGuiStyle")?"":T.altclass,L=T.groupingView,V=!1,H=parseInt(T.rowNum,10),W=$.fn.jqGrid,U=!0===T.treeGrid&&-1<T.treeANode?N.rows[T.treeANode].rowIndex+1:N.rows.length,Y=N.formatCol;for(U<=1&&(T.rowIndexes={}),("local"===T.datatype&&!T.deselectAfterSort||T.multiPageSelection)&&(B=!0),o&&(H*=o+1),n=0;n<Math.min(e,H);n++){for(u=t[n],p=r[n],h=null!=i?i[n]:p,d=((1===a?0:a)+n)%2==1?M:"",B?T.multiselect?(c=-1!==$.inArray(u,T.selarrrow))&&null===T.selrow&&(T.selrow=u):c=u===T.selrow:c=!1,f=z.length,z.push(""),s=0;s<T.colModel.length;s++)switch(g=T.colModel[s].name){case"rn":z.push((O=s,k=n,F=T.page,I=T.rowNum,E=(parseInt(F,10)-1)*parseInt(I,10)+1+k,"<td role='gridcell' class='"+W.getGuiStyles.call(A,"rowNum","jqgrid-rownum")+"' "+Y(O,k,E,null,k,!0)+">"+E+"</td>"));break;case"cb":z.push((q=void 0,q="&nbsp;",S=(S=void 0,!0),G={rowid:C=u,iRow:D=n,iCol:j=s,data:p,checked:R=c},$.isFunction(T.hasMultiselectCheckBox)&&(S=T.hasMultiselectCheckBox.call(N,G)),S&&(q=$.isFunction(T.checkboxHtml)?T.checkboxHtml.call(N,G):"<input type='checkbox' id='jqg_"+T.id+"_"+C+"' class='cbox' name='jqg_"+T.id+"_"+C+"'"+(R?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+Y(j,D,"",null,C,!0)+">"+q+"</td>"));break;case"subgrid":z.push(W.addSubGridCell.call(A,s,n+a,u,p));break;default:z.push((m=u,v=p[g],b=s,w=n+a,y=h,_=p,x=N.formatter(m,v,b,y,"add",_),"<td role='gridcell' "+Y(b,w,x,y,m,_)+">"+x+"</td>"))}T.grouping&&(W.groupingPrepare&&!L._locgr&&W.groupingPrepare.call(A,p,n),V=$.isFunction(L.groupCollapse)?L.groupCollapse.call(N,{group:L.groups[L.groups.length-1],rowid:u,data:p}):L.groupCollapse),z[f]=N.constructTr(u,V,d,p,h,c),z.push("</tr>"),T.rowIndexes[u]=U,U++,T.grouping&&(P.push(z),z=[]),z.length>T.maxItemsToJoin&&(z=[z.join("")])}return T.grouping&&W.groupingRender&&(l&&(L._locgr=!0),z=[W.groupingRender.call(A,P,H)],jgrid.clearArray(P)),z},fillSelectOptions:function(e,t,r,i,a,o){var l,n,s,d,c,u,p,h,f=[],g=!1,m=function(e,t){if(0<t)return e};if(t){if("function"==typeof t&&(t=t()),"string"==typeof t)for(n=t.split(i),l=0;l<n.length;l++)2<(s=n[l].split(r)).length&&(s[1]=$.map(s,m).join(r)),f.push({value:s[0],innerHtml:s[1],selectValue:$.trim(s[0]),selectText:$.trim(s[1]),selected:!1}),""===s[0]&&(g=!0);else if("object"==typeof t)for(p in t)t.hasOwnProperty(p)&&f.push({value:p,innerHtml:t[p],selectValue:$.trim(p),selectText:$.trim(t[p]),selected:!1}),""===p&&(g=!0);if("string"==typeof o){for(h=a?$.map(o.split(","),function(e){return $.trim(e)}):[$.trim(o)],o=$.trim(o),l=0;l<f.length;l++)c=f[l],a||c.selectValue!==o||(u=c.selected=!0),a&&-1<$.inArray(c.selectValue,h)&&(u=c.selected=!0);if(!u)for(l=0;l<f.length;l++)c=f[l],a||c.selectText!==o||(c.selected=!0),a&&-1<$.inArray(c.selectText,h)&&(c.selected=!0)}for(l=0;l<f.length;l++)c=f[l],(d=document.createElement("option")).value=c.value,d.innerHTML=c.innerHtml,c.selected&&(d.selected=!0),e.appendChild(d);return g}},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)}});var clearArray=jgrid.clearArray,jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,mergeCssClasses=jgrid.mergeCssClasses,hasOneFromClasses=jgrid.hasOneFromClasses,feedback=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)};$.fn.jqGrid=function(e){var t,r=$.fn.jqGrid;if("string"==typeof e){if(!(t=r[e]))throw"jqGrid - No such method: "+e;return t.apply(this,$.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var t,i,a=this,o=$(a),l=$.isFunction,n=$.isArray,s=$.extend,d=$.inArray,c=$.trim,u=$.each,p=r.setSelection,h=r.getGridRes,f=l(defaults.fatalError)?defaults.fatalError:alert,g=e.locale||defaults.locale||"en-US",m=null!=locales[g]&&"boolean"==typeof locales[g].isRTL&&locales[g].isRTL?"rtl":"ltr",v=e.iconSet||defaults.iconSet||("bootstrap"===(e.guiStyle||defaults.guiStyle)||"bootstrapPrimary"===(e.guiStyle||defaults.guiStyle)?"glyph":"jQueryUI"),b=e.guiStyle||defaults.guiStyle||"jQueryUI",w=function(e){return r.getIconRes.call(a,e)},y=function(e,t){return o.jqGrid("getGuiStyles",e,t)};null==e&&(e={datatype:"local"}),void 0!==e.datastr&&n(e.datastr)&&(i=e.datastr,e.datastr=[]),void 0!==e.data&&(t=e.data,e.data=[]),null!=jgrid.formatter&&null!=jgrid.formatter.unused||f("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n	$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n	$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===e.datatype&&void 0!==e.dataType&&(e.datatype=e.dataType,delete e.dataType),void 0===e.mtype&&void 0!==e.type&&(e.mtype=e.type,delete e.type),a.p={iconSet:v};var _=s(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,pagingDuringEditing:"prevent",sortingDuringEditing:"prevent",reloadingDuringEditing:"prevent",autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],editingInfo:{},shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",selectOnContextMenu:!0,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:function(e,t,r){if("abort"!==t&&"abort"!==r){var i=e.getResponseHeader("Content-Type"),a=e.responseText||"",l=function(e){try{var t,r=$.parseJSON(e),i=[];for(t in r)r.hasOwnProperty(t)&&"StackTrace"!==t&&i.push(t+": "+r[t]);e=i.join("<br />")}catch(a){}return e};"text/html"===i?a=function(e){var t,r,i,a=document.createElement("div");for(i=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(e),a.innerHTML=null!=i&&2===i.length?i[1]:e,r=(t=a.getElementsByTagName("script")).length;r--;)t[r].parentNode.removeChild(t[r]);e=a.innerHTML;try{""===$.trim($(e).text())&&(e="")}catch(o){}return e}(a):"application/json"===i?a=l(a):"text/plain"===i&&(a=l(a)),500!==e.status&&0!==e.status&&(a=(t||r)+(r&&r!==t?": "+r:"")+" "+e.status+" "+e.statusText+(""!==a?"<hr />":"")+a),o.jqGrid("displayErrorMessage",a||t||r)}},loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",filters:"filters",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,resetPageAfterSort:!0,multiPageSelection:!1,selectAllMode:"filtered",scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!0,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:m,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:w("grouping.common"),plusicon:w("grouping.plus"),minusicon:w("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:v,guiStyle:b,locale:g,multiSort:!1,showSortOrder:!0,sortOrderPosition:"afterSortIcons",multiSortOrder:"lastClickedFirstSorted",maxSortColumns:3,treeIcons:{commonIconClass:w("treeGrid.common"),plusLtr:w("treeGrid.plusLtr"),plusRtl:w("treeGrid.plusRtl"),minus:w("treeGrid.minus"),leaf:w("treeGrid.leaf")}},defaults,{navOptions:s(!0,{commonIconClass:w("nav.common"),editicon:w("nav.edit"),addicon:w("nav.add"),delicon:w("nav.del"),searchicon:w("nav.search"),refreshicon:w("nav.refresh"),viewicon:w("nav.view"),saveicon:w("nav.save"),cancelicon:w("nav.cancel"),buttonicon:w("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:s(!0,{commonIconClass:w("actions.common"),editicon:w("actions.edit"),delicon:w("actions.del"),saveicon:w("actions.save"),cancelicon:w("actions.cancel")},jgrid.actionsNav||{}),formEditing:s(!0,{commonIconClass:w("form.common"),prevIcon:w("form.prev"),nextIcon:w("form.next"),saveicon:[!0,"left",w("form.save")],closeicon:[!0,"left",w("form.undo")]},jgrid.edit||{}),searching:s(!0,{commonIconClass:w("search.common"),findDialogIcon:w("search.search"),resetDialogIcon:w("search.reset"),queryDialogIcon:w("search.query")},jgrid.search||{}),formViewing:s(!0,{commonIconClass:w("form.common"),prevIcon:w("form.prev"),nextIcon:w("form.next"),closeicon:[!0,"left",w("form.cancel")]},jgrid.view||{}),formDeleting:s(!0,{commonIconClass:w("form.common"),delicon:[!0,"left",w("form.del")],cancelicon:[!0,"left",w("form.cancel")]},jgrid.del||{})},e||{}),x=function(e){return h.call(o,e)},C=function(e){var t=jgrid.getRes(_,e);return void 0!==t?t:h.call(o,"defaults."+e)};if(_.recordpos=_.recordpos||("rtl"===_.direction?"left":"right"),_.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==_.autoResizing.widthOfVisiblePartOfSortIcon?_.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===_.iconSet?13:12,_.datatype=void 0!==_.datatype?_.datatype:void 0!==t||null==_.url?"local":null!=_.jsonReader&&"object"==typeof _.jsonReader?"json":"xml",_.jsonReader=_.jsonReader||{},_.url=_.url||"",_.cellsubmit=void 0!==_.cellsubmit?_.cellsubmit:void 0===_.cellurl?"clientArray":"remote",_.gridview=void 0!==_.gridview?_.gridview:null==_.afterInsertRow,void 0!==t&&(_.data=t,e.data=t),void 0!==i&&(_.datastr=i,e.datastr=i),"TABLE"===a.tagName.toUpperCase()){if(""===a.id&&o.attr("id",randId()),void 0!==document.documentMode&&document.documentMode<=5)f("Grid can not be used in this ('quirks') mode!");else{o.empty().attr("tabindex","0"),(a.p=_).id=a.id,_.idSel="#"+jqID(a.id),_.gBoxId=getGridComponentId.call(a,COMPONENT_NAMES.GRID_BOX_DIV),_.gBox=getGridComponentIdSelector.call(a,COMPONENT_NAMES.GRID_BOX_DIV),_.gViewId=getGridComponentId.call(a,COMPONENT_NAMES.GRID_VIEW_DIV),_.gView=getGridComponentIdSelector.call(a,COMPONENT_NAMES.GRID_VIEW_DIV),_.rsId=getGridComponentId.call(a,COMPONENT_NAMES.COLUMN_RESIZER_DIV),_.rs=getGridComponentIdSelector.call(a,COMPONENT_NAMES.COLUMN_RESIZER_DIV),_.cbId=getGridComponentId.call(a,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX),_.cb=getGridComponentIdSelector.call(a,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);var j=jgrid.fixScrollOffsetAndhBoxPadding,D=function(e){var t,r={},i=e.length;for(t=0;t<i;t++)r[e[t].name]=t;return r},R=function(){var e,t,r={},i=_.colModel,a=i.length;for(e=0;e<a;e++)((t=i[e]).createColumnIndex||_.createColumnIndex&&!1!==t.createColumnIndex||"select"===t.stype&&(t.searchoptions||{}).generateValue||"select"===t.edittype&&(t.editoptions||{}).generateValue)&&(r[i[e].name]={});return r},q=function(e){var t,r,i={},a=e.length;for(t=0;t<a;t++)i["string"==typeof(r=e[t])?r:r.name]=t;return i},S=function(){var e,t,r={};for(this.p.rowIndexes=r,t=0;t<this.rows.length;t++)$(e=this.rows[t]).hasClass("jqgrow")&&(r[e.id]=e.rowIndex)},G=function(e){var t=$(this).data("pageX");t?(t=(t=String(t).split(";"))[t.length-1],$(this).data("pageX",t+";"+e.pageX)):$(this).data("pageX",e.pageX)},O=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},k={headers:[],cols:[],footers:[],dragStart:function(e,t,r,i){var a=this,o=$(a.bDiv),l=o.closest(_.gBox).offset(),n=i.offset().left+("rtl"===_.direction?0:a.headers[e].width+(jgrid.cell_width?0:O(_.cellLayout,0))-2);a.resizing={idx:e,startX:n,sOL:n,moved:!1,delta:n-t.pageX},a.curGbox=$(_.rs),a.curGbox.prependTo("body"),a.curGbox.css({display:"block",left:n,top:r[1]+l.top+1,height:r[2]}),a.curGbox.css("height",r[2]-(a.curGbox.outerHeight()-a.curGbox.height())+"px"),a.curGbox.data("idx",e),a.curGbox.data("delta",n-t.pageX),G.call(this.curGbox,t),feedback.call(getGridComponent(COMPONENT_NAMES.BODY_TABLE,o)[0],"resizeStart",t,e),document.onselectstart=function(){return!1},$(document).on("mousemove.jqGrid",function(e){if(k.resizing)return k.dragMove(e),!1}).on("mouseup.jqGrid"+_.id,function(){if(k.resizing)return k.dragEnd(),!1})},dragMove:function(e){var t=this,r=t.resizing;if(r){var i,a,o=e.pageX+r.delta-r.startX,l=t.headers,n=l[r.idx],s="ltr"===_.direction?n.width+o:n.width-o,d=((_.colModel[r.idx]||{}).autoResizing||{}).minColWidth||_.minResizingWidth;r.moved=!0,d<s&&(null==t.curGbox&&(t.curGbox=$(_.rs)),t.curGbox.css({left:r.sOL+o}),!0===_.forceFit?(i=l[r.idx+_.nv],(a="ltr"===_.direction?i.width-o:i.width+o)>_.autoResizing.minColWidth&&(n.newWidth=s,i.newWidth=a)):(t.newWidth="ltr"===_.direction?_.tblwidth+o:_.tblwidth-o,n.newWidth=s))}},resizeColumn:function(e,t,i){var a,o=this,l=o.headers,n=o.footers,s=l[e],d=s.newWidth||s.width,c=getGridComponent(COMPONENT_NAMES.BODY_TABLE,o.bDiv),u=getGridComponent(COMPONENT_NAMES.HEADER_TABLE,o.hDiv).children("thead").children("tr").first()[0].cells;d=parseInt(d,10),_.colModel[e].width=d,s.width=d,u[e].style.width=d+"px",o.cols[e].style.width=d+"px",o.fbRows&&($(o.fbRows[0].cells[e]).css("width",d),$(getGridComponent(COMPONENT_NAMES.FROZEN_HEADER_TABLE,o.fhDiv)[0].rows[0].cells[e]).css("width",d),_.footerrow&&$(getGridComponent(COMPONENT_NAMES.FROZEN_FOOTER_TABLE,o.fsDiv)[0].rows[0].cells[e]).css("width",d)),0<n.length&&(n[e].style.width=d+"px"),!0!==i&&j.call(c[0]),!0===_.forceFit?(d=(a=l[e+_.nv]).newWidth||a.width,a.width=d,u[e+_.nv].style.width=d+"px",o.cols[e+_.nv].style.width=d+"px",0<n.length&&(n[e+_.nv].style.width=d+"px"),_.colModel[e+_.nv].width=d):(_.tblwidth=o.newWidth||_.tblwidth,!0!==i&&(o.hDiv.scrollLeft=o.bDiv.scrollLeft,_.footerrow&&(o.sDiv.scrollLeft=o.bDiv.scrollLeft))),_.autowidth||void 0!==_.widthOrg&&"auto"!==_.widthOrg&&"100%"!==_.widthOrg||!0===i||r.setGridWidth.call(c,o.newWidth+_.scrollOffset,!1),t||feedback.call(c[0],"resizeStop",d,e)},dragEnd:function(){var e=this;e.hDiv.style.cursor="default",e.resizing&&(null!==e.resizing&&!0===e.resizing.moved&&($(e.headers[e.resizing.idx].el).removeData("autoResized"),e.resizeColumn(e.resizing.idx,!1)),$(_.rs).removeData("pageX"),e.resizing=!1,setTimeout(function(){$(_.rs).css("display","none").prependTo(_.gBox)},_.doubleClickSensitivity)),e.curGbox=null,document.onselectstart=function(){return!0},$(document).off("mousemove.jqGrid mouseup.jqGrid"+_.id)},populateVisible:function(){var e=this,t=$(e),r=e.grid,i=r.bDiv,a=$(i);r.timer&&clearTimeout(r.timer),r.timer=null;var o=a.height();if(o){if(e.rows.length)try{d=(s=e.rows[1])&&$(s).outerHeight()||r.prevRowHeight}catch(l){d=r.prevRowHeight}if(d){r.prevRowHeight=d;var n=_.rowNum;r.scrollTop=i.scrollTop;var s,d,c,u,p,h=r.scrollTop,f=Math.round(t.position().top)-h,g=f+t.height(),m=d*n;if(g<o&&f<=0&&(void 0===_.lastpage||(parseInt((g+h+m-1)/m,10)||0)<=_.lastpage)&&(u=parseInt((o-g+m-1)/m,10)||1,0<=g||u<2||!0===_.scroll?(c=(Math.round((g+h)/m)||0)+1,f=-1):f=1),0<f&&(c=(parseInt(h/m,10)||0)+1,u=(parseInt((h+o)/m,10)||0)+2-c,p=!0),u){if(_.lastpage&&(c>_.lastpage||1===_.lastpage||c===_.page&&c===_.lastpage))return;r.hDiv.loading?r.timer=setTimeout(function(){r.populateVisible.call(e)},_.scrollTimeout):(_.page=c,p&&(r.selectionPreserver.call(e),r.emptyRows.call(e,!1,!1)),r.populate.call(e,u))}}}},scrollGrid:function(){if(_.scroll){var e=this.scrollTop;void 0===k.scrollTop&&(k.scrollTop=0),e!==k.scrollTop&&(k.scrollTop=e,k.timer&&clearTimeout(k.timer),k.timer=setTimeout(function(){k.populateVisible.call(a)},_.scrollTimeout))}return k.hDiv.scrollLeft=this.scrollLeft,_.footerrow&&(k.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var e=$(this),t=_.selrow,r=_.selarrrow?$.makeArray(_.selarrrow):null,i=this.grid.bDiv,a=i.scrollLeft,o=function(){var l;if(_.selrow=null,!_.multiPageSelection){if(clearArray(_.selarrrow),_.multiselect&&r&&0<r.length)for(l=0;l<r.length;l++)r[l]!==t&&p.call(e,r[l],!1,null);t&&p.call(e,t,!1,null)}i.scrollLeft=a,e.off(".selectionPreserver",o)};e.on("jqGridGridComplete.selectionPreserver",o)}};a.grid=k,feedback.call(a,"beforeInitGrid"),_.iColByName=D(_.colModel),_.iPropByName=q(_.additionalProperties),jgrid.msie=0<jgrid.msiever();var F,I=$("<div class='"+y("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!_.multiselect+"'></div>"),E=jgrid.msie;_.direction=c(_.direction.toLowerCase()),-1===d(_.direction,["ltr","rtl"])&&(_.direction="ltr"),F=_.direction,$(I).insertBefore(a),o.removeClass("scroll").appendTo(I);var N=$("<div class='"+y("gBox","ui-jqgrid")+"'></div>");$(N).attr({id:_.gBoxId,dir:F}).insertBefore(I),$(I).attr("id",_.gViewId).appendTo(N),$("<div class='"+y("overlay","jqgrid-overlay")+"' id='lui_"+_.id+"'></div>").insertBefore(I),$("<div class='"+y("loading","loading")+"' id='load_"+_.id+"'>"+C("loadtext")+"</div>").insertBefore(I),o.attr({role:"presentation","aria-labelledby":"gbox_"+a.id});var T,A=function(e,t,r,i,o,n){var s,d,c,u,p,h=_.colModel[e],f=h.autoResizable?"<span class='"+_.autoResizing.wrapperClassName+"'>":"",g=h.autoResizable?r.substring(f.length,r.length-7):r,m=_.useUnformattedDataForCellAttr&&null!=n?n[h.name]:h.autoResizable?g:r,v=h.classes,b=h.align?"text-align:"+h.align+";":"",w=function(e){return"string"==typeof e?e.replace(/'/g,"&#39;"):e},y=" aria-describedby='"+_.id+"_"+h.name+"'";if(!0===h.hidden&&(b+="display:none;"),0===t)b+="width: "+k.headers[e].width+"px;";else if((l(h.cellattr)||"string"==typeof h.cellattr&&null!=jgrid.cellattr&&l(jgrid.cellattr[h.cellattr]))&&"string"==typeof(d=(l(h.cellattr)?h.cellattr:jgrid.cellattr[h.cellattr]).call(a,o,m,i,h,n,g)))for(d=d.replace(/\n/g,"&#xA;");;){if(null===(c=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(d))||c.length<5)return!p&&h.title&&(p=m),y+" style='"+w(b)+"'"+(v?" class='"+w(v)+"'":"")+(p?" title='"+w(p)+"'":"");switch(u=c[3],d=c[4],c[1].toLowerCase()){case"class":v?v+=" "+u:v=u;break;case"title":p=u;break;case"style":b+=u;break;default:y+=" "+c[1]+"="+c[2]+u+c[2]}}return s=""!==b?"style='"+b+"'":"",s+=(void 0!==v?" class='"+v+"'":"")+(h.title&&m?" title='"+stripHtml(r).replace(/'/g,"&apos;")+"'":""),s+=y},B=function(e){return null==e||""===e?"&#160;":_.autoencode?htmlEncode(e):String(e)},z=function(e){var t=_.treeReader,r=t.loaded,i=t.leaf_field,a=t.expanded_field,o=function(e){return!0===e||"true"===e||"1"===e};if("nested"===_.treeGridModel&&!e[i]){var l=parseInt(e[t.left_field],10),n=parseInt(e[t.right_field],10);e[i]=n===l+1}void 0!==e[r]&&(e[r]=o(e[r])),e[i]=o(e[i]),e[a]=o(e[a])},P=function(e,t){var r,i;for(r in _.indexByColumnData)_.indexByColumnData.hasOwnProperty(r)&&(i=e[r],e.hasOwnProperty(r)&&void 0!==i&&""!==i&&(_.ignoreCase&&(i=String(i).toLowerCase()),void 0===_.indexByColumnData[r][i]&&(_.indexByColumnData[r][i]={}),_.indexByColumnData[r][i][t]=e[r],void 0===_.dataIndexById[t]&&(_.dataIndexById[t]={}),void 0===_.dataIndexById[t][r]&&(_.dataIndexById[t][r]={}),_.dataIndexById[t][r][i]=_.indexByColumnData[r][i]))},M=function(){var e,t,r,i,o,d,c,u,p,h,f,g,m=_.data,v=m.length,b=_.localReader,w=_.additionalProperties,y=b.cell,x=_.arrayReaderInfos;if("local"===_.datatype&&!0===b.repeatitems)for(i=!1===_.keyName?l(b.id)?b.id.call(a,m):b.id:_.keyName,isNaN(i)?l(i)||null!=_.arrayReaderInfos[i]&&(o=_.arrayReaderInfos[i].order):o=Number(i),e=0;e<v;e++){for(p in t=m[e],r=y&&getAccessor(t,y)||t,h=n(r),c={},x)x.hasOwnProperty(p)&&(g=x[p],d=getAccessor(r,h?g.order:g.name),1===g.type&&null!=(f=w[g.index])&&l(f.convert)&&(d=f.convert(d,r)),void 0!==d&&(c[p]=d));void 0!==c[i]?u=void 0!==c[i]?c[i]:randId():(void 0===(u=getAccessor(t,n(t)?o:i))&&(u=getAccessor(r,n(r)?o:i)),void 0===u&&(u=randId())),u=String(u),c[b.id]=u,_.treeGrid&&z(c),s(m[e],c)}else if(_.treeGrid)for(e=0;e<v;e++)z(m[e])},L=function(){var e,t,r,i,a=_.data.length;for(e=!1===_.keyName||_.loadonce&&_.dataTypeOrg?_.localReader.id:_.keyName,_._index={},_.dataIndexById={},_.indexByColumnData=R(),t=0;t<a;t++)void 0===(r=getAccessor(i=_.data[t],e))&&(r=String(randId()),void 0===i[e]&&(i[e]=r)),_._index[r]=t,P.call(this,i,r)},V=function(e,t){var r,i,o,n=_.colModel,s=n.length,d=function(e){return null==e||""===e?"&#160;":htmlEncode(e)},c=function(e){return null==e||""===e?"&#160;":String(e)};for(r=0;r<s;r++)(i=n[r]).cellBuilder=null,e||(o={colModel:i,gid:_.id,pos:r},void 0===i.formatter?i.cellBuilder=_.autoencode?d:c:"string"==typeof i.formatter&&null!=$.fn.fmatter&&l($.fn.fmatter.getCellBuilder)?i.cellBuilder=$.fn.fmatter.getCellBuilder.call(a,i.formatter,o,t||"add"):l(i.getCellBuilder)&&(i.cellBuilder=i.getCellBuilder.call(a,o,t||"add")))},H=function(e,t,i,a){var o=this,s=$(o),d=new Date,c=_.datatype,u="local"!==c&&_.loadonce||"xmlstring"===c||"jsonstring"===c,p=("xmlstring"===c||"xml"===c)&&$.isXMLDoc(e),h="_id_",f=_.localReader,g=getAccessor;if(e&&("xml"!==c||p)){switch(-1!==_.treeANode||_.scroll?t=1<t?t:1:(k.emptyRows.call(o,!1,!0),t=1),u&&(clearArray(_.data),clearArray(_.lastSelectedData),_._index={},_.grouping&&null!=_.groupingView&&(_.groupingView.groups=[],_.groupingView._locgr=!1),_.localReader.id=h),_.reccount=0,c){case"xml":case"xmlstring":f=_.xmlReader,g=jgrid.getXmlData;break;case"json":case"jsonp":case"jsonstring":f=_.jsonReader}var m,v,b,w,y,x,C,j,D,R,q,G,F,I={},E=_.colModel,N=E.length,T=_.arrayReaderInfos,A={},B=function(e){return function(t){var r=null!=t&&l(t.getAttribute)?t.getAttribute(e):null;return null!==r?r:void 0}},M=function(e){return function(){var t,r=A[e];if(null!=r)return 0<(t=r.childNodes).length?t[0].nodeValue:void 0}};_.page=O(g(e,f.page),_.page),_.lastpage=O(g(e,f.total),1),_.records=O(g(e,f.records)),l(f.userdata)?_.userData=f.userdata.call(o,e)||{}:p?g(e,f.userdata,!0).each(function(){_.userData[this.getAttribute("name")]=$(this).text()}):_.userData=g(e,f.userdata)||{},V();var L,H,W,U,Y={},X=_.additionalProperties,Q=function(e,t){p&&"string"==typeof t&&(/^\w+$/.test(t)?Y[e]=M(t):/^\[\w+\]$/.test(t)&&(Y[e]=B(t.substring(1,t.length-1))))},Z=function(e){var t=e.name,r=p?e.xmlmap||t:("local"===c&&!_.dataTypeOrg||"jsonstring"===c||"json"===c||"jsonp"===c)&&e.jsonmap||t;!1!==_.keyName&&!0===e.key&&(_.keyName=t),("string"==typeof r||l(r))&&(Y[t]=r),l(r)||Q(t,r)};for(m=0;m<N;m++)Z(E[m]);for(N=X.length,m=0;m<N;m++)"object"==typeof(W=X[m])&&null!=W?Z(W):Q(W,W);if(y=!1===_.keyName?l(f.id)?f.id.call(o,e):f.id:_.keyName,isNaN(y)?l(y)||(T[y]&&(x=T[y].order),p&&!1===_.keyName&&("string"==typeof y&&/^\[\w+\]$/.test(y)?y=B(y.substring(1,y.length-1)):"string"==typeof y&&/^\w+$/.test(y)&&(y=M(y)))):x=Number(y),w=g(e,f.root,!0),f.row){if(1===w.length&&"string"==typeof f.row&&/^\w+$/.test(f.row)){for(U=[],q=(R=w[0].childNodes).length,D=0;D<q;D++)1===(G=R[D]).nodeType&&G.nodeName===f.row&&U.push(G);w=U}else w=g(w,f.row,!0)}null==w&&n(e)&&(w=e),w||(w=[]),0<(b=w.length)&&_.page<=0&&(_.page=1);var J=parseInt(_.rowNum,10);a&&(J*=a+1);var K,ee,et=[],er=[];for(U=[],m=0;m<b;m++){if(ee=w[m],v=f.repeatitems&&f.cell&&g(ee,f.cell,!0)||ee,L=f.repeatitems&&(p||n(v)),I={},A={},p&&!L&&null!=v)for(q=(R=v.childNodes).length,D=0;D<q;D++)1===(G=R[D]).nodeType&&(A[G.nodeName]=G);for(j in T)T.hasOwnProperty(j)&&(F=T[j],L?(H=v[F.order],p&&null!=H&&(H=H.textContent||H.text)):H=null!=Y[j]&&"string"!=typeof Y[j]?Y[j].call(o,v,{cmName:j,iItem:m}):g(v,"string"==typeof Y[j]?Y[j]:F.name),1===F.type&&null!=(W=X[F.index])&&l(W.convert)&&(H=W.convert(H,v)),void 0!==H&&(I[j]=H));if(void 0!==I[y]?K=void 0!==I[y]?I[y]:randId():(void 0===(K=g(ee,n(ee)?x:y))&&(K=g(v,n(v)?x:y)),void 0===K&&(K=randId())),void 0===I[y]&&(I[y]=K),K=String(K),C=_.idPrefix+K,_.treeGrid&&z(I),m<J)er.push(C),et.push(v),U.push(I);else if(!u)break;(u||!0===_.treeGrid)&&(I[h]=K,_.data.push(I),P(I,K),_._index[I[h]]=_.data.length-1)}if(u&&!0!==_.treeGrid){if(_.forceClientSorting)return;_.lastSelectedData=_.data.slice()}var ei=jgrid.parseDataToHtml.call(o,b,er,U,et,t,a,u);V(!0);var ea=-1<_.treeANode?_.treeANode:0,eo=$(o.tBodies[0]);if(!0===_.treeGrid&&0<ea?$(o.rows[ea]).after(ei.join("")):_.scroll?eo.append(ei.join("")):(null==o.firstElementChild||void 0!==document.documentMode&&document.documentMode<=9?eo.html(eo.html()+ei.join("")):o.firstElementChild.innerHTML+=ei.join(""),o.grid.cols=o.rows[0].cells),_.grouping){S.call(o);var el,en=function(e){var t=$(this).closest("tr.jqgroup").attr("id");return s.jqGrid("groupingToggle",t,this,e),!1};for(m=0;m<o.rows.length;m++)(el=$(o.rows[m])).hasClass("jqgroup")&&el.children("td").children("span.tree-wrap").click(en)}if(!0===_.subGrid)try{r.addSubGrid.call(s,_.iColByName.subgrid)}catch(es){}if(!1===_.gridview||l(_.afterInsertRow))for(m=0;m<Math.min(b,J);m++)feedback.call(o,"afterInsertRow",er[m],U[m],et[m]);if(_.totaltime=new Date-d,0<m&&0===_.records&&(_.records=b),clearArray(ei),!0===_.treeGrid)try{r.setTreeNode.call(s,ea+1,m+ea+1)}catch(ed){}_.reccount=Math.min(b,J),_.treeANode=-1,_.userDataOnFooter&&r.footerData.call(s,"set",_.userData,!0),u&&(_.records=b,_.lastpage=Math.ceil(b/J)),i||o.updatepager(!1,!0),(function(){var e,t,r=$.fn.fmatter;for(e=0;e<_.colModel.length;e++)"string"==typeof(t=_.colModel[e].formatter)&&null!=r&&l(r[t])&&l(r[t].pageFinalization)&&r[t].pageFinalization.call(this,e)}).call(o)}},W=function(e){var t,r=e.outerWidth();return r<=0&&(t=$(this).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='"+y("gBox","ui-jqgrid")+"' style='font-size:"+t+";visibility:hidden;margin:0;padding:0;' ></div>"),$(e).clone().appendTo("#testpg"),r=$("#testpg>.ui-pg-table").width(),$("#testpg").remove()),0<r&&e.parent().width(r),r},U=function(){this.grid.hDiv.loading=!0,_.hiddengrid||r.progressBar.call($(this),{method:"show",loadtype:_.loadui,htmlcontent:C("loadtext")})},Y=function(){this.grid.hDiv.loading=!1,r.progressBar.call($(this),{method:"hide",loadtype:_.loadui})},X=function(e){var t=this,i=$(t),o=t.grid;if(!o.hDiv.loading){var d,c,p=_.scroll&&!1===e,h={},g=_.prmNames;_.page<=0&&(_.page=Math.min(1,_.lastpage)),null!==g.search&&(h[g.search]=_.search),null!==g.nd&&(h[g.nd]=new Date().getTime()),(isNaN(parseInt(_.rowNum,10))||0>=parseInt(_.rowNum,10))&&(_.rowNum=_.maxRowNum),null!==g.rows&&(h[g.rows]=_.rowNum),null!==g.page&&(h[g.page]=_.page),null!==g.sort&&(h[g.sort]=_.sortname),null!==g.order&&(h[g.order]=_.sortorder),null!==_.rowTotal&&null!==g.totalrows&&(h[g.totalrows]=_.rowTotal);var m=l(_.loadComplete),v=m?_.loadComplete:null,b=0;if(1<(e=e||1)?null!==g.npage?(h[g.npage]=e,b=e-1,e=1):v=function(r){_.page++,o.hDiv.loading=!1,m&&_.loadComplete.call(t,r),X.call(t,e-1)}:null!==g.npage&&delete _.postData[g.npage],_.grouping&&r.groupingSetup){r.groupingSetup.call(i);var w,y,C,D,R=_.groupingView,q="";for(w=0;w<R.groupField.length;w++){for(y=R.groupField[w],C=0;C<_.colModel.length;C++)(D=_.colModel[C]).name===y&&D.index&&(y=D.index);q+=y+" "+R.groupOrder[w]+", "}h[g.sort]=q+h[g.sort]}s(_.postData,h);var S=_.scroll?t.rows.length-1:1,G=function(){j.call(t),_.autowidth||void 0!==_.widthOrg&&"auto"!==_.widthOrg&&"100%"!==_.widthOrg||r.setGridWidth.call(i,_.tblwidth+_.scrollOffset,!1)},O=function(){var e;if(_.autoresizeOnLoad)r.autoResizeAllColumns.call(i),clearArray(_.columnsToReResizing),_.autowidth&&r.setGridWidth.call(i,i.closest(".ui-jqgrid").parent().width(),!0);else{for(e=0;e<_.columnsToReResizing.length;e++)r.autoResizeColumn.call(i,_.columnsToReResizing[e]);clearArray(_.columnsToReResizing)}},F=function(){feedback.call(t,"loadComplete",c),O(),i.triggerHandler("jqGridAfterLoadComplete",[c]),Y.call(t),_.datatype="local",_.datastr=null,G()},I=function(r){i.triggerHandler("jqGridLoadComplete",[r]),v&&v.call(t,r),O(),i.triggerHandler("jqGridAfterLoadComplete",[r]),p&&o.populateVisible.call(t),1===e&&Y.call(t),G()},E=function(){var i=(function(){var e,t,i,a=$(this),o=_.multiSort?[]:"",s={},d=!1,c={},p=[],h=[],g=x("formatter.date.srcformat"),m=x("formatter.date.newformat");if(!n(_.data))return{};_.multiSort&&K(o,s);var v,b,w=!!_.grouping&&_.groupingView,y=function(e,t,r){var i,a,l=e.index||e.name,n=e.sorttype||"text";if(c[e.name]={reader:_.dataTypeOrg?e.name:e.jsonmap||e.name,iCol:t,stype:n,srcfmt:"",newfmt:"",sfunc:e.sortfunc||null,isAddProp:!0===r},"date"!==n&&"datetime"!==n||(e.formatter&&"string"==typeof e.formatter&&"date"===e.formatter?(i=e.formatoptions&&e.formatoptions.srcformat?e.formatoptions.srcformat:g,a=e.formatoptions&&e.formatoptions.newformat?e.formatoptions.newformat:m):i=a=e.datefmt||"Y-m-d",c[e.name].srcfmt=i,c[e.name].newfmt=a),_.grouping)for(b=0,v=w.groupField.length;b<v;b++)e.name===w.groupField[b]&&(p[b]=c[l],h[b]=l);_.multiSort||d||e.index!==_.sortname&&e.name!==_.sortname||(o=e.name,d=!0)};if(u(_.colModel,function(e){y(this,e)}),u(_.additionalProperties,function(e){y("string"==typeof this?{name:this}:this,e,!0)}),_.treeGrid)return r.SortTree.call(a,o,_.sortorder,null!=c[o]&&c[o].stype?c[o].stype:"text",null!=c[o]&&c[o].srcfmt?c[o].srcfmt:""),!1;var C={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().inSet:e.andNot().inSet},in:function(e){return e.inSet},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},j=jgrid.from.call(this,_.data);if(_.ignoreCase&&(j=j.ignoreCase()),!0===_.search){var D=_.postData[(_.searching||{}).sFilter||_.prmNames.filters];if(D)"string"==typeof D&&(D=$.parseJSON(D)),function e(t){var r,i,a,o,n,s,d,u=0;if(null!=t.groups){for((i=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase())&&j.orBegin(),r=0;r<t.groups.length;r++){0<u&&i&&j.or();try{e(t.groups[r])}catch(p){f(p)}u++}i&&j.orEnd()}if(null!=t.rules)try{for((a=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase())&&j.orBegin(),r=0;r<t.rules.length;r++)n=t.rules[r],o=t.groupOp.toString().toUpperCase(),C[n.op]&&n.field?(0<u&&o&&"OR"===o&&(j=j.or()),null!=(d=c[n.field])&&(s=d.reader,j=C[n.op](j,o)(l(s)?'jQuery.jgrid.getAccessor(this,jQuery("'+_.idSel+'")[0].p.colModel['+d.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+s+"')",n.data,c[n.field]))):null!=_.customSortOperations&&null!=_.customSortOperations[n.op]&&l(_.customSortOperations[n.op].filter)&&(j=j.custom(n.op,n.field,n.data)),u++;a&&j.orEnd()}catch(h){f(h)}}(D);else try{var R=c[_.postData.searchField];j=C[_.postData.searchOper](j)(l(R.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+_.idSel+'")[0].p.colModel['+R.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+R.reader+"')",_.postData.searchString,c[_.postData.searchField])}catch(q){}}if(_.grouping)for(b=0;b<v&&b<h.length&&b<p.length;b++)j.orderBy(h[b],w.groupOrder[b],p[b].stype,p[b].srcfmt);_.multiSort?u(o,function(){j.orderBy(this,s[this],c[this].stype,c[this].srcfmt,c[this].sfunc)}):o&&_.sortorder&&d&&j.orderBy(_.sortname,"DESC"===_.sortorder.toUpperCase()?"d":"a",c[o].stype,c[o].srcfmt,c[o].sfunc),_.lastSelectedData=j.select();var S=parseInt(_.rowNum,10),G=_.lastSelectedData.length,O=parseInt(_.page,10),k=Math.ceil(G/S),F={};if(_.grouping&&_.groupingView._locgr){if(_.groupingView.groups=[],_.footerrow&&_.userDataOnFooter){for(t in _.userData)_.userData.hasOwnProperty(t)&&(_.userData[t]=0);i=!0}for(e=0;e<G;e++){if(i)for(t in _.userData)_.userData.hasOwnProperty(t)&&(_.userData[t]+=parseFloat(_.lastSelectedData[e][t]||0));r.groupingPrepare.call(a,_.lastSelectedData[e],e,S)}}c=j=null;var I=_.localReader;return F[I.total]=k,F[I.page]=O,F[I.records]=G,F[I.root]=_.lastSelectedData.slice((O-1)*S,O*S),F[I.userdata]=_.userData,F}).call(t);H.call(t,i,S,1<e,b),I(i)};if(!feedback.call(t,"beforeRequest"))return;if(l(_.datatype))return void _.datatype.call(t,_.postData,"load_"+_.id,S,e,b);switch(d=_.datatype.toLowerCase(),$(k.eDiv).hide(),d){case"json":case"jsonp":case"xml":case"script":$.ajax(s({url:_.url,type:_.mtype,dataType:d,data:jgrid.serializeFeedback.call(a,_.serializeGridData,"jqGridSerializeGridData",_.postData),success:function(r,i,a){_.jqXhr=null,$(k.eDiv).hide(),l(_.beforeProcessing)&&!1===_.beforeProcessing.call(t,r,i,a)?Y.call(t):(H.call(t,r,S,1<e,b),I(r),(_.loadonce||_.treeGrid)&&(_.dataTypeOrg=_.datatype,_.datatype="local",_.forceClientSorting&&E()))},error:function(r,i,a){_.jqXhr=null,l(_.loadError)&&_.loadError.call(t,r,i,a),1===e&&Y.call(t)},beforeSend:function(e,r){var i=!0;if(l(_.loadBeforeSend)&&(i=_.loadBeforeSend.call(t,e,r)),void 0===i&&(i=!0),!1===i)return!1;_.jqXhr=e,U.call(t)}},jgrid.ajaxOptions,_.ajaxGridOptions));break;case"xmlstring":U.call(t),c="string"==typeof _.datastr?$.parseXML(_.datastr):_.datastr,H.call(t,c),F(),_.forceClientSorting&&E();break;case"jsonstring":U.call(t),c=_.datastr&&"string"==typeof _.datastr?$.parseJSON(_.datastr):_.datastr,H.call(t,c),F(),_.forceClientSorting&&E();break;case"local":case"clientside":U.call(t),_.datatype="local",E()}}},Q=function(e){var t=this.grid;$(_.cb,t.hDiv).prop("checked",e),_.frozenColumns&&$(_.cb,t.fhDiv).prop("checked",e)},Z=function(e){var t,r;for(t=0;t<_.savedRow.length;t++)r=_.savedRow[t],"save"===e?r.hasOwnProperty("ic")?o.jqGrid("saveCell",r.id,r.ic):o.jqGrid("saveRow",r.id):r.hasOwnProperty("ic")?o.jqGrid("restoreCell",r.id,r.ic):o.jqGrid("restoreRow",r.id)},J=function(e,t){var r,i,o,l,n,s,d,c,u,p=y("states.hover"),h=y("states.disabled"),f="<td class='ui-pg-button "+h+"'><span class='ui-separator'></span></td>",g="",m="<table style='table-layout:auto;white-space: pre;"+("left"===_.pagerpos?"margin-right:auto;":"right"===_.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",v="",b=function(e,t,r){return!(0<_.savedRow.length&&"prevent"===_.pagingDuringEditing)&&!!feedback.call(a,"onPaging",e,{newPage:t,currentPage:O(_.page,1),lastPage:O(_.lastpage,1),currentRowNum:O(_.rowNum,10),newRowNum:r})&&(_.selrow=null,_.multiselect&&(_.multiPageSelection||clearArray(_.selarrrow),Q.call(a,!1)),Z(_.pagingDuringEditing),!0)};if(t+="_"+e,r="pg_"+e,i=e+"_left",o=e+"_center",l=e+"_right",$("#"+jqID(e)).append("<div id='"+r+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+i+"' class='ui-jqgrid-pg-left'"+(void 0!==_.pagerLeftWidth?" style='width:"+_.pagerLeftWidth+"px;'":"")+"></td><td id='"+o+"' class='ui-jqgrid-pg-center'"+(void 0!==_.pagerCenterWidth?" style='width:"+_.pagerCenterWidth+"px;'":"")+"></td><td id='"+l+"' class='ui-jqgrid-pg-right'"+(void 0!==_.pagerRightWidth?" style='width:"+_.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),r="#"+jqID(r),0<_.rowList.length){v="<td dir='"+F+"'>";var x,j=C("pgrecs");for(v+="<select class='"+y("pager.pagerSelect","ui-pg-selbox")+"' "+(j?"title='"+j+"'":"")+">",s=0;s<_.rowList.length;s++)1===(x=_.rowList[s].toString().split(":")).length&&(x[1]=x[0]),v+="<option value='"+x[0]+"'"+(O(_.rowNum,0)===O(x[0],0)?" selected='selected'":"")+">"+x[1]+"</option>";v+="</select></td>"}if("rtl"===F&&(m+=v),!0===_.pginput&&(g="<td dir='"+F+"'>"+jgrid.format(C("pgtext")||"","<input aria-label='Page No.' class='"+y("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+e+"'>0</span>")+"</td>"),e="#"+jqID(e),!0===_.pgbuttons){var D=["first","prev","next","last"],R=D.slice(),q=y("pager.pagerButton","ui-pg-button");for("rtl"===F&&D.reverse(),s=0;s<D.length;s++)m+=(d=D[s],c=R[s],u=C("pg"+d),"<td role='button' tabindex='0' id='"+d+t+"' class='"+q+"' "+(u?"title='"+u+"'":"")+"><span class='"+w("pager."+c)+"'></span></td>"),1===s&&(m+=""!==g?f+g+f:"")}else""!==g&&(m+=g);"ltr"===F&&(m+=v),m+="</tr></tbody></table>",!0===_.viewrecords&&$("td"+e+"_"+_.recordpos,r).append("<span dir='"+F+"' style='text-align:"+_.recordpos+"' class='ui-paging-info'></span>");var S=$("td"+e+"_"+_.pagerpos,r);S.append(m),n=W.call(this,S.children(".ui-pg-table")),_._nvtd=[],_._nvtd[0]=n?Math.floor((_.width-n)/2):Math.floor(_.width/3),_._nvtd[1]=0,m=null,$(".ui-pg-selbox",r).on("change",function(){var e=O(this.value,10),t=Math.round(_.rowNum*(_.page-1)/e-.5)+1;return b("records",t,e)&&(_.page=t,_.rowNum=e,_.pager&&$(".ui-pg-selbox",_.pager).val(e),_.toppager&&$(".ui-pg-selbox",_.toppager).val(e),X.call(a)),!1}),!0===_.pgbuttons&&($(".ui-pg-button",r).hover(function(){hasOneFromClasses(this,h)?this.style.cursor="default":($(this).addClass(p),this.style.cursor="pointer")},function(){hasOneFromClasses(this,h)||($(this).removeClass(p),this.style.cursor="default")}),$("#first"+jqID(t)+", #prev"+jqID(t)+", #next"+jqID(t)+", #last"+jqID(t)).click(function(){if(hasOneFromClasses(this,h))return!1;var e=O(_.page,1),r=e,i=this.id,o=O(_.lastpage,1),l=!1,n=!0,s=!0,d=!0,c=!0;return 0===o||1===o?(e<=1&&(s=n=!1),c=d=!1):1<o&&1<=e?1===e?s=n=!1:e===o&&(c=d=!1):1<o&&0===e&&(c=d=!1,e=o-1),this.id==="first"+t&&n&&(i="first",r=1,l=!0),this.id==="prev"+t&&s&&(i="prev",r=e-1,l=!0),this.id==="next"+t&&d&&(i="next",r=e+1,l=!0),this.id==="last"+t&&c&&(i="last",r=o,l=!0),b(i,r,O(_.rowNum,10))&&(_.page=r,l&&X.call(a)),!1})),!0===_.pginput&&$("input.ui-pg-input",r).on("keypress.jqGrid",function(e){var t=e.charCode||e.keyCode||0,r=O($(this).val(),1);return 13===t?(b("user",r,O(_.rowNum,10))&&($(this).val(r),_.page=0<$(this).val()?$(this).val():_.page,X.call(a)),!1):this}),S.children(".ui-pg-table").on("keydown.jqGrid",function(e){var t;13===e.which&&0<(t=S.find(":focus")).length&&t.trigger("click")})},K=function(e,t,r){if(u((_.sortname+" "+_.sortorder).split(","),function(){var t=$.trim(this).split(" ");2===t.length&&e.push(t[0])}),null!=r){var i=$.inArray(r.index||r.name,e);""!==r.lso&&i<0?e.push(r.index||r.name):""===r.lso&&0<=i&&e.splice(i,1)}u(_.colModel,function(){var r,i=this.index||this.name;this.lso&&(r=this.lso.split("-"),0>$.inArray(i,e)&&e.push(i),t[i]=r[r.length-1])})},ee=function(e,t,i,o,n,s){var c=this,p=c.grid,h=_.colModel[t],f=y("states.disabled");if(null!=h&&h.sortable&&!(0<_.savedRow.length&&"prevent"===_.sortingDuringEditing)){if(_.lastsort===t&&""!==_.sortname?"asc"===_.sortorder?_.sortorder="desc":"desc"===_.sortorder?_.sortorder="asc":_.sortorder=h.firstsortorder||"asc":_.sortorder=h.firstsortorder||"asc",h.lso?"asc"===h.lso?h.lso+="-desc":"desc"===h.lso?h.lso+="-asc":("asc-desc"===h.lso||"desc-asc"===h.lso)&&(_.threeStateSort||_.multiSort)&&(h.lso=""):h.lso=h.firstsortorder||"asc",!i&&_.resetPageAfterSort&&(_.page=1),_.multiSort)!function(e,t){var r,i="",o=_.colModel[e],n=y("states.disabled"),s=_.frozenColumns?$(a.grid.headers[e].el).add($(t)):$(a.grid.headers[e].el),c=s.find("span.s-ico"),p=c.children("span.ui-icon-asc"),h=c.children("span.ui-icon-desc"),f=p,g=h,m=[],v={};if(s.find("span.ui-grid-ico-sort").addClass(n),s.attr("aria-selected","false"),o.lso?(c.show(),"desc"===(r=(r=o.lso.split("-"))[r.length-1])&&(f=h,g=p),f.removeClass(n).css("display",""),_.showOneSortIcon&&g.hide(),s.attr("aria-selected","true")):_.viewsortcols[0]||c.hide(),K(m,v,o),"string"==typeof _.sortname&&""!==_.sortname&&_.sortname.split(",").length<m.length){var b=function(e){u(_.colModel,function(){var t,r="#jqgh_"+jgrid.jqID(_.id+"_"+this.name),i=$(r);if(this.lso&&(this.index||this.name)===e){if("function"==typeof m.indexOf)t=m.indexOf(e);else{for(t=0;t<m.length&&m[t]!==e;t++);t===m.length&&(t=-1)}0<=t&&(m.splice(t,1),this.lso="")}_.frozenColumns&&(i=i.add($(k.fhDiv).find(r))),i.children(".s-ico")[this.lso?"show":"hide"]()})};if("lastClickedFirstSorted"===_.multiSortOrder&&1<m.length)for(m.unshift(m[m.length-1]),m.pop();m.length>_.maxSortColumns;)b(m[m.length-1]);else l(_.multiSortOrder)&&(m=_.multiSortOrder.call(a,{sortNames:m,cm:o,sortDirs:v,removeSorting:b})||m)}u(m,function(){0<i.length&&(i+=", "),i+=this+" "+v[this],_.sortorder=v[this]}),_.sortname=i.substring(0,i.length-_.sortorder.length-1),_.showSortOrder&&u(_.colModel,function(){if(this.sortable){var e=d(this.name,m),t="#jqgh_"+jgrid.jqID(_.id+"_"+this.name),r=$(t);_.frozenColumns&&(r=r.add($(k.fhDiv).find(t))),r.children(".ui-jqgrid-sort-order").html(e<0?"&nbsp;":l(_.formatSortOrder)?_.formatSortOrder.call(a,{cm:this,sortIndex:e}):e+1)}})}(t,n);else{if(o){if(_.lastsort===t&&_.sortorder===o&&!i)return;_.sortorder=o}var g=p.headers,m=p.fhDiv,v=g[_.lastsort]?$(g[_.lastsort].el):$(),b=_.frozenColumns?$(n):$(g[t].el),w=b.find("span.s-ico"),x=w.children(".ui-icon-"+_.sortorder),C=w.children(".ui-icon-"+("asc"===_.sortorder?"desc":"asc"));h=_.colModel[_.lastsort],v.find(".ui-grid-ico-sort").addClass(f),v.attr("aria-selected","false"),_.frozenColumns&&(m.find(".ui-grid-ico-sort").addClass(f),m.find("th").attr("aria-selected","false")),_.viewsortcols[0]||(_.lastsort!==t?(_.frozenColumns&&m.find("span.s-ico").hide(),v.find("span.s-ico").hide(),w.show()):""===_.sortname&&w.show()),_.lastsort!==t&&"true"===v.data("autoResized")&&(null!=h&&null!=h.autoResizing&&h.autoResizing.compact||_.autoResizing.compact)&&_.columnsToReResizing.push(_.lastsort),h=_.colModel[t],w.css("display",""),""!==h.lso?(x.removeClass(f).css("display",""),_.showOneSortIcon&&C.removeClass(f).hide(),b.attr("aria-selected","true")):(b.attr("aria-selected","false"),_.threeStateSort&&(_.sortorder="",_.viewsortcols[0]||w.hide())),_.lastsort!==t&&"true"===b.data("autoResized")&&(null!=h&&null!=h.autoResizing&&h.autoResizing.compact||_.autoResizing.compact)&&_.columnsToReResizing.push(t),_.sortname=h.index||e}if(feedback.call(c,"onSortCol",_.sortname,t,_.sortorder,s||{})){if("local"===_.datatype?_.deselectAfterSort&&!_.multiPageSelection&&r.resetSelection.call($(c)):_.multiPageSelection||(_.selrow=null,_.multiselect&&(Q.call(c,!1),clearArray(_.selarrrow))),Z(_.sortingDuringEditing),_.scroll){var j=p.bDiv.scrollLeft;k.emptyRows.call(c,!0,!1),p.hDiv.scrollLeft=j}_.subGrid&&"local"===_.datatype&&$("td.sgexpanded","#"+jqID(_.id)).each(function(){$(this).trigger("click")}),X.call(c),_.lastsort=t,_.sortname!==e&&t&&(_.lastsort=t)}else _.lastsort=t}},et=function(e){return _.iColByName[(e.id||"").substring(_.id.length+1)]};-1===d(_.multikey,["shiftKey","altKey","ctrlKey"])&&(_.multikey=!1),_.keyName=!1,_.sortorder=_.sortorder.toLowerCase(),jgrid.cell_width=jgrid.cellWidth();var er,ei,ea=jgrid.cmTemplate;for(er=0;er<_.colModel.length;er++)T="string"==typeof(ei=_.colModel[er]).template?null!=ea&&("object"==typeof ea[ei.template]||l(ea[ei.template]))?ea[ei.template]:{}:ei.template,l(T)&&(T=T.call(a,{cm:ei,iCol:er})),ei=s(!0,{},_.cmTemplate,T||{},ei),!1===_.keyName&&!0===ei.key&&(_.keyName=ei.name),_.colModel[er]=ei;for(_.indexByColumnData=R(),er=0;er<_.additionalProperties.length;er++)ei=_.additionalProperties[er],!1===_.keyName&&!0===ei.key&&(_.keyName=ei.name);if(0===_.colNames.length)for(er=0;er<_.colModel.length;er++)_.colNames[er]=void 0!==_.colModel[er].label?_.colModel[er].label:_.colModel[er].name;if(_.colNames.length===_.colModel.length){if(!0===_.grouping&&(_.scroll=!1,_.rownumbers=!1,_.treeGrid=!1,_.gridview=!0),_.subGrid&&l(r.setSubGrid))try{r.setSubGrid.call(o)}catch(eo){}if(_.multiselect&&("left"===_.multiselectPosition||"right"===_.multiselectPosition)){var el="left"===_.multiselectPosition?"unshift":"push";_.colNames[el]("<input id='"+_.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),_.colModel[el]({name:"cb",width:jgrid.cell_width?_.multiselectWidth+_.cellLayout:_.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})}if(_.rownumbers&&(_.colNames.unshift(""),_.colModel.unshift({name:"rn",width:jgrid.cell_width?_.rownumWidth+_.cellLayout:_.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),_.iColByName=D(_.colModel),_.xmlReader=s(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},_.xmlReader),_.jsonReader=s(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},_.jsonReader),_.localReader=s(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},_.localReader),_.scroll&&(_.pgbuttons=!1,_.pginput=!1,_.rowList=[]),!0===_.treeGrid){try{r.setTreeGrid.call(o)}catch(en){}"local"!==_.datatype&&(_.localReader={id:"_id_"}),_.iPropByName=q(_.additionalProperties)}if(function(){var e,t,r,i=_.remapColumns,a=_.colModel,o=a.length,l=[];for(e=0;e<o;e++)0>d(r=a[e].name,_.reservedColumnNames)&&l.push(r);if(null!=i)for(t=l.slice(),e=0;e<i.length;e++)l[e]=t[i[e]];_.cmNamesInputOrder=l}(),function(){var e,t,r,i,a,o=_.colModel,l=_.cmNamesInputOrder,n=_.additionalProperties,s=l.length;for(_.arrayReaderInfos={},t=_.arrayReaderInfos,a=0;a<s;a++)0>d(r=l[a],_.reservedColumnNames)&&!t.hasOwnProperty(r)&&(void 0!==(i=_.iColByName[r])?t[r]={name:r,index:i,order:a,type:0}:void 0!==(i=_.iPropByName[r])?t[r]={name:r,index:i,order:a,type:1}:r===(_.prmNames.rowidName||"rowid")&&(t[r]={index:i,type:2}));for(s=o.length,e=0;e<s;e++)0>d(r=o[e].name,_.reservedColumnNames)&&!t.hasOwnProperty(r)&&(t[r]={name:r,index:e,order:a,type:0},a++);for(s=n.length,e=0;e<s;e++)null==(r=n[e])||t.hasOwnProperty(r)||("object"==typeof r&&"string"===$.type(r.name)&&(r=r.name),t[r]={name:r,index:e,order:a,type:1},a++)}(),_.data.length&&(M.call(a),L.call(a)),!0===_.shrinkToFit&&!0===_.forceFit){for(er=_.colModel.length-1;0<=er;er--)if(!0!==_.colModel[er].hidden){_.colModel[er].resizable=!1;break}}var es,ed,ec,eu,ep,eh,ef,eg,em,ev=[],e$=[],eb=[],ew="<thead><tr class='ui-jqgrid-labels' role='row'>",ey="<tbody><tr style='display:none;'>",e_=y("states.hover"),ex=y("states.hoverTh")||e_,eC=y("states.disabled");if(_.multiSort)for(ev=_.sortname.split(","),em=0;em<ev.length;em++)eb=c(ev[em]).split(" "),ev[em]=c(eb[0]),e$[em]=eb[1]?c(eb[1]):_.sortorder||"asc";for(er=0;er<_.colNames.length;er++){switch(ei=_.colModel[er],ep=_.headertitles||ei.headerTitle?" title='"+stripHtml("string"==typeof ei.headerTitle?ei.headerTitle:_.colNames[er])+"'":"",ew+="<th id='"+_.id+"_"+ei.name+"' class='"+y("colHeaders","ui-th-column ui-th-"+F+" "+(ei.labelClasses||""))+"'"+ep+">",es=ei.index||ei.name,ei.labelAlign){case"left":eh="text-align:left;";break;case"right":eh="text-align:right;";break;case"likeData":eh=void 0===ei.align||"left"===ei.align?"text-align:left;":"right"===ei.align?"text-align:right;":"";break;default:eh=""}ew+="<div id='jqgh_"+_.id+"_"+ei.name+"'"+(E?" class='ui-th-div-ie'":"")+(""===eh?"":" style='"+eh+"'")+" role='columnheader'>",eg=ei.autoResizable&&"actions"!==ei.formatter||ei.rotated?"<span class='"+_.autoResizing.wrapperClassName+"'>"+_.colNames[er]+"</span>":_.colNames[er],_.sortIconsBeforeText?(ew+=(_.builderSortIcons||jgrid.builderSortIcons).call(a,er),ew+=eg):(ew+=eg,ew+=(_.builderSortIcons||jgrid.builderSortIcons).call(a,er)),ew+="</div></th>",ey+="<td></td>",ei.width=ei.width?parseInt(ei.width,10):150,"boolean"!=typeof ei.title&&(ei.title=!0),ei.lso="",es===_.sortname&&(_.lastsort=er,ei.lso=_.sortorder||ei.firstsortorder||"asc"),_.multiSort&&-1!==(eb=d(es,ev))&&(ei.lso=e$[eb])}ew+="</tr></thead>",ey+="</tr></tbody>";var ej,eD,eR,eq,e8,eS,eG,eO,ek,eF,eI,eE=$("<table class='"+y("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+_.id+"'>"+ew+ey+"</table>");if($(eE[0].tHead).children("tr").children("th").hover(function(){$(this).addClass(ex)},function(){$(this).removeClass(ex)}),_.multiselect&&$(_.cb,eE).on("click",function(){var e,t,r,i=y("states.select"),o=[],l=_.iColByName.cb,n=function(e,t){$(e)[t?"addClass":"removeClass"](i).attr(t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==l&&$(e.cells[l]).children("input.cbox").prop("checked",t)},s=k.fbRows,d=eC+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",c=_._index;if(clearArray(_.selarrrow),this.checked){if(e=!0,_.selrow=1<a.rows.length?a.rows[a.rows.length-1].id:null,_.multiPageSelection&&("local"===_.datatype||_.treeGrid)){if("filtered"===_.selectAllMode&&null!=_.lastSelectedData&&0<_.lastSelectedData.length)for(_.selarrrow=[],r=0;r<_.lastSelectedData.length;r++)_.lastSelectedData[r].hasOwnProperty(_.localReader.id)&&_.selarrrow.push(_.idPrefix+_.lastSelectedData[r][_.localReader.id]);else if(null!=_.data&&0<_.data.length&&null!=c)for(t in c)c.hasOwnProperty(t)&&_.selarrrow.push(_.idPrefix+t)}}else e=!1,_.selrow=null;var u=e?_.selarrrow:o;$(a.rows).each(function(t){hasOneFromClasses(this,d)||(n(this,e),0>$.inArray(this.id,u)&&u.push(this.id),s&&n(s[t],e))}),feedback.call(a,"onSelectAll",e?_.selarrrow:o,e)}),!0===_.autowidth){var eN=Math.floor($(N).innerWidth());_.width=0<eN?eN:"nw"}isNaN(_.width)?isNaN(parseFloat(_.width))||(_.width=parseFloat(_.width)):_.width=Number(_.width),_.widthOrg=_.width,e8=0,eS=jgrid.cell_width?0:O(_.cellLayout,0),eG=0,eO=O(_.scrollOffset,0),ek=!1,eF=0,eI=jgrid.isCellClassHidden,u(_.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),_.grouping&&_.autowidth){var e=d(this.name,_.groupingView.groupField);0<=e&&_.groupingView.groupColumnShow.length>e&&(this.hidden=!_.groupingView.groupColumnShow[e])}this.widthOrg=eD=O(this.width,0),!1!==this.hidden||eI(this.classes)||(e8+=eD+eS,this.fixed?eF+=eD+eS:eG++)}),isNaN(_.width)&&(_.width=e8+(!1!==_.shrinkToFit||isNaN(_.height)?0:eO)),k.width=_.width,_.tblwidth=e8,!1===_.shrinkToFit&&!0===_.forceFit&&(_.forceFit=!1),!0===_.shrinkToFit&&0<eG&&(eR=k.width-eS*eG-eF,isNaN(_.height)||(eR-=eO,ek=!0),e8=0,u(_.colModel,function(e){!1!==this.hidden||eI(this.classes)||this.fixed||(eD=Math.round(eR*this.width/(_.tblwidth-eS*eG-eF)),this.width=eD,e8+=eD,ej=e)}),eq=0,ek?k.width-eF-(e8+eS*eG)!==eO&&(eq=k.width-eF-(e8+eS*eG)-eO):ek||1===Math.abs(k.width-eF-(e8+eS*eG))||(eq=k.width-eF-(e8+eS*eG)),_.colModel[ej].width+=eq,_.tblwidth=e8+eq+eS*eG+eF,_.tblwidth>_.width&&(_.colModel[ej].width-=_.tblwidth-parseInt(_.width,10),_.tblwidth=_.width)),$(N).css("width",k.width+"px"),$(_.rs).on("selectstart",function(){return!1}).click(G).dblclick(function(e){var t=$(this).data("idx"),i=$(this).data("pageX"),l=_.colModel[t];if(null==i||null==l)return!1;var n=String(i).split(";"),s=parseFloat(n[0]),d=parseFloat(n[1]);return 2===n.length&&(5<Math.abs(s-d)||5<Math.abs(e.pageX-s)||5<Math.abs(e.pageX-d))||(feedback.call(a,"resizeDblClick",t,l,e)&&l.autoResizable&&r.autoResizeColumn.call(o,t),feedback.call(a,"afterResizeDblClick",{iCol:t,cm:l,cmName:l.name})),!1}),$(I).css("width",k.width+"px");var eT="";_.footerrow&&(eT+="<table role='presentation' style='width:1px' class='"+y("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+y("rowFooter","footrow footrow-"+F)+"'>");var eA="<tr class='"+y("gridRow","jqgfirstrow ui-row-"+_.direction)+"' role='row' style='height:auto'>";if(_.disableClick=!1,$("th",eE[0].tHead.rows[0]).each(function(e){var t=_.colModel[e],r=t.name,i=$(this),o=i.children("div"),n=o.children("span.s-ico"),s=_.showOneSortIcon;ed=t.width,void 0===t.resizable&&(t.resizable=!0),t.resizable?($(ec=document.createElement("span")).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+F).on("selectstart",function(){return!1}),i.addClass(_.resizeclass)):ec="",i.css("width",ed+"px").prepend(ec);var c="";if(ec=null,!0===t.hidden&&(i.css("display","none"),c="display:none;"),eA+="<td role='gridcell' "+(t.classes?"class='"+t.classes+"' ":"")+"style='height:0;width:"+ed+"px;"+c+"'></td>",k.headers[e]={width:ed,el:this},"boolean"!=typeof(eu=t.sortable)&&(t.sortable=!0,eu=!0),"cb"!==r&&"subgrid"!==r&&"rn"!==r&&eu&&_.viewsortcols[2]&&o.addClass("ui-jqgrid-sortable"),eu){if(_.multiSort){var u="desc"===t.lso?"asc":"desc";_.viewsortcols[0]?(n.css("display",""),t.lso&&(n.children("span.ui-icon-"+t.lso).removeClass(eC),s&&n.children("span.ui-icon-"+u).hide())):t.lso&&(n.css("display",""),n.children("span.ui-icon-"+t.lso).removeClass(eC),s&&n.children("span.ui-icon-"+u).hide()),_.showSortOrder&&(eb=d(r,ev),n["beforeSortIcons"===_.sortOrderPosition?"before":"after"]("<span class='ui-jqgrid-sort-order'>"+(eb<0?"&nbsp;":l(_.formatSortOrder)?_.formatSortOrder.call(a,{cm:this,sortIndex:eb}):eb+1)+"</span>"))}else{var p="desc"===_.sortorder?"asc":"desc";_.viewsortcols[0]?(n.css("display",""),e===_.lastsort&&(n.children("span.ui-icon-"+_.sortorder).removeClass(eC),s&&n.children("span.ui-icon-"+p).hide())):e===_.lastsort&&""!==t.lso&&(n.css("display",""),n.children("span.ui-icon-"+_.sortorder).removeClass(eC),s&&n.children("span.ui-icon-"+p).hide())}}_.footerrow&&(eT+="<td role='gridcell' "+A(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){var t,r,i=$(this),a=i.closest(".ui-jqgrid-hdiv").hasClass("frozen-div");if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length)return null!=(t=et(this))&&(!0===_.forceFit&&(_.nv=function(e){var t,r=e,i=e;for(t=e+1;t<_.colModel.length;t++)if(!0!==_.colModel[t].hidden){i=t;break}return i-r}(t)),k.dragStart(t,e,(r=[i.position().left+i.outerWidth()],"rtl"===_.direction&&(r[0]=_.width-r[0]),r[0]-=a?0:k.bDiv.scrollLeft,r.push($(k.hDiv).position().top),r.push($(k.bDiv).offset().top-$(k.hDiv).offset().top+$(k.bDiv).height()+(k.sDiv?$(k.sDiv).height():0)),r),i)),!1}).click(function(e){if(_.disableClick)return _.disableClick=!1;var t,r,i="th.ui-th-column>div";_.viewsortcols[2]?i+=".ui-jqgrid-sortable":i+=">span.s-ico>span.ui-grid-ico-sort";var o=$(e.target).closest(i);if(1===o.length){_.viewsortcols[2]||(t=!0,r=o.hasClass("ui-icon-desc")?"asc":"desc");var l=et(this);return null!=l&&ee.call(a,$("div",this)[0].id.substring(5+_.id.length+1),l,t,r,this,e),!1}}),_.sortable&&l(r.sortableColumns))try{r.sortableColumns.call(o,$(eE[0].tHead.rows[0]))}catch(eB){}_.footerrow&&(eT+="</tr></tbody></table>"),eA+="</tr>",o.html("<tbody>"+eA+"</tbody>"),o.addClass(y("grid","ui-jqgrid-btable"+(!0===_.altRows&&o.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var ez,eP,eM=!(!_.caption||!0!==_.hiddengrid),eL=$("<div class='ui-jqgrid-hbox"+("rtl"===F?"-rtl":"")+"'></div>"),eV=y("top"),eH=y("bottom");k.hDiv=document.createElement("div"),$(k.hDiv).css({width:k.width+"px"}).addClass(y("hDiv","ui-jqgrid-hdiv")).append(eL).scroll(function(){var e=$(this).next(".ui-jqgrid-bdiv")[0];return e&&(e.scrollLeft=this.scrollLeft),!1}),$(eL).append(eE),eE=null,eM&&$(k.hDiv).hide(),_.rowNum=parseInt(_.rowNum,10),(isNaN(_.rowNum)||_.rowNum<=0)&&(_.rowNum=_.maxRowNum),_.pager&&("string"==typeof _.pager&&"#"!==_.pager.substr(0,1)?(eP=_.pager,ez=$("#"+jqID(_.pager))):!0===_.pager?(eP=randId(),(ez=$("<div id='"+eP+"'></div>")).appendTo("body"),_.pager="#"+jqID(eP)):eP=(ez=$(_.pager)).attr("id"),0<ez.length?(ez.css({width:k.width+"px"}).addClass(y("pager.pager","ui-jqgrid-pager "+eH)).appendTo(N),eM&&ez.hide(),J.call(a,eP,""),_.pager="#"+jqID(eP)):_.pager=""),!1===_.cellEdit&&!0===_.hoverrows&&o.on("mouseover.jqGrid",function(e){ef=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(ef).attr("class")&&$(ef).addClass(e_)}).on("mouseout.jqGrid",function(e){ef=$(e.target).closest("tr.jqgrow"),$(ef).removeClass(e_)});var e0=function(e){var t,r,i;do if(0<(t=$(e).closest("td")).length){if(i=(r=t.parent()).parent().parent(),r.is(".jqgrow")&&(i[0]===this||i.is("table.ui-jqgrid-btable")&&(i[0].id||"").replace("_frozen","")===this.id))break;e=t.parent()}while(0<t.length);return t};o.before(k.hDiv).click(function(e){var t=y("states.select"),i=e.target,l=e0.call(a,i),n=l.parent();if(0!==n.length&&!hasOneFromClasses(n,eC)){var s=n[0].id,d=l[0].cellIndex,c=$(i).hasClass("cbox")&&$(i).is(":enabled")&&!hasOneFromClasses(i,eC),u=feedback.call(a,"beforeSelectRow",s,e),h=!1,f=jgrid.detectRowEditing.call(a,s),g=null!=f&&"cellEditing"!==f.mode;if("A"!==i.tagName&&(!g||c)){if(feedback.call(a,"onCellSelect",s,d,l.html(),e),!0===_.cellEdit){if(u&&_.multiselect&&c){if(p.call(o,s,!0,e),c&&!_.noCellSelection)return;h=!0}try{r.editCell.call(o,n[0].rowIndex,d,!0)}catch(m){}if(!_.multiselect||!_.noCellSelection||_.multiboxonly&&h)return}if(u){if(_.multikey)e[_.multikey]&&!h?p.call(o,s,!0,e):_.multiselect&&c&&(c=$("#jqg_"+jqID(_.id)+"_"+s).is(":checked"),$("#jqg_"+jqID(_.id)+"_"+s).prop("checked",!c));else if(_.multiselect&&_.multiboxonly){if(c&&!h)p.call(o,s,!0,e);else{var v=_.frozenColumns?_.id+"_frozen":"";$(_.selarrrow).each(function(e,i){var a=r.getGridRowById.call(o,i);a&&$(a).removeClass(t),$("#jqg_"+jqID(_.id)+"_"+jqID(i)).prop("checked",!1),v&&($("#"+jqID(i),"#"+jqID(v)).removeClass(t),$("#jqg_"+jqID(_.id)+"_"+jqID(i),"#"+jqID(v)).prop("checked",!1))}),clearArray(_.selarrrow),h||p.call(o,s,!0,e)}}else{var b=_.selrow;h||p.call(o,s,!0,e),"toggle"!==_.singleSelectClickMode||_.multiselect||b!==s||(a.grid.fbRows&&(n=n.add(a.grid.fbRows[n[0].rowIndex]===n[0]?a.rows[n[0].rowIndex]:a.grid.fbRows[n[0].rowIndex])),n.removeClass(t).attr({"aria-selected":"false",tabindex:"-1"}),_.selrow=null)}}else c&&$(i).prop("checked",!1)}}}).on("reloadGrid",function(e,t){var i=this,a=i.grid,o=$(this),l=i.p;if(0<l.savedRow.length&&"prevent"===l.reloadingDuringEditing)return!1;if(!0===l.treeGrid&&(l.datatype=l.treedatatype),t=s({},defaults.reloadGridOptions||{},l.reloadGridOptions||{},t||{}),"local"===l.datatype&&l.dataTypeOrg&&l.loadonce&&t.fromServer&&(l.datatype=l.dataTypeOrg,delete l.dataTypeOrg),t.current&&a.selectionPreserver.call(i),"local"===l.datatype?(l.multiPageSelection||r.resetSelection.call(o),l.data.length&&(M.call(i),L.call(i))):l.treeGrid||l.multiPageSelection||(l.selrow=null,l.multiselect&&(clearArray(l.selarrrow),Q.call(i,!1)),clearArray(l.savedRow),l.editingInfo={}),Z(l.reloadingDuringEditing),l.iRow=-1,l.iCol=-1,l.scroll&&k.emptyRows.call(i,!0,!1),t.page){var n=parseInt(t.page,10);n>l.lastpage&&(n=l.lastpage),n<1&&(n=1),l.page=n,a.prevRowHeight?a.bDiv.scrollTop=(n-1)*a.prevRowHeight*l.rowNum:a.bDiv.scrollTop=0}return a.prevRowHeight&&l.scroll&&void 0===t.page?(delete l.lastpage,a.populateVisible.call(i)):a.populate.call(i),!0===l._inlinenav&&o.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(e){var t=e0.call(a,e.target),r=t.parent();if(0<t.length&&!feedback.call(a,"ondblClickRow",r.attr("id"),r[0].rowIndex,t[0].cellIndex,e))return!1}).on("contextmenu",function(e){var t=e0.call(a,e.target),r=t.parent(),i=r.attr("id");if(0!==t.length)return _.multiselect||_.selrow===i||!0!==_.selectOnContextMenu||p.call(o,i,!0,e),!!feedback.call(a,"onRightClickRow",i,r[0].rowIndex,t[0].cellIndex,e)&&void 0}),k.bDiv=document.createElement("div"),E&&"auto"===String(_.height).toLowerCase()&&(_.height="100%"),$(k.bDiv).append($("<div style='position:relative;'></div>").append("<div></div>").append(a)).addClass("ui-jqgrid-bdiv").css({height:_.height+(isNaN(_.height)?"":"px"),width:k.width+"px"}).scroll(k.scrollGrid),_.maxHeight&&$(k.bDiv).css("max-height",_.maxHeight+(isNaN(_.maxHeight)?"":"px")),o.css({width:"1px"}),$.support.tbody||2===$(">tbody",a).length&&$(">tbody:gt(0)",a).remove(),_.multikey&&$(k.bDiv).on(jgrid.msie?"selectstart":"mousedown",function(){return!1}),eM&&$(k.bDiv).hide(),k.cDiv=document.createElement("div");var eW=w("gridMinimize.visible"),e1=w("gridMinimize.hidden"),eU=C("showhide"),eY=!0===_.hidegrid?$("<a role='link' class='"+y("titleButton","ui-jqgrid-titlebar-close")+"'"+(eU?" title='"+eU+"'":"")+"/>").hover(function(){eY.addClass(e_)},function(){eY.removeClass(e_)}).append("<span class='"+eW+"'></span>"):"";if($(k.cDiv).append("<span class='ui-jqgrid-title'>"+_.caption+"</span>").append(eY).addClass(y("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===F?"-rtl ":" ")+eV)),$(k.cDiv).insertBefore(k.hDiv),_.toolbar[0]){k.uDiv=document.createElement("div"),"top"===_.toolbar[1]?$(k.uDiv).insertBefore(k.hDiv):"bottom"===_.toolbar[1]&&$(k.uDiv).insertAfter(k.hDiv);var e4=y("toolbarUpper","ui-userdata");"both"===_.toolbar[1]?(k.ubDiv=document.createElement("div"),$(k.uDiv).addClass(e4).attr("id","t_"+_.id).insertBefore(k.hDiv),$(k.ubDiv).addClass(y("toolbarBottom","ui-userdata")).attr("id","tb_"+_.id).insertAfter(k.hDiv),eM&&$(k.ubDiv).hide()):$(k.uDiv).width(k.width).addClass(e4).attr("id","t_"+_.id),eM&&$(k.uDiv).hide()}if("string"==typeof _.datatype&&(_.datatype=_.datatype.toLowerCase()),_.toppager?(_.toppager=_.id+"_toppager",k.topDiv=$("<div id='"+_.toppager+"'></div>")[0],$(k.topDiv).addClass(y("pager.pager","ui-jqgrid-toppager"+(_.caption?"":" "+eV))).css({width:k.width+"px"}).insertBefore(k.hDiv),J.call(a,_.toppager,"_t"),_.toppager="#"+jqID(_.toppager)):""!==_.pager||_.scroll||(_.rowNum=_.maxRowNum),_.footerrow&&(k.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],eL=$("<div class='ui-jqgrid-hbox"+("rtl"===F?"-rtl":"")+"'></div>"),$(k.sDiv).append(eL).width(k.width).insertAfter(k.hDiv),$(eL).append(eT),k.footers=$(".ui-jqgrid-ftable",k.sDiv)[0].rows[0].cells,_.rownumbers&&(k.footers[0].className=y("rowNum","jqgrid-rownum")),eM&&$(k.sDiv).hide()),eL=null,_.caption){var eX=_.datatype;!0===_.hidegrid&&($(".ui-jqgrid-titlebar-close",k.cDiv).click(function(e){var t=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",r=this;!0===_.toolbar[0]&&("both"===_.toolbar[1]&&(t+=",#"+jqID($(k.ubDiv).attr("id"))),t+=",#"+jqID($(k.uDiv).attr("id")));var i=$(t,_.gView).length;return _.toppager&&(t+=","+_.toppager),"visible"===_.gridstate?$(t,_.gBox).slideUp("fast",function(){0==--i&&($("span",r).removeClass(eW).addClass(e1),_.gridstate="hidden",$(_.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",_.gBox).hide(),$(k.cDiv).addClass(eH),eM||feedback.call(a,"onHeaderClick",_.gridstate,e))}):"hidden"===_.gridstate&&($(k.cDiv).removeClass(eH),$(t,_.gBox).slideDown("fast",function(){0==--i&&($("span",r).removeClass(e1).addClass(eW),eM&&(_.datatype=eX,X.call(a),eM=!1),_.gridstate="visible",$(_.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",_.gBox).show(),eM||feedback.call(a,"onHeaderClick",_.gridstate,e))})),!1}),eM&&(_.datatype="local",$(".ui-jqgrid-titlebar-close",k.cDiv).trigger("click")))}else $(k.cDiv).hide(),$(k.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");$(k.hDiv).after(k.bDiv),k.eDiv=$("<div class='"+y("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+F)+"' style='display:none;'><span class='"+y("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],$(k.hDiv).after(k.eDiv),$(N).click(G).dblclick(function(e){var t=$(_.rs),i=t.offset(),l=t.data("idx"),n=t.data("delta"),s=_.colModel[l],d=$(this).data("pageX")||t.data("pageX");if(null==d||null==s)return!1;var c=String(d).split(";"),u=parseFloat(c[0]),p=parseFloat(c[1]);return 2===c.length&&(5<Math.abs(u-p)||5<Math.abs(e.pageX-u)||5<Math.abs(e.pageX-p))||(feedback.call(a,"resizeDblClick",l,s)&&i.left-1<=e.pageX+n&&e.pageX+n<=i.left+t.outerWidth()+1&&s.autoResizable&&r.autoResizeColumn.call(o,l),feedback.call(a,"afterResizeDblClick",{iCol:l,cm:s,cmName:s.name})),!1}),_.pager||$(k.cDiv).nextAll("div:visible").filter(":last").addClass(eH),$(".ui-jqgrid-labels",k.hDiv).on("selectstart",function(){return!1}),a.formatCol=A,a.sortData=ee,a.updatepager=function(e,t){var r,i,a,o,l,n,s,d,c=this,u=$(c),p=c.grid,h=_.pager||"",f=_.pager?"_"+_.pager.substr(1):"",g=p.bDiv,m=$.fmatter?$.fmatter.NumberFormat:null,v=_.toppager?"_"+_.toppager.substr(1):"",b=y("states.hover"),w=y("states.disabled");if((a=parseInt(_.page,10)-1)<0&&(a=0),l=(a*=parseInt(_.rowNum,10))+_.reccount,_.scroll){var j=$(getGridComponent(COMPONENT_NAMES.BODY_TABLE,g)[0].rows).slice(1);a=l-j.length,_.reccount=j.length;var D=j.outerHeight()||p.prevRowHeight;if(D){var R=a*D,q=jgrid.fixMaxHeightOfDiv.call(c,parseInt(_.records,10)*D);$(g).children("div").first().css({height:q+"px"}).children("div").first().css({height:R+"px",display:""}),0===g.scrollTop&&1<_.page&&(g.scrollTop=_.rowNum*(_.page-1)*D)}g.scrollLeft=p.hDiv.scrollLeft}if(h+=_.toppager?(h?",":"")+_.toppager:""){if(s=x("formatter.integer")||{},r=O(_.page),i=O(_.lastpage),$(".selbox",h).prop("disabled",!1),!0===_.pginput){var S=$(".ui-pg-input",h),G=String(_.page).length;S.val(_.page),S.each(function(){var e=parseInt($(this).attr("size"),10);0<e&&e<G&&$(this).attr("size",G)}),$(d=_.toppager?"#sp_1"+f+",#sp_1"+v:"#sp_1"+f).html($.fmatter?m(_.lastpage,s):_.lastpage).closest(".ui-pg-table").each(function(){W.call(c,$(this))})}_.viewrecords&&(0===_.reccount?$(".ui-paging-info",h).html(C("emptyrecords")):(o=a+1,n=_.records,$.fmatter&&(o=m(o,s),l=m(l,s),n=m(n,s)),$(".ui-paging-info",h).html(jgrid.format(C("recordtext"),o,l,n)))),!0===_.pgbuttons&&(i<=0&&(r=0),r<=0&&(r=i=0),1===r||0===r?($("#first"+f+", #prev"+f).addClass(w).removeClass(b),_.toppager&&$("#first_t"+v+", #prev_t"+v).addClass(w).removeClass(b)):($("#first"+f+", #prev"+f).removeClass(w),_.toppager&&$("#first_t"+v+", #prev_t"+v).removeClass(w)),r===i||0===r?($("#next"+f+", #last"+f).addClass(w).removeClass(b),_.toppager&&$("#next_t"+v+", #last_t"+v).addClass(w).removeClass(b)):($("#next"+f+", #last"+f).removeClass(w),_.toppager&&$("#next_t"+v+", #last_t"+v).removeClass(w)))}!0===e&&!0===_.rownumbers&&$(">td.jqgrid-rownum",c.rows).each(function(e){$(this).html(a+1+e)}),t&&_.jqgdnd&&u.jqGrid("gridDnD","updateDnD"),feedback.call(c,"gridComplete"),u.triggerHandler("jqGridAfterGridComplete")},a.refreshIndex=L,a.addItemDataToColumnIndex=P,a.removeItemDataFromColumnIndex=function(e){var t,r,i,a=_.dataIndexById[e];if(null!=a){for(t in a)if(a.hasOwnProperty(t))for(i in r=a[t])r.hasOwnProperty(i)&&(delete _.indexByColumnData[t][i][e],$.isEmptyObject(_.indexByColumnData[t][i])&&delete _.indexByColumnData[t][i]);delete _.dataIndexById[e]}},a.generateValueFromColumnIndex=function(e,t,r){var i,a,o=$(this).jqGrid("getUniqueValueFromColumnIndex",e),l="";if(null!=o)for(r=r||";",t=t||":",i=0,a=o.length;i<a;i++)""!==l&&(l+=r||";"),l+=o[i]+(t||":")+o[i];return l},a.setHeadCheckBox=Q,a.fixScrollOffsetAndhBoxPadding=j,a.constructTr=function(e,t,i,a,o,n){var s,d="-1",c="",u=t?"display:none;":"",p=y("gridRow","jqgrow ui-row-"+_.direction)+(i?" "+i:"")+(n?" "+y("states.select"):""),h=$(this).triggerHandler("jqGridRowAttr",[a,o,e]);if("object"!=typeof h&&(h=l(_.rowattr)?_.rowattr.call(this,a,o,e):"string"==typeof _.rowattr&&null!=jgrid.rowattr&&l(jgrid.rowattr[_.rowattr])?jgrid.rowattr[_.rowattr].call(this,a,o,e):{}),null!=h&&!$.isEmptyObject(h)){h.hasOwnProperty("id")&&(e=h.id,delete h.id),h.hasOwnProperty("tabindex")&&(d=h.tabindex,delete h.tabindex),h.hasOwnProperty("style")&&(u+=h.style,delete h.style),h.hasOwnProperty("class")&&(p+=" "+h.class,delete h.class);try{delete h.role}catch(f){}for(s in h)h.hasOwnProperty(s)&&(c+=" "+s+"="+h[s])}if(_.treeGrid&&parseInt(a[_.treeReader.level_field],10)!==parseInt(_.tree_root_level,10)){var g=r.getNodeParent.call($(this),a);!g||!g.hasOwnProperty(_.treeReader.expanded_field)||g[_.treeReader.expanded_field]||t||(u+="display:none;")}return"<tr role='row' id='"+e+"' tabindex='"+d+"' class='"+p+"'"+(""===u?"":" style='"+u+"'")+c+">"},a.formatter=function(e,t,r,i,o,n){var s,d,c=_.colModel[r];if(void 0!==c.formatter){var u={rowId:e=""!==String(_.idPrefix)?(d=e,stripPref(_.idPrefix,d)):e,colModel:c,gid:_.id,pos:r,rowData:n||i};s=l(c.cellBuilder)?c.cellBuilder.call(a,t,u,i,o):l(c.formatter)?c.formatter.call(a,t,u,i,o):$.fmatter?$.fn.fmatter.call(a,c.formatter,t,u,i,o):B(t)}else s=B(t);if(s=c.autoResizable&&"actions"!==c.formatter?"<span class='"+_.autoResizing.wrapperClassName+"'>"+s+"</span>":s,_.treeGrid&&"edit"!==o&&(null==_.ExpandColumn&&0===r||_.ExpandColumn===c.name)){null==n&&(n=_.data[_._index[e]]);var p=parseInt(n[_.treeReader.level_field]||0,10),h=0===parseInt(_.tree_root_level,10)?p:p-1,f=n[_.treeReader.leaf_field],g=n[_.treeReader.expanded_field],m=n[_.treeReader.icon_field],v=f?(null!=m&&""!==m?m:_.treeIcons.leaf)+" tree-leaf":g?_.treeIcons.minus+" tree-minus":_.treeIcons.plus+" tree-plus";if(!f&&m&&"string"==typeof m){var b=m.split(",");2===b.length&&(v=g?b[0]:b[1])}s="<div class='tree-wrap' style='width:"+18*(h+1)+"px;'><div class='"+mergeCssClasses(_.treeIcons.commonIconClass,v,"treeclick")+"' style='"+(!0===_.ExpandColClick?"cursor:pointer;":"")+("rtl"===_.direction?"margin-right:":"margin-left:")+18*h+"px;'></div></div><span class='cell-wrapper"+(f?"leaf":"")+"'"+(_.ExpandColClick?" style='cursor:pointer;'":"")+">"+s+"</span>"}return s},s(k,{populate:X,emptyRows:function(e,t){var r=k.bDiv,i=null!=k.fbDiv?k.fbDiv.children(".ui-jqgrid-btable")[0]:null,a=function(e){if(e){var t=e.rows,r=t[0];if(_.deepempty)t&&$(t).slice(1).remove();else if(_.quickEmpty){if("quickest"===_.quickEmpty)e.replaceChild(document.createElement("tbody"),e.tBodies[0]),e.firstChild.appendChild(r);else for(;1<t.length;)e.deleteRow(t.length-1)}else $(e.firstChild).empty().append(r)}};$(this).off(".jqGridFormatter"),a(this),a(i),e&&_.scroll&&($(r.firstChild).css({height:"auto"}),$(r.firstChild.firstChild).css({height:0,display:"none"}),0!==r.scrollTop&&(r.scrollTop=0)),!0===t&&_.treeGrid&&(clearArray(_.data),clearArray(_.lastSelectedData),_._index={},_.dataIndexById={},_.indexByColumnData={}),_.rowIndexes={},_.iRow=-1,_.iCol=-1},beginReq:U,endReq:Y}),a.addXmlData=H,a.addJSONData=H,a.rebuildRowIndexes=S,a.grid.cols=a.rows[0].cells,feedback.call(a,"onInitGrid"),_.treeGrid&&"local"===_.datatype&&null!=_.data&&0<_.data.length&&(_.datatype="jsonstring",_.datastr=_.data,_.data=[]),X.call(a),_.hiddengrid=!1}else f(x("errors.model"))}}else f("Element is not a table!")}})};var base=$.fn.jqGrid;jgrid.extend({getGridRes:function(e){var t=this[0];if(!t||!t.grid||!t.p)return null;var r=jgrid.getRes(locales[t.p.locale],e)||jgrid.getRes(locales["en-US"],e),i=jgrid.getRes(jgrid,e);return"object"!=typeof r||null===r||$.isArray(r)?void 0!==i?i:r:$.extend(!0,{},r,i||{})},getGuiStyles:function(e,t){var r=this instanceof $&&0<this.length?this[0]:this;if(!r||!r.grid||!r.p)return"";var i,a=r.p.guiStyle||jgrid.defaults.guiStyle||"jQueryUI",o=jgrid.getRes(jgrid.guiStyles[a],e);return void 0===o&&"string"==typeof(i=jgrid.getRes(jgrid.guiStyles[a],"baseGuiStyle"))&&(o=jgrid.getRes(jgrid.guiStyles[i],e)),jgrid.mergeCssClasses(o||"",t||"")},isBootstrapGuiStyle:function(){return 0<=$.inArray("ui-jqgrid-bootstrap",$(this).jqGrid("getGuiStyles","gBox").split(" "))},displayErrorMessage:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(t&&t.grid&&t.p&&e){var r=$(t.grid.eDiv),i=r.children(".ui-jqgrid-error");i.html(e),r.show(),t.p.errorDisplayTimeout&&setTimeout(function(){i.empty(),r.hide()},t.p.errorDisplayTimeout)}},getIconRes:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(!t||!t.p)return"";var r=t.p,i=jgrid.icons[r.iconSet],a=function(e,t,r){var i,a,o,l=t.split("."),n=l.length,s=[];if(null==(e="string"==typeof e?jgrid.icons[e]:e))return"";for((i=e).common?s.push(i.common):r&&r.common&&s.push(r.common),o=0;o<n&&(a=l[o]);o++){if(o+1===n&&i.ignoreParents&&(s=[]),void 0===(i=i[a])){if("common"===a)break;return""}if("string"==typeof i){s.push(i);break}null!=i&&i.common&&s.push(i.common)}return jgrid.mergeCssClasses.apply(this,s)};if(null==i)return"";var o=a(r.iconSet,e);return""===o&&null!=i.baseIconSet&&(o=a(i.baseIconSet,e,jgrid.icons[r.iconSet])),o||""},isInCommonIconClass:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(!t||!t.p)return"";var r=t.p,i=jgrid.icons[r.iconSet];if(null==i)return!1;var a=i.common;if(void 0===a){if(null==i.baseIconSet||null==(i=jgrid.icons[i.baseIconSet]))return!1;a=i.common}return"string"==typeof a&&0<=$.inArray(e,a.split(" "))},getUniqueValueFromColumnIndex:function(e){var t=this[0];if(!t||!t.grid)return null;var r,i=[],a="",o=t.p.indexByColumnData[e];if(null!=o){for(a in o)if(o.hasOwnProperty(a)){for(r in o[a])if(o[a].hasOwnProperty(r)){a=String(o[a][r]);break}i.push(a)}t.p.ignoreCase?void 0===String.prototype.localeCompare?i.sort(function(e,t){var r=e.toLowerCase(),i=t.toLowerCase();return r===i?0:i<r?1:-1}):i.sort(function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())}):i.sort()}return i},generateDatalistFromColumnIndex:function(e){if(!this[0]||!this[0].grid)return null;var t,r,i=this.jqGrid("getUniqueValueFromColumnIndex",e),a=$("<datalist></datalist>");if(!(null!=i&&0<i.length))return $();for(t=0,r=i.length;t<r;t++)a.append($("<option></option>").attr("value",i[t]));return a},getGridParam:function(e){var t=this[0];return t&&t.grid?e?void 0!==t.p[e]?t.p[e]:null:t.p:null},setGridParam:function(e,t){return this.each(function(){null==t&&(t=!1),this.grid&&"object"==typeof e&&(!0===t?$.extend(this.p,e):$.extend(!0,this.p,e))})},abortAjaxRequest:function(){return this.each(function(){null!=this.p.jqXhr&&this.p.jqXhr.abort(),this.grid.endReq.call(this)})},getGridRowById:function(e){if(null==e)return null;var t,r=e.toString();return this.each(function(){var i,a,o=this.rows;if(null!=this.p.rowIndexes&&(a=o[this.p.rowIndexes[r]])&&a.id===r&&(t=a),!t)try{for(i=o.length;i--;)if(a=o[i],r===a.id){t=a;break}}catch(l){t=0<(t=$(this.grid.bDiv).find("#"+jqID(e))).length?t[0]:null}}),t},getDataIDs:function(){var e=[];return this.each(function(){var t,r,i=this.rows,a=i.length;if(a&&0<a)for(t=0;t<a;t++)$(r=i[t]).hasClass("jqgrow")&&e.push(r.id)}),e},setSelection:function(e,t,r){return this.each(function(){var i,a,o,l,n,s,d,c,u,p,h,f,g,m,v=this,b=$(v),w=v.p,y=base.getGuiStyles,_=base.getGridRowById,x=y.call(b,"states.select"),C=y.call(b,"states.disabled"),j=v.grid.fbRows,D=function(e,t){var r=t?"addClass":"removeClass",i=w.iColByName.cb,a=t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},o=function(e){$(e)[r](x).attr(a),void 0!==i&&$(e.cells[i]).children("input.cbox").prop("checked",t)};o(e),j&&o(j[e.rowIndex])};void 0!==e&&(t=!1!==t,null!=r&&0<(d=$(r.target).closest("tr.jqgrow")).length&&(a=d[0],j&&(a=v.rows[a.rowIndex])),null==a&&(a=_.call(b,e)),!a||!a.className||-1<a.className.indexOf(C)||(!0===w.scrollrows&&null!=(o=_.call(b,e))&&0<=(o=o.rowIndex)&&(u=v.rows[o],h=(p=v.grid.bDiv).clientHeight,f=p.scrollTop,g=$(u).position().top,h+f<=g+(m=u.clientHeight)?p.scrollTop=g-(h+f)+m+f:g<h+f&&g<f&&(p.scrollTop=g)),w.multiselect?(v.setHeadCheckBox(!1),w.selrow=a.id,c=jgrid.detectRowEditing.call(v,a.id),-1===(l=$.inArray(w.selrow,w.selarrrow))?(i=!0,w.selarrrow.push(w.selrow)):null===c||"inlineEditing"!==c.mode&&$(r.target).hasClass("cbox")?(i=!1,w.selarrrow.splice(l,1),n=w.selarrrow[0],w.selrow=void 0===n?null:n):i=!0,"ui-subgrid"!==a.className&&D(a,i),t&&feedback.call(v,"onSelectRow",a.id,i,r||{})):"ui-subgrid"!==a.className&&(w.selrow!==a.id?(null!==w.selrow&&(s=_.call(b,w.selrow))&&D(s,!1),D(a,!0),i=!0):i=!1,w.selrow=a.id,t&&feedback.call(v,"onSelectRow",a.id,i,r||{}))))})},resetSelection:function(e){return this.each(function(){var t,r=this,i=$(this),a=r.p,o=base.getGuiStyles,l=base.getGridRowById,n=o.call(i,"states.select"),s="edit-cell "+n,d="selected-row "+o.call(i,"states.hover"),c=a.iColByName.cb,u=void 0!==c,p=r.grid.fbRows,h=function(e){var t,r="removeClass",i={"aria-selected":"false",tabindex:"-1"};$(e)[r](n).attr(i),u&&$(e.cells[c]).children("input.cbox").prop("checked",!1),p&&($(t=p[e.rowIndex])[r](n).attr(i),u&&$(t.cells[c]).children("input.cbox").prop("checked",!1))};if(void 0!==e){if(t=l.call(i,e),h(t),u){r.setHeadCheckBox(!1);var f=$.inArray(e,a.selarrrow);-1!==f&&a.selarrrow.splice(f,1)}}else a.multiselect?($(r.rows).each(function(){var e=$.inArray(this.id,a.selarrrow);-1!==e&&(h(this),a.selarrrow.splice(e,1))}),r.setHeadCheckBox(!1),a.multiPageSelection||clearArray(a.selarrrow),a.selrow=null):a.selrow&&(t=l.call(i,a.selrow),h(t),a.selrow=null);!0===a.cellEdit&&0<=parseInt(a.iCol,10)&&0<=parseInt(a.iRow,10)&&(null!=(t=r.rows[a.iRow])&&($(t.cells[a.iCol]).removeClass(s),$(t).removeClass(d)),p&&null!=(t=p[a.iRow])&&($(t.cells[a.iCol]).removeClass(s),$(t).removeClass(d)))})},isCellEditing:function(e,t,r){var i=this[0],a=jgrid.detectRowEditing.call(i,e);if(null!=a&&("inlineEditing"===a.mode||"cellEditing"===a.mode&&a.savedRow.ic===t)){t=isNaN(t)?i.p.iColByName[t]:parseInt(t,10);var o=null!=r&&r.id===e?r:base.getGridRowById.call($(i),e),l=i.p.colModel[t],n=l.editable;if($.isFunction(n)&&(n=n.call(i,{rowid:e,id:stripPref(i.p.idPrefix,e),iCol:t,iRow:o.rowIndex,cmName:l.name,cm:l,mode:a.mode,td:o.cells[t],tr:o,dataElement:jgrid.getDataFieldOfCell.call(i,o,t)[0]})),!0===n)return!0}return!1},getRowData:function(e,t){var r,i={};return"object"==typeof e&&(t=e,e=void 0),t=t||{},this.each(function(){var a,o,l,n,s,d,c,u=this,p=u.p,h=!1,f=1,g=u.rows;if(void 0===e)h=!0,r=[],f=g.length;else if(!(a=base.getGridRowById.call($(u),e)))return i;for(o=0;o<f;o++)if(h&&(a=g[o]),$(a).hasClass("jqgrow")){for(jgrid.detectRowEditing.call(u,e),n=$(a).find("td[role=gridcell]"),l=0;l<n.length;l++)if(d=(s=p.colModel[l]).name,0>$.inArray(d,p.reservedColumnNames)&&"actions"!==s.formatter&&(!t.skipHidden||!s.hidden)){if(c=n[l],base.isCellEditing.call($(u),e,l,a))i[d]=jgrid.getEditedValue.call(u,jgrid.getDataFieldOfCell.call(u,a,l),s,{},s.editable);else if(!0===p.treeGrid&&d===p.ExpandColumn)i[d]=htmlDecode($("span",c).first().html());else try{i[d]=$.unformat.call(u,c,{rowId:e,colModel:s},l)}catch(m){i[d]=htmlDecode($(c).html())}}t.includeId&&(!1===p.keyName||null==i[p.keyName])&&(i[p.prmNames.id]=stripPref(p.idPrefix,a.id)),h&&(r.push(i),i={})}}),r||i},delRowData:function(e){var t=!1;return this.each(function(){var r,i,a,o=this,l=o.p,n=$.jgrid.detectRowEditing.call(o,e);if(!(r=base.getGridRowById.call($(o),e)))return!1;if(l.subGrid&&(a=$(r).next()).hasClass("ui-subgrid")&&a.remove(),null!=n)try{"inlineEditing"===n.mode&&null!=base.restoreRow?base.restoreRow.call($(o),e):"cellEditing"===n.mode&&null!=base.restoreCell&&base.restoreCell.call($(o),n.savedRow.id,n.savedRow.ic)}catch(s){}if(r.rowIndex===l.iRow&&(l.iRow=-1,l.iCol=-1),$(r).remove(),l.records--,l.reccount--,o.updatepager(!0,!1),t=!0,l.multiselect&&-1!==(i=$.inArray(e,l.selarrrow))&&l.selarrrow.splice(i,1),l.multiselect&&0<l.selarrrow.length?l.selrow=l.selarrrow[l.selarrrow.length-1]:l.selrow===e&&(l.selrow=null),"local"===l.datatype){var d=stripPref(l.idPrefix,e),c=l._index[d];void 0!==c&&(o.removeItemDataFromColumnIndex(d),l.data.splice(c,1),o.refreshIndex())}if(o.rebuildRowIndexes(),!0===l.altRows&&t&&!$(o).jqGrid("isBootstrapGuiStyle")){var u=l.altclass,p=o.grid.fbRows;$(o.rows).each(function(e){var t=$(this);p&&(t=t.add(p[this.rowIndex])),t[e%2==0?"addClass":"removeClass"](u)})}feedback.call(o,"afterDelRow",e)}),t},setRowData:function(e,t,r){var i=!0;return this.each(function(){var a,o=this,l=o.p,n=typeof r,s={};if(!o.grid||!(a=base.getGridRowById.call($(o),e)))return!1;if(t)try{var d,c=stripPref(l.idPrefix,e),u=l._index[c],p={},h=null!=u?l.data[u]:void 0;if($(l.colModel).each(function(e){var r=this,i=r.name,a=getAccessor(t,i);void 0!==a&&("local"===l.datatype&&null!=h&&(a=convertOnSaveLocally.call(o,a,r,h[i],c,h,e),$.isFunction(r.saveLocally)?r.saveLocally.call(o,{newValue:a,newItem:s,oldItem:h,id:c,cm:r,cmName:i,iCol:e}):s[i]=a),p[i]=a)}),$(l.colModel).each(function(r){var i,n=this.name,d=getAccessor(t,n),c=$(a.cells[r]);if(void 0!==d){"local"===l.datatype&&null!=h&&(d=s[n]),i=this.title?{title:d}:{},d=o.formatter(e,d,r,t,"edit",p),"select"===this.formatter&&(i=this.title?{title:stripHtml(d)}:{});var u=c;!0===l.treeGrid&&n===l.ExpandColumn&&(u=u.children("span.cell-wrapperleaf,span.cell-wrapper").first()),u.html(d),c.attr(i),l.frozenColumns&&(u=$(o.grid.fbRows[a.rowIndex].cells[r]),!0===l.treeGrid&&n===l.ExpandColumn&&(u=u.children("span.cell-wrapperleaf,span.cell-wrapper").first()),u.html(d).attr(i))}}),"local"===l.datatype){if(l.treeGrid)for(d in l.treeReader)l.treeReader.hasOwnProperty(d)&&delete s[l.treeReader[d]];void 0!==h&&(l.data[u]=$.extend(!0,h,s),o.removeItemDataFromColumnIndex(c),o.addItemDataToColumnIndex(l.data[u],c))}feedback.call(o,"afterSetRow",{rowid:e,inputData:t,iData:u,iRow:a.rowIndex,tr:a,localData:s,cssProp:r})}catch(f){i=!1}i&&("string"===n?$(a).addClass(r):null!==r&&"object"===n&&$(a).css(r))}),i},changeRowid:function(e,t){return this.each(function(){var r,i,a,o,l,n,s,d=this,c=$(d),u=d.p;if(d.grid&&u&&e!==t&&(o=c.jqGrid("getGridRowById",e))&&null==c.jqGrid("getGridRowById",t)){var p=jgrid.stripPref(u.idPrefix,e),h=jgrid.stripPref(u.idPrefix,t),f=!1===u.keyName?u.prmNames.id:u.keyName,g=function(){var e=this.id,t=e.length-p.length;0<t&&e.substr(t)===p&&$(this).attr("id",e.substr(0,t)+h)};for(0<=u.iColByName[f]&&c.jqGrid("setCell",e,f,h),"local"===u.datatype&&void 0!==u._index[p]&&(u._index[h]=u._index[p],r=u.data[u._index[p]],delete u._index[p],r.hasOwnProperty(f)&&(r[f]=h)),u.rowIndexes[t]=o.rowIndex,delete u.rowIndexes[e],(l=null==d.grid.fbRows?$(o):$(o).add(d.grid.fbRows[o.rowIndex])).attr("id",t),u.selrow===e&&(u.selrow=t),$.isArray(u.selarrrow)&&0<=(i=$.inArray(e,u.selarrrow))&&(u.selarrrow[i]=t),u.multiselect&&(a="jqg_"+u.id+"_"+t,l.find("input.cbox").attr("id",a).attr("name",a)),i=0;i<u.colModel.length;i++)"actions"===(n=u.colModel[i]).formatter?l.find(".ui-jqgrid-actions .ui-pg-div").each(g):("showlink"===n.formatter||null!=n.unformat&&null!=n.formatter)&&(s=c.jqGrid("getCell",t,i),c.jqGrid("setCell",t,i,s,!1,!1,!0));feedback.call(d,"afterChangeRowid",{rowid:t,oldRowid:e,iRow:o.rowIndex,tr:o})}})},addRowData:function(e,t,r,i){0>$.inArray(r,["first","last","before","after","afterSelected","beforeSelected"])&&(r="last");var a,o,l,n,s,d,c,u,p,h,f,g=!1;return t&&($.isArray(t)?(d=!0,c=e):d=(t=[t],!1),this.each(function(){var m,v,b=this,w=b.p,y=t.length,_=$(b),x=b.rows,C=0,j=base.getGridRowById,D=w.colModel,R=w.additionalProperties;for(d||(void 0!==e?e=String(e):(e=randId(),!1!==w.keyName&&(c=w.keyName,void 0!==t[0][c]&&(e=t[0][c])))),u=w.altclass;C<y;){if(p=t[C],o=[],d)try{void 0===(e=p[c])&&(e=randId())}catch(q){e=randId()}for(f=jgrid.stripPref(w.idPrefix,e),m={},n=0;n<D.length;n++)"rn"!==(a=(h=D[n]).name)&&"cb"!==a&&"subgrid"!==a&&(s=convertOnSaveLocally.call(b,p[a],h,void 0,f,{},n),$.isFunction(h.saveLocally)?h.saveLocally.call(b,{newValue:s,newItem:m,oldItem:{},id:f,rowid:e,cm:h,cmName:a,iCol:n}):void 0!==s&&(m[a]=s));for(n=0;n<R.length;n++)"object"==typeof(a=R[n])&&a.hasOwnProperty("name")&&(a=a.name),void 0!==(s=getAccessor(p,a))&&(m[a]=s);if("local"===w.datatype&&(m[w.localReader.id]=f,w._index[f]=w.data.length,w.data.push(m),b.addItemDataToColumnIndex(m,f)),v=w.grouping,w.grouping=!1,o=jgrid.parseDataToHtml.call(b,1,[e],[p]),w.grouping=v,o=o.join(""),0===x.length)$(b.tBodies[0]).append(o);else switch("afterSelected"!==r&&"beforeSelected"!==r||(void 0===i&&null!==w.selrow?(i=w.selrow,r="afterSelected"===r?"after":"before"):r="afterSelected"===r?"last":"first"),r){case"last":$(x[x.length-1]).after(o),l=x.length-1;break;case"first":$(x[0]).after(o),l=1;break;case"after":(l=j.call(_,i))&&($(x[l.rowIndex+1]).hasClass("ui-subgrid")?($(x[l.rowIndex+1]).after(o),l=l.rowIndex+2):($(l).after(o),l=l.rowIndex+1));break;case"before":(l=j.call(_,i))&&($(l).before(o),l=l.rowIndex-1)}!0===w.subGrid&&base.addSubGrid.call(_,w.iColByName.subgrid,l),w.records++,w.reccount++,0===w.lastpage&&(w.lastpage=1),feedback.call(b,"afterAddRow",{rowid:e,inputData:t,position:r,srcRowid:i,iRow:l,tr:x[l],localData:m,iData:w.data.length-1}),C++}!0!==w.altRows||d||_.jqGrid("isBootstrapGuiStyle")||("last"===r?(x.length-1)%2==0&&$(x[x.length-1]).addClass(u):$(x).each(function(e){e%2==1?$(this).addClass(u):$(this).removeClass(u)})),b.rebuildRowIndexes(),b.updatepager(!0,!0),g=!0})),g},footerData:function(e,t,r){var i=!1,a={};return null==e&&(e="get"),"boolean"!=typeof r&&(r=!0),e=e.toLowerCase(),this.each(function(){var o,l,n,s,d=this,c=d.p;if(!d.grid||!c.footerrow||"set"===e&&function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(t))return!1;i=!0;var u=$(d.grid.sDiv).children(".ui-jqgrid-hbox"+("rtl"===c.direction?"-rtl":"")).children(".ui-jqgrid-ftable")[0];if(null==u||null==u.rows)return!1;var p=u.rows[0].cells,h=c.colModel,f=null==d.grid.fsDiv?{}:d.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if("get"===e)for(s=0;s<h.length;s++)n=h[s].name,0>$.inArray(n,c.reservedColumnNames)&&(!1!==t?(o=$(p[s]).text(),$.trim(o)&&(a[n]=o)):a[n]=$(p[s]).html());else if("set"===e)for(n in t)s=c.iColByName[n],t.hasOwnProperty(n)&&void 0!==s&&(o=r?d.formatter("",t[n],s,t,"edit"):t[n],(l=$(p[s]).add(f[s])).html(o),h[s].title&&l.attr({title:stripHtml(o)}))}),"get"===e?a:i},resetColumnResizerHeight:function(){return this.each(function(){if($.jgrid.msie){var e,t,r,i,a=this.grid.headers;for(r=0;r<a.length;r++)(i=(e=$(a[r].el)).height())&&0<(t=e.children(".ui-jqgrid-resize")).length&&.5<Math.abs(i-t.height())&&e.children(".ui-jqgrid-resize").height(i)}})},rotateColumnHeaders:function(e,t){return this.each(function(){var r,i,a,o,l,n,s,d,c,u,p,h,f,g,m,v,b=$(this),w=this.p,y=w.frozenColumns&&$.isFunction(base.getNumberOfFrozenColumns)?b.jqGrid("getNumberOfFrozenColumns"):0;for($.isArray(e)||(e=[e]),r=0;r<e.length;r++)0<=(i=isNaN(n=e[r])?w.iColByName[n]:parseInt(n,10))&&(a=this.grid.headers[i].el,d=(s=(o=i<y?$(a).add($(this.grid.fhDiv.find("#"+jqID(a.id)))):$(a)).children("div")).children("span.s-ico"),u=s.children("span.ui-jqgrid-sort-order"),(c=s.children("span."+w.autoResizing.wrapperClassName)).length<1&&(d.detach(),u.detach(),s.wrapInner("<span class='"+w.autoResizing.wrapperClassName+"'></span>"),c=s.children("span."+w.autoResizing.wrapperClassName),s.each(function(e){e<d.length&&$(this).append(d[e]),e<u.length&&$(this).append(u[e])})),p=d.outerWidth(!0),h=c.outerWidth(),m=parseFloat(o.css("padding-top")||0),v=parseFloat(o.css("padding-bottom")||0),f=parseFloat(o.css("padding-left")||0),g=parseFloat(o.css("padding-right")||0),w.showSortOrder&&(p+=.5*p),l=void 0===t||0===t?h+p+f+g:t,o.height(l),o.css({paddingTop:g+"px",paddingBottom:f+"px",paddingLeft:m+"px",paddingRight:v+"px"}),s.css("min-width",l-f-g+"px").addClass("ui-jqgrid-rotate").css({bottom:0}),w.colModel[i].rotated=!0);b.jqGrid("resetColumnResizerHeight"),w.frozenColumns&&setTimeout(function(){b.triggerHandler("jqGridResetFrozenHeights",{header:{resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:-1,iRowEnd:-1}}})},0)})},showHideCol:function(e,t,r){return this.each(function(){var i,a=this,o=$(a),l=a.grid,n=!1,s=a.p,d=jgrid.cell_width?0:s.cellLayout;if(l){"string"==typeof e&&(e=[e]),r=r||{};var c=""==(t="none"!==t&&!1!==t?"":"none"),u=s.groupHeader,p=u&&("object"==typeof u||$.isFunction(u));if(p&&!r.skipSetGroupHeaders&&base.destroyGroupHeader.call(o,!1),$(s.colModel).each(function(o){var u=function(e){var r,i,a,l,n,d,u,p,h,f,g,m,v,b,w;for(r=0,i=e.length;r<i;r++)l=(a=e[r]).cells[o],(!$(a).hasClass("jqgroup")||null!=l&&1===l.colSpan)&&(n=$(l),0===r&&$(a).hasClass("jqgfirstrow")?(n.css("height","1px"),n.css("display",t),n.css("height","0")):n.css("display",t),c&&null!=l&&"TH"===l.tagName.toUpperCase()&&n.hasClass("ui-th-column")&&(d=n.children("div")).hasClass("ui-jqgrid-rotate")&&(u=d.children("span.s-ico"),(p=d.children("span."+s.autoResizing.wrapperClassName)).outerHeight(),h=p.outerWidth(),u.outerHeight(),f=u.outerWidth(!0),0<p.length&&(m=parseFloat(n.css("padding-top")||0),v=parseFloat(n.css("padding-bottom")||0),b=parseFloat(n.css("padding-left")||0),w=parseFloat(n.css("padding-right")||0),s.showSortOrder&&(f+=.5*f),g=h+f+b+w,n.height(g),n.css({paddingTop:w+"px",paddingBottom:b+"px",paddingLeft:m+"px",paddingRight:v+"px"}),d.css("min-width",g-b-w+"px").css({bottom:0}))))};if(-1!==$.inArray(this.name,e)&&this.hidden===c){if(!0===s.frozenColumns&&!0===this.frozen&&!r.notSkipFrozen)return!0;u($(l.hDiv).find(".ui-jqgrid-htable>thead>tr")),!0===s.frozenColumns&&null!=l.fhDiv&&u($(l.fhDiv).find(".ui-jqgrid-htable>thead>tr")),u(a.rows),!0===s.frozenColumns&&null!=l.fbRows&&u(a.rows),s.footerrow&&(u($(l.sDiv).find("tr.footrow")),!0===s.frozenColumns&&null!=l.fsDiv&&u($(l.fsDiv).find("tr.footrow"))),i=parseInt(this.width,10),"none"===t?s.tblwidth-=i+d:s.tblwidth+=i+d,this.hidden=!c,n=!0,r.skipFeedback?(r.toReport=r.toReport||{},r.toReport[this.name]=c):feedback.call(a,"onShowHideCol",c,this.name,o,r)}}),!0===n){var h=s.autowidth||void 0!==s.widthOrg&&"auto"!==s.widthOrg&&"100%"!==s.widthOrg?s.width:s.tblwidth+parseInt(s.scrollOffset,10);r.skipSetGridWidth?r.newGridWidth=h:base.setGridWidth.call(o,h)}if(p&&!r.skipSetGroupHeaders){if(null!=s.pivotOptions&&null!=s.pivotOptions.colHeaders&&1<s.pivotOptions.colHeaders.length){var f,g=s.pivotOptions.colHeaders;for(f=0;f<g.length;f++)g[f]&&g[f].groupHeaders.length&&base.setGroupHeaders.call(o,g[f])}else base.setGroupHeaders.call(o,s.groupHeader)}}})},hideCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"none",t)})},showCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"",t)})},remapColumns:function(e,t,r){var i,a,o,l,n=this[0],s=n.p,d=n.grid,c=$.makeArray,u=!0===s.frozenColumns,p=this.jqGrid("getNumberOfFrozenColumns");function h(e){var t=e.length?c(e):$.extend({},e);$.each(l,function(r){e[r]=t[this]})}function f(e,t){(t?e.children(t):e.children()).each(function(){var e=this,t=c(e.cells);$.each(l,function(r){var i=t[this],a=e.cells[r];null!=i&&null!=a&&i.cellIndex!==r&&i.parentNode.insertBefore(i,a)})})}if(null!=d&&null!=s){for(l=function(){var t,r=[],i=[],a=e.length;for(t=0;t<a;t++)u&&e[t]<p?r.push(e[t]):i.push(e[t]);return r.concat(i)}(),h(s.colModel),h(s.colNames),h(d.headers),o=$(d.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),u&&null!=d.fhDiv&&(o=o.add(d.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),f(o,r&&":not(.ui-jqgrid-labels)"),t&&(o=$(n.tBodies[0]),u&&null!=d.fbDiv&&(o=o.add(d.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),f(o,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),s.footerrow&&(o=$(d.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),u&&null!=d.fsDiv&&(o=o.add(d.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),f(o)),s.remapColumns&&(s.remapColumns.length?h(s.remapColumns):s.remapColumns=c(l)),s.lastsort=$.inArray(s.lastsort,l),s.iColByName={},i=0,a=s.colModel.length;i<a;i++)s.iColByName[s.colModel[i].name]=i;feedback.call(n,"onRemapColumns",l,t,r)}},remapColumnsByName:function(e,t,r){var i,a,o=this[0].p,l=[],n=e.slice(),s=$.inArray;for(o.subGrid&&0>s("subgrid",n)&&n.unshift("subgrid"),o.multiselect&&0>s("cb",n)&&n.unshift("cb"),o.rownumbers&&0>s("rn",n)&&n.unshift("rn"),i=0,a=n.length;i<a;i++)l.push(o.iColByName[n[i]]);return base.remapColumns.call(this,l,t,r),this},setGridWidth:function(e,t){return this.each(function(){var r,i,a,o,l=this,n=l.p,s=l.grid,d=0,c=0,u=!1,p=0,h=jgrid.isCellClassHidden,f=e;if(s&&null!=n){l.fixScrollOffsetAndhBoxPadding();var g,m,v,b,w=n.colModel,y=n.scrollOffset,_=jgrid.cell_width?0:n.cellLayout,x=s.headers,C=s.footers,j=s.bDiv,D=s.hDiv,R=s.sDiv,q=s.cols,S=$(D).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,G=function(e){s.width=n.width=e,$(n.gBox).css("width",e+"px"),$(n.gView).css("width",e+"px"),$(j).css("width",e+"px"),$(D).css("width",e+"px"),n.pager&&$(n.pager).css("width",e+"px"),n.toppager&&$(n.toppager).css("width",e+"px"),!0===n.toolbar[0]&&($(s.uDiv).css("width",e+"px"),"both"===n.toolbar[1]&&$(s.ubDiv).css("width",e+"px")),n.footerrow&&$(R).css("width",e+"px")};if("boolean"!=typeof t&&(t=n.shrinkToFit),!isNaN(f)){if(G(f=parseInt(f,10)),!1===t&&!0===n.forceFit&&(n.forceFit=!1),!0===t){if($.each(w,function(){!1!==this.hidden||h(this.classes)||(d+=(r=this.widthOrg)+_,this.fixed?p+=this.width+_:c++)}),0===c||(n.tblwidth=parseInt(d,10),a=f-_*c-p,isNaN(n.height)||(j.clientHeight<j.scrollHeight||1===l.rows.length)&&(u=!0,a-=y),(b=a/(n.tblwidth-_*c-p))<0)||(v=(d=0)<q.length,$.each(w,function(e){!1!==this.hidden||h(this.classes)||this.fixed||(r=Math.round(this.widthOrg*b),this.width=r,d+=r,x[e].width=r,S[e].style.width=r+"px",n.footerrow&&(C[e].style.width=r+"px"),v&&(q[e].style.width=r+"px"),i=e)}),!i))return;o=0,u?f-p-(d+_*c)!==y&&(o=f-p-(d+_*c)-y):1!==Math.abs(f-p-(d+_*c))&&(o=f-p-(d+_*c)),(g=w[i]).width+=o,n.tblwidth=parseInt(d+o+_*c+p,10),n.tblwidth>f&&(m=n.tblwidth-parseInt(f,10),n.tblwidth=f,g.width=g.width-m),r=g.width,x[i].width=r,S[i].style.width=r+"px",v&&(q[i].style.width=r+"px"),n.footerrow&&(C[i].style.width=r+"px"),n.tblwidth+(u?y:0)<n.width&&G(n.tblwidth+(u?y:0)),j.offsetWidth>j.clientWidth&&(n.autowidth||void 0!==n.widthOrg&&"auto"!==n.widthOrg&&"100%"!==n.widthOrg||G(j.offsetWidth))}n.tblwidth&&(n.tblwidth=parseInt(n.tblwidth,10),f=n.tblwidth,D.scrollLeft=j.scrollLeft,m=Math.abs(f-n.width),n.shrinkToFit&&!t&&m<3&&0<m&&(f<n.width&&G(f),j.offsetWidth>j.clientWidth&&(n.autowidth||void 0!==n.widthOrg&&"auto"!==n.widthOrg&&"100%"!==n.widthOrg||G(j.offsetWidth)))),l.fixScrollOffsetAndhBoxPadding();var O={resizeDiv:!0,resizedRows:{iRowStart:t?0:-1,iRowEnd:-1}};$(l).triggerHandler("jqGridResetFrozenHeights",[{header:O,resizeFooter:!0,body:O}])}}})},setGridHeight:function(e){return this.each(function(){var t=this,r=t.grid,i=t.p;if(r){var a=$(r.bDiv);a.css({height:e+(isNaN(e)?"":"px")}),!0===i.frozenColumns&&$(i.idSel+"_frozen").parent().height(a.height()-16),i.height=e,i.scroll&&r.populateVisible.call(t),t.fixScrollOffsetAndhBoxPadding(),$(t).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(e){return this.each(function(){var t=this.grid.cDiv;this.p.caption=e,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",t).html(e),$(t).show(),$(t).nextAll("div").removeClass(base.getGuiStyles.call(this,"top")),$(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(e,t,r,i){return this.each(function(){var a,o,l=this.p;if(this.grid){if(isNaN(e)){if(void 0===(a=l.iColByName[e]))return}else a=parseInt(e,10);0<=a&&(o=$(this.grid.headers[a].el),l.frozenColumns&&(o=o.add(this.grid.fhDiv.find("#"+jqID(o)))),t&&(o.each(function(){var e=$("[id^=jqgh_]",this),r=e.children("span.ui-jqgrid-cell-wrapper");if(0<r.length)r.html(t);else{var i=$(".s-ico",this);e.empty().html(t)[l.sortIconsBeforeText?"prepend":"append"](i)}}),l.colNames[a]=t),r&&("string"==typeof r?o.addClass(r):o.css(r)),"object"==typeof i&&o.attr(i))}})},setCell:function(e,t,r,i,a,o){return this.each(function(){var l,n,s,d,c,u,p,h,f,g,m,v=this,b=v.p,w=b.colModel,y={};if(v.grid&&0<=(l=isNaN(t)?b.iColByName[t]:parseInt(t,10))&&(u=base.getGridRowById.call($(v),e))){if(p=jgrid.getCell.call(v,u,l),""!==r||!0===o){if(d=w[l],"local"===b.datatype&&(g=stripPref(b.idPrefix,e),void 0!==(m=b._index[g])&&(c=b.data[m])),null==c){for(s=0;s<u.cells.length;s++)if(s!==l&&0<(h=jgrid.getDataFieldOfCell.call(v,u,s)).length){try{f=$.unformat.call(v,h,{rowId:e,colModel:w[s]},s)}catch(_){f=htmlDecode(h[0].innerHTML)}y[w[s].name]=f}}else y=c;y[d.name]=r,n=v.formatter(e,r,l,y,"edit");var x=p;!0===b.treeGrid&&d.name===b.ExpandColumn&&(x=x.children("span.cell-wrapperleaf,span.cell-wrapper").first()),x.html(n),d.title&&p.attr({title:r}),null!=c&&(n=convertOnSaveLocally.call(v,r,d,c[d.name],g,c,l),$.isFunction(d.saveLocally)?d.saveLocally.call(v,{newValue:n,newItem:c,oldItem:c,id:g,cm:d,cmName:d.name,iCol:l}):c[d.name]=n)}(i||a)&&(p=jgrid.getCell.call(v,u,l),i&&p["string"==typeof i?"addClass":"css"](i),"object"==typeof a&&p.attr(a))}})},getCell:function(e,t){var r=!1;return this.each(function(){var i,a,o,l,n=this,s=n.p;if(n.grid&&0<=(i=isNaN(t)?s.iColByName[t]:parseInt(t,10))&&(a=base.getGridRowById.call($(n),e))){o=jgrid.getDataFieldOfCell.call(n,a,i).first(),l=s.colModel[i];try{r=base.isCellEditing.call($(n),e,i,a)?jgrid.getEditedValue.call(n,o,l,{},l.editable):$.unformat.call(n,o,{rowId:a.id,colModel:l},i)}catch(d){r=htmlDecode(o.html())}}}),r},getCol:function(e,t,r){var i,a,o,l,n=[],s=0;return t="boolean"==typeof t&&t,void 0===r&&(r=!1),this.each(function(){var d,c,u=this,p=u.p;if(u.grid&&0<=(d=isNaN(e)?p.iColByName[e]:parseInt(e,10))){var h,f,g=u.rows,m=g.length,v=0,b=0,w=p.colModel[d];if(m&&0<m){for(;v<m;){if($(h=g[v]).hasClass("jqgrow")){c=jgrid.getDataFieldOfCell.call(u,h,d).first(),f=h.id;try{i=base.isCellEditing.call($(u),f,d,h)?jgrid.getEditedValue.call(u,c,w,{},w.editable):$.unformat.call(u,c,{rowId:f,colModel:w},d)}catch(y){i=htmlDecode(c.html())}r?(l=parseFloat(i),isNaN(l)||(s+=l,void 0===o&&(o=a=l),a=Math.min(a,l),o=Math.max(o,l),b++)):t?n.push({id:f,value:i}):n.push(i)}v++}if(r)switch(r.toLowerCase()){case"sum":n=s;break;case"avg":n=s/b;break;case"count":n=m-1;break;case"min":n=a;break;case"max":n=o}}}}),n},clearGridData:function(e){return this.each(function(){var t=this,r=t.p,i=t.rows,a=t.grid;a&&r&&i&&("boolean"!=typeof e&&(e=!1),$(t).off(".jqGridFormatter"),a.emptyRows.call(t,!1,!0),r.footerrow&&e&&$(".ui-jqgrid-ftable td",a.sDiv).html("&#160;"),r.selrow=null,clearArray(r.selarrrow),clearArray(r.savedRow),r.editingInfo={},clearArray(r.data),clearArray(r.lastSelectedData),r._index={},r.rowIndexes={},r.dataIndexById={},r.indexByColumnData={},r.records=0,r.page=1,r.lastpage=0,r.reccount=0,t.updatepager(!0,!1))})},getInd:function(e,t){var r=base.getGridRowById.call($(this),e);return!!r&&(!0===t?r:r.rowIndex)},bindKeys:function(e){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var e=this,r=e.p,i=$(e);r.scrollrows=t.scrollingRows,i.on("keydown.jqGrid",function(a){var o=$(this).find("tr[tabindex=0]")[0],l=jgrid.detectRowEditing.call(e,$(a.target).closest("tr.jqgrow").attr("id")),n=function(e){do if(null===(o=o[e]))return;while($(o).is(":hidden")||!$(o).hasClass("jqgrow"));base.setSelection.call(i,o.id,!0),a.preventDefault()},s=function(a,o){var l=t["on"+a+(o||"")];i.triggerHandler("jqGridKey"+a,[r.selrow]),$.isFunction(l)&&l.call(e,r.selrow)},d=function(e){if(r.treeGrid){var t=r.data[r._index[stripPref(r.idPrefix,o.id)]][r.treeReader.expanded_field];"Right"===e&&(t=!t),t&&$(o).find("div.treeclick").trigger("click")}s(e,"Key")};if(o&&null===l)switch(a.keyCode){case 38:n("previousSibling");break;case 40:n("nextSibling");break;case 37:d("Left");break;case 39:d("Right");break;case 13:s("Enter");break;case 32:s("Space")}})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown.jqGrid")})},getLocalRow:function(e){var t,r=!1;return this.each(function(){var i=this.p;void 0!==e&&null!=i&&null!=i._index&&null!=i.data&&0<=(t=i._index[stripPref(i.idPrefix,e)])&&(r=i.data[t])}),r},progressBar:function(e){return e=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},e||{}),this.each(function(){var t="show"===e.method,r=jqID(this.p.id),i=$("#load_"+r);switch(""!==e.htmlcontent&&i.html(e.htmlcontent),e.loadtype){case"disable":break;case"enable":i.toggle(t);break;case"block":$("#lui_"+r).toggle(t),i.toggle(t)}})},setColWidth:function(e,t,r,i){return this.each(function(){var a,o=$(this),l=this.grid,n=this.p;if("string"==typeof e){if(void 0===(e=n.iColByName[e]))return}else if("number"!=typeof e)return;null!=(a=l.headers[e])&&(a.newWidth=t,l.newWidth=n.tblwidth+t-a.width,l.resizeColumn(e,!n.frozenColumns,i),!1===r||i||(this.fixScrollOffsetAndhBoxPadding(),base.setGridWidth.call(o,l.newWidth+n.scrollOffset,!1)))})},getAutoResizableWidth:function(e){var t=this;if(0===t.length)return -1;var r,i,a,o,l,n=(t=t[0]).rows,s=t.p,d=s.colModel[e],c=$(t.grid.headers[e].el),u=c.children("div"),p=parseFloat(c.css(d.rotated?"padding-top":"padding-left")||0),h=parseFloat(c.css(d.rotated?"padding-bottom":"padding-right")||0),f=u.children("span.s-ico"),g=u.children(".ui-jqgrid-sort-order"),m=u.children("."+s.autoResizing.wrapperClassName),v=d.rotated?m.outerHeight():m.outerWidth(),b=parseFloat(m.css(d.rotated?"height":"width")||0),w=0,y=0,_=null!=d.autoResizing&&void 0!==d.autoResizable.compact?d.autoResizable.compact:s.autoResizing.compact,x=s.autoResizing.wrapperClassName;if(null==d||!d.autoResizable||0===m.length||d.hidden||jgrid.isCellClassHidden(d.classes)||d.fixed)return -1;for(_&&!f.is(":visible")&&"none"===f.css("display")||(y=d.rotated?f.outerHeight(!0):f.outerWidth(!0)+(0<g.length?g.outerWidth(!0):0),s.sortIconsBeforeText||(y-="rtl"===s.direction?parseFloat(f.css("padding-left")||0)+parseFloat(f.css("margin-left")||0):parseFloat(f.css("padding-right")||0)+parseFloat(f.css("margin-right")||0))),d.rotated?y=Math.max(y,v+p+h):y+=v+p+(b===v?p+h:0)+parseFloat(u.css("margin-left")||0)+parseFloat(u.css("margin-right")||0),a=0,n=t.rows;a<n.length;a++)i=(r=n[a]).cells[e],o=$(r.cells[e]),null!=i&&($(r).hasClass("jqgrow")&&"none"!==r.style.display&&"none"!==i.style.display||$(r).hasClass("jqgroup")&&1===i.colSpan)?(l=$(i.firstChild)).hasClass(x)?y=Math.max(y,l.outerWidth()+w):s.treeGrid&&s.ExpandColumn===d.name&&(y=Math.max(y,(l=o.children(".cell-wrapper,.cell-wrapperleaf")).outerWidth()+w+o.children(".tree-wrap").outerWidth())):$(r).hasClass("jqgfirstrow")&&(w=(jgrid.cell_width?parseFloat(o.css("padding-left")||0)+parseFloat(o.css("padding-right")||0):0)+parseFloat(o.css("border-right")||0)+parseFloat(o.css("border-left")||0));return Math.min(y=Math.max(y,null!=d.autoResizing&&void 0!==d.autoResizing.minColWidth?d.autoResizing.minColWidth:s.autoResizing.minColWidth),null!=d.autoResizing&&void 0!==d.autoResizing.maxColWidth?d.autoResizing.maxColWidth:s.autoResizing.maxColWidth)},autoResizeColumn:function(e,t){return this.each(function(){var r,i=$(this),a=this.p,o=a.colModel[e],l=$(this.grid.headers[e].el),n=base.getAutoResizableWidth.call(i,e),s=(o.autoResizing||{}).resetWidthOrg;null==o||n<0||n===o.width||(base.setColWidth.call(i,e,n,a.autoResizing.adjustGridWidth&&!a.autoResizing.fixWidthOnShrink&&!t,t),a.autoResizing.fixWidthOnShrink&&a.shrinkToFit&&!t&&(o.fixed=!0,r=o.widthOrg,o.widthOrg=o.width,base.setGridWidth.call(i,a.width,!0),o.widthOrg=r,o.fixed=!1),(s||void 0===s&&a.autoResizing.resetWidthOrg)&&(o.widthOrg=o.width),l.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var e,t,r=$(this),i=this.p,a=i.colModel,o=a.length,l=i.shrinkToFit,n=i.autoResizing.adjustGridWidth,s=i.autoResizing.fixWidthOnShrink,d=parseInt(i.widthOrg,10),c=this.grid,u=base.autoResizeColumn;for(i.shrinkToFit=!1,i.autoResizing.adjustGridWidth=!0,i.autoResizing.fixWidthOnShrink=!1,e=0;e<o;e++)(t=a[e]).autoResizable&&"actions"!==t.formatter&&u.call(r,e,!0);c.hDiv.scrollLeft=c.bDiv.scrollLeft,i.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft),this.fixScrollOffsetAndhBoxPadding(),isNaN(d)?n&&base.setGridWidth.call(r,c.newWidth+i.scrollOffset,!1):base.setGridWidth.call(r,d,!1),i.autoResizing.fixWidthOnShrink=s,i.autoResizing.adjustGridWidth=n,i.shrinkToFit=l})}});var getTdByColumnIndex=function(e,t){var r=this.grid.fbRows;return null!=(e=null!=r&&r[0].cells.length>t?r[e.rowIndex]:e)&&null!=e.cells?$(e.cells[t]):$()},safeHeightSet=function(e,t){var r=e.height();1<=Math.abs(r-t)&&0<t&&(e.height(t),1<=Math.abs(t-(r=e.height()))&&e.height(t+Math.round(t-r)))};jgrid.extend({editCell:function(e,t,r){return this.each(function(){var i,a,o,l,n=this,s=$(n),d=n.p,c=n.rows;if(n.grid&&!0===d.cellEdit&&null!=c&&null!=c[e]&&(e=parseInt(e,10),t=parseInt(t,10),!isNaN(e)&&!isNaN(t))){var u,p=c[e],h=null!=p?p.id:null,f=$(p),g=parseInt(d.iCol,10),m=parseInt(d.iRow,10),v=$(c[m]),b=d.savedRow;if(null!=h){if(d.selrow=h,d.knv||s.jqGrid("GridNav"),0<b.length&&0<v.length){if(!0===r&&e===m&&t===g)return;s.jqGrid("saveCell",b[0].id,b[0].ic)}else setTimeout(function(){$("#"+jgrid.jqID(d.knv)).attr("tabindex","-1").focus()},1);if("subgrid"!==(i=(l=d.colModel[t]).name)&&"cb"!==i&&"rn"!==i){o=getTdByColumnIndex.call(n,p,t);var w=l.editable;$.isFunction(w)&&(w=w.call(n,{rowid:h,iCol:t,iRow:e,cmName:i,cm:l,mode:"cell"}));var y=s.jqGrid("getGuiStyles","states.select","edit-cell"),_=s.jqGrid("getGuiStyles","states.hover","selected-row");if(!0!==w||!0!==r||o.hasClass("not-editable-cell"))d.noCellSelection||(0<=g&&0<=m&&(getTdByColumnIndex.call(n,v[0],g).removeClass(y),v.removeClass(_)),o.addClass(y),f.addClass(_)),a=o.html().replace(/&#160;/gi,""),feedback.call(n,"onSelectCell",h,i,a,e,t);else{d.noCellSelection||(0<=g&&0<=m&&(getTdByColumnIndex.call(n,v[0],g).removeClass(y),v.removeClass(_)),o.addClass(y),f.addClass(_)),l.edittype||(l.edittype="text"),u=l.edittype;try{a=$.unformat.call(n,o,{rowId:h,colModel:l},t)}catch(x){a="textarea"===u?o.text():o.html()}if(d.autoEncodeOnEdit&&(a=jgrid.oldDecodePostedData(a)),("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))&&(a=""),$.isFunction(d.formatCell)){var C=d.formatCell.call(n,h,i,a,e,t);void 0!==C&&(a=C)}feedback.call(n,"beforeEditCell",h,i,a,e,t),b.push({id:e,ic:t,name:i,v:a}),d.editingInfo[h]={mode:"cellEditing",savedRow:b[b.length-1],editable:{}},d.editingInfo[h].editable[i]=w;var j=$.extend({},l.editoptions||{},{id:e+"_"+i,name:i,rowId:h,mode:"cell",cm:l,iCol:t}),D=jgrid.createEl.call(n,u,j,a,!0,$.extend({},jgrid.ajaxOptions,d.ajaxSelectOptions||{})),R=o,q=!0===d.treeGrid&&i===d.ExpandColumn;q&&(R=o.children("span.cell-wrapperleaf,span.cell-wrapper")),R.html("").append(D).attr("tabindex","0"),q&&$(D).width(o.width()-o.children("div.tree-wrap").outerWidth()),jgrid.bindEv.call(n,D,j),d.frozenColumns&&t<s.jqGrid("getNumberOfFrozenColumns")&&safeHeightSet($(n.rows[p.rowIndex].cells[t]),o.height()),setTimeout(function(){$(D).focus()},0),$("input, select, textarea",o).on("keydown",function(r){if(27===r.keyCode&&(0<$("input.hasDatepicker",o).length?$(".ui-datepicker").is(":hidden")?s.jqGrid("restoreCell",e,t):$("input.hasDatepicker",o).datepicker("hide"):s.jqGrid("restoreCell",e,t)),13===r.keyCode&&!r.shiftKey)return s.jqGrid("saveCell",e,t),!1;if(9===r.keyCode){if(n.grid.hDiv.loading)return!1;r.shiftKey?s.jqGrid("prevCell",e,t):s.jqGrid("nextCell",e,t)}r.stopPropagation()}),feedback.call(n,"afterEditCell",h,i,a,e,t)}d.iCol=t,d.iRow=e}}}})},saveCell:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p,o=r.grid,l=jgrid.info_dialog,n=jgrid.jqID;if(o&&!0===a.cellEdit){var s=i.jqGrid("getGridRes","errors"),d=s.errcap,c=i.jqGrid("getGridRes","edit").bClose,u=a.savedRow,p=1<=u.length?0:null;if(null!==p){var h,f=r.rows[e],g=null!=f?f.id:null,m=null!=f?$(f):$(),v=a.colModel[t],b=v.name,w=getTdByColumnIndex.call(r,f,t),y={},_=jgrid.getEditedValue.call(r,w,v,y);if(_!==u[p].v){void 0!==(h=i.triggerHandler("jqGridBeforeSaveCell",[g,b,_,e,t]))&&(_=h),$.isFunction(a.beforeSaveCell)&&void 0!==(h=a.beforeSaveCell.call(r,g,b,_,e,t))&&(_=h);var x=jgrid.checkValues.call(r,_,t,void 0,void 0,{oldValue:u[p].v,newValue:_,cmName:b,rowid:g,iCol:t,iRow:e,cm:v,tr:f,td:w,mode:"cell"}),C=v.formatoptions||{};if(null==x||!0===x||!0===x[0]){var j=i.triggerHandler("jqGridBeforeSubmitCell",[g,b,_,e,t])||{};if($.isFunction(a.beforeSubmitCell)&&((j=a.beforeSubmitCell.call(r,g,b,_,e,t))||(j={})),0<$("input.hasDatepicker",w).length&&$("input.hasDatepicker",w).datepicker("hide"),"date"===v.formatter&&!0!==C.sendFormatted&&(_=$.unformat.date.call(r,_,v)),"remote"===a.cellsubmit){if(a.cellurl){var D={};D[b]=_;var R=a.prmNames,q=R.id,S=R.oper;D[q]=jgrid.stripPref(a.idPrefix,g),D[S]=R.editoper,D=$.extend(j,D),a.autoEncodeOnEdit&&$.each(D,function(e,t){$.isFunction(t)||(D[e]=jgrid.oldEncodePostedData(t))}),i.jqGrid("progressBar",{method:"show",loadtype:a.loadui,htmlcontent:i.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),o.hDiv.loading=!0,$.ajax($.extend({url:$.isFunction(a.cellurl)?a.cellurl.call(r,a.cellurl,e,t,g,_,b):a.cellurl,data:jgrid.serializeFeedback.call(r,a.serializeCellData,"jqGridSerializeCellData",D),type:"POST",complete:function(n){if(o.endReq.call(r),(n.status<300||304===n.status)&&(0!==n.status||4!==n.readyState)){var s=i.triggerHandler("jqGridAfterSubmitCell",[r,n,D.id,b,_,e,t])||[!0,""];(!0===s||!0===s[0]&&$.isFunction(a.afterSubmitCell))&&(s=a.afterSubmitCell.call(r,n,D.id,b,_,e,t)),null==s||!0===s||!0===s[0]?(i.jqGrid("setCell",g,t,_,!1,!1,!0),w.addClass("dirty-cell"),m.addClass("edited"),feedback.call(r,"afterSaveCell",g,b,_,e,t),u.splice(0,1),delete a.editingInfo[g]):(l.call(r,d,s[1],c),i.jqGrid("restoreCell",e,t))}},error:function(o,n,s){i.triggerHandler("jqGridErrorCell",[o,n,s]),$.isFunction(a.errorCell)?a.errorCell.call(r,o,n,s):l.call(r,d,o.status+" : "+o.statusText+"<br/>"+n,c),i.jqGrid("restoreCell",e,t)}},jgrid.ajaxOptions,a.ajaxCellOptions||{}))}else try{l.call(r,d,s.nourl,c),i.jqGrid("restoreCell",e,t)}catch(G){}}if("clientArray"===a.cellsubmit){if(i.jqGrid("setCell",g,t,"select"===v.edittype&&"select"!==v.formatter?y.text:_,!1,!1,!0),w.addClass("dirty-cell"),m.addClass("edited"),feedback.call(r,"afterSaveCell",g,b,_,e,t),a.frozenColumns&&t<i.jqGrid("getNumberOfFrozenColumns"))try{r.rows[f.rowIndex].cells[t].style.height=""}catch(O){}u.splice(0,1),delete a.editingInfo[g]}}else try{setTimeout(function(){var e=jgrid.getRelativeRect.call(r,w);l.call(r,d,_+" "+x[1],c,{top:e.top,left:e.left+$(r).closest(".ui-jqgrid").offset().left})},50),i.jqGrid("restoreCell",e,t)}catch(k){}}else i.jqGrid("restoreCell",e,t)}setTimeout(function(){$("#"+n(a.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(e,t){return this.each(function(){var r,i,a,o=this,l=o.p,n=o.rows[e],s=n.id;if(o.grid&&!0===l.cellEdit){var d=l.savedRow,c=getTdByColumnIndex.call(o,n,t);if(1<=d.length){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",c).datepicker("hide")}catch(u){}if(i=l.colModel[t],!0===l.treeGrid&&null!=i&&i.name===l.ExpandColumn?c.children("span.cell-wrapperleaf,span.cell-wrapper").empty():c.empty(),c.attr("tabindex","-1"),r=d[0].v,null!=i&&(a=i.formatoptions||{},"date"===i.formatter&&!0!==a.sendFormatted&&(r=$.unformat.date.call(o,r,i)),$(o).jqGrid("setCell",s,t,r,!1,!1,!0),l.frozenColumns&&t<$(o).jqGrid("getNumberOfFrozenColumns")))try{o.rows[n.rowIndex].cells[t].style.height=""}catch(p){}feedback.call(o,"afterRestoreCell",s,r,e,t),d.splice(0,1),delete l.editingInfo[s]}setTimeout(function(){$("#"+l.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(e,t){return this.each(function(){var r,i,a,o=this,l=$(o),n=o.p,s=!1,d=o.rows;if(o.grid&&!0===n.cellEdit&&null!=d&&null!=d[e]){for(r=t+1;r<n.colModel.length;r++)if(i=(a=n.colModel[r]).editable,$.isFunction(i)&&(i=i.call(o,{rowid:d[e].id,iCol:r,iRow:e,cmName:a.name,cm:a,mode:"cell"})),!0===i){s=r;break}!1!==s?l.jqGrid("editCell",e,s,!0):0<n.savedRow.length&&l.jqGrid("saveCell",e,t)}})},prevCell:function(e,t){return this.each(function(){var r,i,a,o=this,l=$(o),n=o.p,s=!1,d=o.rows;if(o.grid&&!0===n.cellEdit&&null!=d&&null!=d[e]){for(r=t-1;0<=r;r--)if(i=(a=n.colModel[r]).editable,$.isFunction(i)&&(i=i.call(o,{rowid:d[e].id,iCol:r,iRow:e,cmName:a.name,cm:a,mode:"cell"})),!0===i){s=r;break}!1!==s?l.jqGrid("editCell",e,s,!0):0<n.savedRow.length&&l.jqGrid("saveCell",e,t)}})},GridNav:function(){return this.each(function(){var e,t,r=this,i=$(r),a=r.p,o=r.grid;if(o&&!0===a.cellEdit){var l=o.bDiv;a.knv=a.id+"_kn";var n=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+a.knv+"'></div></div>");$(n).insertBefore(o.cDiv),$("#"+a.knv).focus().keydown(function(o){var l=parseInt(a.iRow,10),n=parseInt(a.iCol,10);switch(t=o.keyCode,"rtl"===a.direction&&(37===t?t=39:39===t&&(t=37)),t){case 38:0<l-1&&(s(l-1,n,"vu"),i.jqGrid("editCell",l-1,n,!1));break;case 40:l+1<=r.rows.length-1&&(s(l+1,n,"vd"),i.jqGrid("editCell",l+1,n,!1));break;case 37:0<=n-1&&(s(l,e=d(n-1,"lft"),"h"),i.jqGrid("editCell",l,e,!1));break;case 39:n+1<=a.colModel.length-1&&(s(l,e=d(n+1,"rgt"),"h"),i.jqGrid("editCell",l,e,!1));break;case 13:0<=n&&0<=l&&i.jqGrid("editCell",l,n,!0);break;default:return!0}return!1})}function s(e,t,i){var a=r.rows[e];if("v"===i.substr(0,1)){var o=l.clientHeight,n=l.scrollTop,s=a.offsetTop+a.clientHeight,d=a.offsetTop;"vd"===i&&n+o<=s&&(l.scrollTop=l.scrollTop+a.clientHeight),"vu"===i&&d<n&&(l.scrollTop=l.scrollTop-a.clientHeight)}if("h"===i){var c=l.clientWidth,u=l.scrollLeft,p=a.cells[t],h=p.offsetLeft+p.clientWidth,f=p.offsetLeft;h>=c+parseInt(u,10)?l.scrollLeft=l.scrollLeft+p.clientWidth:f<u&&(l.scrollLeft=l.scrollLeft-p.clientWidth)}}function d(e,t){var r,i=0,o=a.colModel;if("lft"===t){for(i=e+1,r=e;0<=r;r--)if(!0!==o[r].hidden){i=r;break}}if("rgt"===t){for(i=e-1,r=e;r<o.length;r++)if(!0!==o[r].hidden){i=r;break}}return i}})},getChangedCells:function(e){var t=[];return e||(e="all"),this.each(function(){var r=this,i=r.p,a=jgrid.htmlDecode,o=r.rows;r.grid&&!0===i.cellEdit&&$(o).each(function(l){var n={};if($(this).hasClass("edited")){var s=this;$(this.cells).each(function(t){var d=i.colModel[t],c=d.name,u=getTdByColumnIndex.call(r,s,t);if("cb"!==c&&"subgrid"!==c&&"rn"!==c&&("dirty"!==e||u.hasClass("dirty-cell")))try{n[c]=$.unformat.call(r,u[0],{rowId:o[l].id,colModel:d},t)}catch(p){n[c]=a(u.html())}}),n.id=this.id,t.push(n)}})}),t}});var getGuiStyles=base.getGuiStyles,getGridRes=base.getGridRes;jgrid.jqModal=jgrid.jqModal||{},$.extend(!0,jgrid.jqModal,{toTop:!0}),$.extend(jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){var r=!(!(t=$.extend({jqm:!0,gb:"",removemodal:!1},t||{})).gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&$("#"+t.gb.substr(6))[0],i=$(e);if(t.onClose){var a=r?t.onClose.call(r,e):t.onClose(e);if("boolean"==typeof a&&!a)return}if($.fn.jqm&&!0===t.jqm)i.attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{$(">.jqgrid-overlay",t.gb).first().hide()}catch(o){}i.hide().attr("aria-hidden","true")}t.removemodal&&i.remove()},createModal:function(e,t,r,i,a,o,l){var n=jgrid.jqID,s=this.p;r=$.extend(!0,{resizingRightBottomIcon:base.getIconRes.call(this,"form.resizableLtr")},jgrid.jqModal||{},null!=s&&s.jqModal||{},r);var d=document.createElement("div"),c="#"+n(e.themodal),u="rtl"===$(r.gbox).attr("dir"),p=!!e.resizeAlso&&"#"+n(e.resizeAlso);l=$.extend({},l||{}),d.className=getGuiStyles.call(this,"dialog.window","ui-jqdialog"),d.id=e.themodal,d.dir=u?"rtl":"ltr";var h=document.createElement("div");h.className=getGuiStyles.call(this,"dialog.document"),$(h).attr("role","document");var f=document.createElement("div");f.className=getGuiStyles.call(this,"dialog.subdocument"),h.appendChild(f),d.appendChild(h);var g=document.createElement("div");g.className=getGuiStyles.call(this,"dialog.header","ui-jqdialog-titlebar "+(u?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),g.id=e.modalhead,$(g).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var m=getGuiStyles.call(this,"states.hover"),v=$("<a aria-label='Close' class='"+getGuiStyles.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){v.addClass(m)},function(){v.removeClass(m)}).append("<span class='"+base.getIconRes.call(this,"form.close")+"'></span>");$(g).append(v);var b=document.createElement("div");$(b).addClass(getGuiStyles.call(this,"dialog.content","ui-jqdialog-content")).attr("id",e.modalcontent),$(b).append(t),f.appendChild(b),$(f).prepend(g),!0===o?$("body").append(d):"string"==typeof o?$(o).append(d):$(d).insertBefore(i),$(d).css(l),void 0===r.jqModal&&(r.jqModal=!0);var w={};if($.fn.jqm&&!0===r.jqModal?(0===r.left&&0===r.top&&r.overlay&&((r=$(a).offset()).left+=4,r.top+=4),w.top=r.top+"px",w.left=r.left):0===r.left&&0===r.top||(w.left=r.left,w.top=r.top+"px"),$("a.ui-jqdialog-titlebar-close",g).click(function(){var e=$(c).data("onClose")||r.onClose,t=$(c).data("gbox")||r.gbox;return jgrid.hideModal(c,{gb:t,jqm:r.jqModal,onClose:e,removemodal:r.removemodal||!1}),!1}),0!==r.width&&r.width||(r.width=300),0!==r.height&&r.height||(r.height=200),!r.zIndex){var y=$(i).parents("*[role=dialog]").first().css("z-index");y?(r.zIndex=parseInt(y,10)+2,r.toTop=!0):r.zIndex=950}if(w.left&&(w.left+="px"),$(d).css($.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex},w)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),void 0===r.drag&&(r.drag=!0),void 0===r.resize&&(r.resize=!0),r.drag){if($.fn.jqDrag)$(g).css("cursor","move"),$(d).jqDrag(g);else try{$(d).draggable({handle:$("#"+n(g.id))})}catch(_){}}if(r.resize){if($.fn.jqResize)$(b).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+r.resizingRightBottomIcon+"'></div>"),$(c).jqResize(".jqResize",p);else try{$(d).resizable({handles:"se, sw",alsoResize:p})}catch(x){}}!0===r.closeOnEscape&&$(d).keydown(function(e){if(27===e.which){var t=$(c).data("onClose")||r.onClose;jgrid.hideModal(c,{gb:r.gbox,jqm:r.jqModal,onClose:t,removemodal:r.removemodal||!1,formprop:!r.recreateForm,form:r.form||""})}})},viewModal:function(e,t){if(t=$.extend(!0,{overlay:30,modal:!1,overlayClass:getGuiStyles.call(this,"overlay"),onShow:jgrid.showModal,onHide:jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},jgrid.jqModal||{},t||{}),$.fn.jqm&&!0===t.jqm)t.jqM?$(e).attr("aria-hidden","false").jqm(t).jqmShow():$(e).attr("aria-hidden","false").jqmShow();else{""!==t.gbox&&($(">.jqgrid-overlay",t.gbox).first().show(),$(e).data("gbox",t.gbox)),$(e).show().attr("aria-hidden","false");try{$(":input:visible",e)[0].focus()}catch(r){}}},info_dialog:function(e,t,r,i){var a=this,o=a.p,l=$.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},jgrid.jqModal||{},null!=o&&o.jqModal||{},{caption:"<b>"+e+"</b>"},i||{}),n=l.jqModal;$.fn.jqm&&!n&&(n=!1);var s,d="",c=getGuiStyles.call(a,"states.hover");if(0<l.buttons.length)for(s=0;s<l.buttons.length;s++)void 0===l.buttons[s].id&&(l.buttons[s].id="info_button_"+s),d+=jgrid.builderFmButon.call(a,l.buttons[s].id,l.buttons[s].text);var u=isNaN(l.dataheight)?l.dataheight:l.dataheight+"px",p="text-align:"+l.align+";",h=$("#info_dialog"),f="<div id='info_id'>";f+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+u+";"+p+"'>"+t+"</div>",(r||""!==d)&&(f+="<hr class='"+getGuiStyles.call(a,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+l.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(r?jgrid.builderFmButon.call(a,"closedialog",r):"")+d+"</div>"),f+="</div>";try{"false"===h.attr("aria-hidden")&&jgrid.hideModal("#info_dialog",{jqm:n}),h.remove()}catch(g){}jgrid.createModal.call(a,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},f,l,"","",!0),h=$("#info_dialog"),d&&$.each(l.buttons,function(){$("#"+jgrid.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(e){return $.isFunction(e.data.click)&&e.data.click.call(a,e,h),!1})}),$("#closedialog","#info_id").click(function(){return jgrid.hideModal("#info_dialog",{jqm:n,onClose:h.data("onClose")||l.onClose,gb:h.data("gbox")||l.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(c)},function(){$(this).removeClass(c)}),$.isFunction(l.beforeOpen)&&l.beforeOpen(),jgrid.viewModal.call(a,"#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:l.modal,jqm:n}),$.isFunction(l.afterOpen)&&l.afterOpen();try{h.focus()}catch(m){}},bindEv:function(e,t){$.isFunction(t.dataInit)&&t.dataInit.call(this,e,t),t.dataEvents&&$.each(t.dataEvents,function(){void 0!==this.data?$(e).on(this.type,"object"==typeof this.data&&null!==this.data?$.extend(!0,{},t,this.data):this.data,this.fn):$(e).on(this.type,t,this.fn)})},createEl:function(e,t,r,i,a){var o,l="",n=this,s=n.p,d=jgrid.info_dialog,c=function(e){return getGridRes.call($(n),e)},u=c("errors.errcap"),p=c("edit"),h=p.msg,f=p.bClose;function g(e,t,r){var i=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","generateValue","postData","selectFilled","rowId","column","mode","cm","iCol",];void 0!==r&&$.isArray(r)&&$.merge(i,r),$.each(t,function(t,r){-1===$.inArray(t,i)&&$(e).attr(t,r)}),t.hasOwnProperty("id")||$(e).attr("id",jgrid.randId())}if(null==t)return"";switch(e){case"textarea":l=document.createElement("textarea"),i?t.cols||$(l).css({width:"100%","box-sizing":"border-box"}):t.cols||(t.cols=19),t.rows||(t.rows=2),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),l.value=r,g(l,t),$(l).attr({role:"textbox"});break;case"checkbox":if((l=document.createElement("input")).type="checkbox",""!==r&&null!=r||(r=t.hasOwnProperty("defaultValue")?$.isFunction(t.defaultValue)?t.defaultValue.call(n,{cellValue:r,options:t}):t.defaultValue:"false"),t.value){var m=t.value.split(":");r===m[0]&&(l.checked=!0,l.defaultChecked=!0),l.value=r,$(l).data("offval",m[1])}else{var v=String(r).toLowerCase();0>v.search(/(false|f|0|no|n|off|undefined)/i)&&""!==v?(l.checked=!0,l.defaultChecked=!0,l.value=r):l.value="on",$(l).data("offval","off")}g(l,t,["value"]),$(l).attr({role:"checkbox","aria-checked":l.checked?"true":"false"});break;case"select":l=document.createElement("select");var b,w=[],y=null;!0===t.multiple||"multiple"===t.multiple?(b=!0,l.multiple="multiple",$(l).attr("aria-multiselectable","true"),w=r.split(","),w=$.map(w,function(e){return $.trim(e)})):(b=!1,w[0]=$.trim(r)),void 0===t.size&&(t.size=b?3:1);try{y=t.rowId}catch(_){}if(s&&s.idPrefix&&(y=jgrid.stripPref(s.idPrefix,y)),void 0===t.dataUrl&&t.generateValue&&null!=s.indexByColumnData[t.cm.name]&&(t.value=n.generateValueFromColumnIndex(t.cm.name,t.separator,t.delimiter)),void 0!==t.dataUrl){var x=t.postData||a.postData,C={elem:l,options:t,cm:t.cm,mode:t.mode,rowid:y,iCol:t.iCol,ovm:w};g(l,t,x?["postData"]:void 0),$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(n,y,r,String(t.name),C):t.dataUrl,type:"GET",dataType:"html",data:$.isFunction(x)?x.call(n,y,r,String(t.name)):x,context:C,success:function(e,t,r){var i=this.ovm,a=this.elem,o=this.cm,l=this.iCol,s=$.extend({},this.options),d=this.rowid,c=this.mode,u=$.isFunction(s.buildSelect)?s.buildSelect.call(n,e,r,o,l):e;"string"==typeof u&&(u=$($.trim(u)).html()),u&&($(a).append(u),setTimeout(function(){var e;$("option",a).each(function(t){0===t&&a.multiple&&(this.selected=!1),-1<$.inArray($.trim($(this).val()),i)&&(this.selected=!0,e=!0)}),e||$("option",a).each(function(){-1<$.inArray($.trim($(this).text()),i)&&(this.selected=!0)}),jgrid.fullBoolFeedback.call(n,s.selectFilled,"jqGridSelectFilled",{elem:a,options:s,cm:o,rowid:d,mode:c,cmName:null!=o?o.name:s.name,iCol:l})},0))}},a||{}))}else t.value&&(jgrid.fillSelectOptions(l,t.value,void 0===t.separator?":":t.separator,void 0===t.delimiter?";":t.delimiter,b,r),g(l,t,["value"]),jgrid.fullBoolFeedback.call(n,t.selectFilled,"jqGridSelectFilled",{elem:l,options:t,cm:t.cm,rowid:y,mode:t.mode,cmName:null!=t.cm?t.cm.name:t.name,iCol:t.iCol}));break;case"text":case"password":case"button":o="button"===e?"button":"textbox",(l=document.createElement("input")).type=e,g(l,t),l.value=r,"button"!==e&&(i?t.size||$(l).css({width:"100%","box-sizing":"border-box"}):t.size||(t.size=20)),$(l).attr("role",o);break;case"image":case"file":(l=document.createElement("input")).type=e,g(l,t);break;case"custom":l=document.createElement("span");try{if(!$.isFunction(t.custom_element))throw"editoptions.custom_element is not a function";var j=t.custom_element.call(n,r,t);if(!(j instanceof jQuery||jgrid.isHTMLElement(j)||"string"==typeof j))throw"editoptions.custom_element returns value of a wrong type";j=$(j).addClass("customelement").attr({id:t.id,name:t.name}),$(l).empty().append(j)}catch(D){"e1"===D&&d.call(n,u,"function 'custom_element' "+h.nodefined,f),"e2"===D?d.call(n,u,"function 'custom_element' "+h.novalue,f):d.call(n,u,"string"==typeof D?D:D.message,f)}}return l},checkDate:function(e,t){var r,i,a,o={};if(a=-1!==(e=e.toLowerCase()).indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(a),3!==(t=t.split(a)).length)return!1;var l,n,s,d=-1,c=-1,u=-1;for(n=0;n<e.length;n++)s=isNaN(t[n])?0:parseInt(t[n],10),o[e[n]]=s,-1!==(l=e[n]).indexOf("y")&&(d=n),-1!==l.indexOf("m")&&(u=n),-1!==l.indexOf("d")&&(c=n);return l="y"===e[d]||"yyyy"===e[d]?4:"yy"===e[d]?2:-1,-1!==d&&(r=o[e[d]].toString(),2===l&&1===r.length&&(l=1),r.length===l&&(0!==o[e[d]]||"00"===t[d])&&-1!==u&&!((r=o[e[u]].toString()).length<1||o[e[u]]<1||12<o[e[u]])&&-1!==c&&!((r=o[e[c]].toString()).length<1||o[e[c]]<1||31<o[e[c]]||2===o[e[u]]&&o[e[c]]>((i=o[e[d]])%4!=0||i%100==0&&i%400!=0?28:29)||o[e[c]]>[0,31,29,31,30,31,30,31,31,30,31,30,31][o[e[u]]]))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t;if(!jgrid.isEmpty(e)){if(!(t=e.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(t[3]){if(t[1]<1||12<t[1])return!1}else if(23<t[1])return!1;if(59<t[2])return!1}return!0},checkValues:function(e,t,r,i,a){var o,l,n,s,d,c=this,u=c.p,p=u.colModel,h=jgrid.isEmpty,f=getGridRes.call($(c),"edit.msg"),g=function(e){var t=o[e];return $.isFunction(t)?t.call(c,a):t},m=getGridRes.call($(c),"formatter.date.masks");if(void 0===r){if("string"==typeof t&&(t=u.iColByName[t]),void 0===t||t<0)return[!0,"",""];o=(s=p[t]).editrules,null!=s.formoptions&&(l=s.formoptions.label)}else o=r,l=void 0===i?"_":i,s=p[t];if(o){if(l||(l=null!=u.colNames?u.colNames[t]:s.label),!0===g("required")&&h(e))return[!1,l+": "+f.required,""];var v=!1!==g("required");if(!0===g("number")&&(!1!==v||!h(e))&&isNaN(e))return[!1,l+": "+f.number,""];if(void 0!==o.minValue&&!isNaN(o.minValue)&&parseFloat(e)<parseFloat(o.minValue))return[!1,l+": "+f.minValue+" "+o.minValue,""];if(void 0!==o.maxValue&&!isNaN(o.maxValue)&&parseFloat(e)>parseFloat(o.maxValue))return[!1,l+": "+f.maxValue+" "+o.maxValue,""];if(!0===g("email")&&!(!1===v&&h(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,l+": "+f.email,""];if(!0===g("integer")&&(!1!==v||!h(e))&&(isNaN(e)||e%1!=0||-1!==e.indexOf(".")))return[!1,l+": "+f.integer,""];if(!0===g("date")&&!(!1===v&&h(e)||(s.formatoptions&&s.formatoptions.newformat?(n=s.formatoptions.newformat,m.hasOwnProperty(n)&&(n=m[n])):n=p[t].datefmt||"Y-m-d",jgrid.checkDate(n,e))))return[!1,l+": "+f.date+" - "+n,""];if(!0===g("time")&&!(!1===v&&h(e)||jgrid.checkTime(e)))return[!1,l+": "+f.date+" - hh:mm (am/pm)",""];if(!0===g("url")&&!(!1===v&&h(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,l+": "+f.url,""];if(!0===o.custom){if(!1!==v||!h(e))return $.isFunction(o.custom_func)?(d=o.custom_func.call(c,e,l,t),$.isArray(d)?d:[!1,f.customarray,""]):[!1,f.customfcheck,""]}else if($.isFunction(o.custom)&&(!1!==v||!h(e)))return d=o.custom.call(c,a),$.isArray(d)?d:[!1,f.customarray,""]}return[!0,"",""]}}),jgrid.extend({getColProp:function(e){var t,r=this[0];return null!=r&&r.grid&&void 0!==(t=r.p.iColByName[e])?r.p.colModel[t]:{}},setColProp:function(e,t){return this.each(function(){var r,i=this.p;this.grid&&null!=i&&t&&void 0!==(r=i.iColByName[e])&&$.extend(!0,i.colModel[r],t)})},sortGrid:function(e,t,r){return this.each(function(){var i,a,o,l=this.grid,n=this.p,s=n.colModel,d=s.length,c=!1;if(l){for(e||(e=n.sortname),"boolean"!=typeof t&&(t=!1),a=0;a<d;a++)if((i=s[a]).index===e||i.name===e){!0===n.frozenColumns&&!0===i.frozen&&(c=l.fhDiv.find("#"+jqID(n.id+"_"+e))),c&&0!==c.length||(c=l.headers[a].el),("boolean"!=typeof(o=i.sortable)||o)&&this.sortData(i.index||i.name,a,t,r,c);break}}})},clearBeforeUnload:function(){return this.each(function(){var e,t=this,r=t.p,i=t.grid,a=jgrid.clearArray,o=Object.prototype.hasOwnProperty;$.isFunction(i.emptyRows)&&i.emptyRows.call(t,!0,!0),$(document).off("mousemove.jqGrid mouseup.jqGrid"+r.id),$(t).off();var l,n=i.headers.length;for(l=0;l<n;l++)i.headers[l].el=null;for(e in i)i.hasOwnProperty(e)&&(i.propOrMethod=null);var s=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p",];for(n=s.length,l=0;l<n;l++)o.call(t,s[l])&&(t[s[l]]=null);t._index={},a(r.data),a(r.lastSelectedData),a(r.selarrrow),a(r.savedRow),r.editingInfo={}})},GridDestroy:function(){return this.each(function(){var e=this.p;if(this.grid&&null!=e){e.pager&&$(e.pager).remove();try{$("#alertmod_"+jqID(e.id)).remove(),$(this).jqGrid("clearBeforeUnload"),$(e.gBox).remove()}catch(t){}}})},GridUnload:function(){return this.each(function(){var e=$(this),t=this.p,r=$.fn.jqGrid;this.grid&&(e.removeClass(r.getGuiStyles.call(e,"grid","ui-jqgrid-btable")),t.pager&&(t.pager.substr(1,$.jgrid.uidPref.length)===$.jgrid.uidPref?$(t.pager).remove():$(t.pager).empty().removeClass(r.getGuiStyles.call(e,"pager.pager","ui-jqgrid-pager "+r.getGuiStyles.call(e,"bottom"))).removeAttr("style").removeAttr("dir")),e.jqGrid("clearBeforeUnload"),e.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),e.empty(),e.insertBefore(t.gBox).show(),$(t.pager).insertBefore(t.gBox).show(),$(t.gBox).remove())})},setGridState:function(e){return this.each(function(){var t=this,r=t.p,i=t.grid,a=i.cDiv,o=$(i.uDiv),l=$(i.ubDiv);if(i&&null!=r){var n=function(e){return base.getIconRes.call(t,"gridMinimize."+e)},s=n("visible"),d=n("hidden");"hidden"===e?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",r.gView).slideUp("fast"),r.pager&&$(r.pager).slideUp("fast"),r.toppager&&$(r.toppager).slideUp("fast"),!0===r.toolbar[0]&&("both"===r.toolbar[1]&&l.slideUp("fast"),o.slideUp("fast")),r.footerrow&&$(".ui-jqgrid-sdiv",r.gBox).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",a).removeClass(s).addClass(d),r.gridstate="hidden"):"visible"===e&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",r.gView).slideDown("fast"),r.pager&&$(r.pager).slideDown("fast"),r.toppager&&$(r.toppager).slideDown("fast"),!0===r.toolbar[0]&&("both"===r.toolbar[1]&&l.slideDown("fast"),o.slideDown("fast")),r.footerrow&&$(".ui-jqgrid-sdiv",r.gBox).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",a).removeClass(d).addClass(s),r.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var t=this,r=t.grid,i=$(t),a=t.p,o=jgrid.info_dialog,l=jgrid.htmlEncode;if(!this.ftoolbar){var n,s=$.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:a.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},jgrid.search,a.searching||{},e||{}),d=a.colModel,c=function(e){return getGridRes.call(i,e)},u=c("errors.errcap"),p=c("edit.bClose"),h=c("edit.msg"),f=getGuiStyles.call(t,"states.hover"),g=getGuiStyles.call(t,"states.select"),m=getGuiStyles.call(t,"filterToolbar.dataField"),v={},b=function(e){var t="gs_";switch(s.idMode){case"compatibility":t+=a.idPrefix;break;case"new":t+=a.id+"_"}return t+e},w=function(e){return"#"+jqID(b(e))},y=function(e){var t=(e.value||"").split(":");return{on:t[0]||"on",off:t[1]||"off"}},_=function(e){var t,r,i,o,l,n,c=a.postData[s.sFilter],u={},p=a.iColByName;if(e)for(r=0;r<d.length;r++)!1!==(l=d[r]).search&&(n=l.searchoptions||{},u[l.name]={op:n.sopt?n.sopt[0]:"select"===l.stype||"checkbox"===l.stype?"eq":s.defaultSearch,data:void 0!==n.defaultValue?n.defaultValue:""});if(!c||!a.search)return u;if("string"==typeof c)try{c=$.parseJSON(c)}catch(h){c={}}else c=c||{};if(i=c.rules||{},null==c||null!=c.groupOp&&null!=s.groupOp&&c.groupOp.toUpperCase()!==s.groupOp.toUpperCase()||null==i||0===i.length||null!=c.groups&&0<c.groups.length)return u;for(r=0;r<i.length;r++)for(l=d[p[(o=i[r]).field]],t=0;t<d.length;t++)if(((l=d[t]).index||l.name)===o.field&&!1!==l.search){if((n=l.searchoptions||{}).sopt){if(0>$.inArray(o.op,n.sopt))continue}else if("select"===l.stype||"checkbox"===l.stype){if("eq"!==o.op)continue}else if(o.op!==s.defaultSearch)continue;u[l.name]={op:o.op,data:o.data}}return u},x=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},C=function(){var e={},o=0,l={};$.each(d,function(){var i,n,d=this,u=d.index||d.name,p=d.searchoptions||{},h=$(w(d.name),!0===d.frozen&&!0===a.frozenColumns?r.fhDiv:r.hDiv),f=function(e,t){var r=d.formatoptions||{};return void 0!==r[e]?r[e]:c("formatter."+(t||d.formatter)+"."+e)},g=function(e){var t=f("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(RegExp(t,"g"),"")};if(n=s.searchOperators?h.parent().prev().children("a").data("soper")||s.defaultSearch:p.sopt?p.sopt[0]:"select"===d.stype||"checkbox"===d.stype?"eq":s.defaultSearch,"custom"===d.stype&&$.isFunction(p.custom_value)&&0<h.length&&"SPAN"===h[0].nodeName.toUpperCase())i=p.custom_value.call(t,h.children(".customelement").first(),"get");else if("select"===d.stype)i=h.prop("multiple")?null==(i=h.val())||0===i.length?"":i.join(a.inFilterSeparator||","):h.val();else if("checkbox"===d.stype){var m=y(p);switch(h.data("state")){case -1:i="";break;case 0:i=m.off;break;default:i=m.on}}else switch(i=$.trim(h.val()),d.formatter){case"integer":""!==(i=g(i).replace(f("decimalSeparator","number"),"."))&&(i=String(parseInt(i,10)));break;case"number":""!==(i=g(i).replace(f("decimalSeparator"),"."))&&"0"===String(i).charAt(0)&&(i=String(parseFloat(i)));break;case"currency":var v=f("prefix"),b=f("suffix");v&&v.length&&i.substr(0,v.length)===v&&(i=i.substr(v.length)),b&&b.length&&i.length>b.length&&i.substr(i.length-b.length,b.length)===b&&(i=i.substr(0,i.length-b.length)),""!==(i=g(i).replace(f("decimalSeparator"),"."))&&(i=String(parseFloat(i)))}if(i||"nu"===n||"nn"===n||0<=$.inArray(n,a.customUnaryOperations))e[u]=i,l[u]=n,o++;else if(e.hasOwnProperty(u)&&delete e[u],!s.stringResult&&!s.searchOperators&&"local"!==a.datatype)try{null!=a.postData&&a.postData.hasOwnProperty(u)&&delete a.postData[u]}catch(_){}});var n,u=0<o;if(s.stringResult||s.searchOperators||"local"===a.datatype){var p='{"groupOp":"'+s.groupOp+'","rules":[',h=0;$.each(e,function(e,t){0<h&&(p+=","),p+='{"field":"'+e+'",',p+='"op":"'+l[e]+'",',p+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',h++}),p+="]}",a.postData[s.sFilter]=p,$.each([s.sField,s.sValue,s.sOper],function(e,t){a.postData.hasOwnProperty(t)&&delete a.postData[t]})}else $.extend(a.postData,e);a.searchurl&&(n=a.url,i.jqGrid("setGridParam",{url:a.searchurl}));var f="stop"===i.triggerHandler("jqGridToolbarBeforeSearch");!f&&$.isFunction(s.beforeSearch)&&(f=s.beforeSearch.call(t)),f||i.jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[$.extend({page:1},s.reloadGridSearchOptions||{})]),n&&i.jqGrid("setGridParam",{url:n}),i.triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(s.afterSearch)&&s.afterSearch.call(t)},j=c("search.odata")||[],D=a.customSortOperations,R=[],q=$("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});s.loadFilterDefaults&&(v=_()||{}),$.each(d,function(e){var r,l,d,g,w,y,_,S=this,G="filter",O=S.searchoptions||{},k=S.editoptions||{},F=$("<th></th>",{class:getGuiStyles.call(t,"colHeaders","ui-th-column ui-th-"+a.direction+" "+(s.applyLabelClasses&&S.labelClasses||"")),role:"gridcell","aria-describedby":a.id+"_"+S.name}),I=$("<div></div>"),E=$("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),N=E.children("tbody").children("tr").children("td"),T=N.eq(0),A=N.eq(1),B=N.eq(2);if(!0===this.hidden&&F.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),r=$.extend({mode:G,name:S.name,cm:S,iCol:e,id:b(S.name)},O),this.search){if(s.searchOperators){for(g=a.search&&null!=v[this.name]?v[this.name].op:r.sopt?r.sopt[0]:"select"===S.stype||"checkbox"===S.stype?"eq":s.defaultSearch,w=0;w<j.length;w++)if(j[w].oper===g){d=s.operands[g]||"";break}if(void 0===d&&null!=D){for(z in D)if(D.hasOwnProperty(z)&&z===g){d=D[z].operand;break}}void 0===d&&(d="="),T.append("<a title='"+(null!=r.searchtitle?r.searchtitle:c("search.operandTitle"))+"' data-soper='"+g+"' class='"+getGuiStyles.call(t,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+d+"</a>")}if(T.data("colindex",e),null!=r.sopt&&1!==r.sopt.length||T.hide(),a.search&&null!=v[this.name]&&(r.defaultValue=v[this.name].data),void 0===r.clearSearch&&(r.clearSearch="text"===this.stype),r.clearSearch){var z,P,M,L,V=$.isFunction(s.resetTitle)?s.resetTitle.call(t,{options:s,cm:S,cmName:S.name,iCol:e}):(c("search.resetTitle")||"Clear Search Value")+" "+jgrid.stripHtml(a.colNames[e]);B.append("<a title='"+V+"' aria-label='"+V+"' class='"+getGuiStyles.call(t,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+s.resetIcon+"</span></a>")}else B.hide();switch(I.append(E),this.stype){case"checkbox":var H=void 0!==r.defaultValue?r.defaultValue:"-1";_=$("<input role='search' type='checkbox' class='"+m+"' name='"+(S.index||S.name)+"' id='"+b(S.name)+"' aria-labelledby='jqgh_"+a.id+"_"+S.name+"' data-state='"+H+"'/>"),"-1"===H?_.prop("indeterminate",!0):"1"===H&&_.prop("checked",!0),_.click(function(){var e=$(this);switch(e.data("state")){case -1:x(e,1);break;case 0:x(e,-1);break;default:x(e,0)}!0===s.autosearch&&C()}),A.append(_),r.attr&&_.attr(r.attr),R.push({elem:_[0],options:r});break;case"select":if(l=this.surl||r.dataUrl)$.ajax($.extend({url:l,context:{$tdInput:A,options:r,cm:S,iCol:e},dataType:"html",success:function(e,i,a){var o,l,n,d=this.cm,c=this.iCol,u=this.options,p=this.$tdInput;void 0!==u.buildSelect?(o=u.buildSelect.call(t,e,a,d,c))&&p.append(o):p.append(e),(n=p.children("select")).attr({name:d.index||d.name,id:b(d.name)}),u.attr&&n.attr(u.attr),n.addClass(m),n.css({width:"100%"}),0===n.find("option[value='']").length&&"string"==typeof r.noFilterText&&((l=document.createElement("option")).value="",l.innerHTML=r.noFilterText,n.prepend(l),null!=$(n[0].options[n[0].selectedIndex]).attr("selected")||n[0].multiple||(n[0].selectedIndex=0)),n[0].multiple&&0===n.find("option[selected]").length&&-1!==n[0].selectedIndex&&(n[0].options[n[0].selectedIndex].selected=!1),void 0!==u.defaultValue&&n.val(u.defaultValue),jgrid.bindEv.call(t,n[0],u),jgrid.fullBoolFeedback.call(t,u.selectFilled,"jqGridSelectFilled",{elem:n[0],options:u,cm:d,cmName:d.name,iCol:c,mode:G}),!0===s.autosearch&&n.change(function(){return C(),!1})}},jgrid.ajaxOptions,a.ajaxSelectOptions||{}));else if(S.searchoptions?(P=void 0===O.value?k.value||"":O.value,M=void 0===O.separator?k.separator||":":O.separator,L=void 0===O.delimiter?k.delimiter||";":O.delimiter):S.editoptions&&(P=void 0===k.value?"":k.value,M=void 0===k.separator?":":k.separator,L=void 0===k.delimiter?";":k.delimiter),O.generateValue&&null!=a.indexByColumnData[S.name]&&(P=t.generateValueFromColumnIndex(S.name,M,L)),P){if((y=document.createElement("select")).style.width="100%",_=$(y).attr({name:S.index||S.name,role:"search",id:b(S.name),"aria-describedby":a.id+"_"+S.name}),r.attr&&_.attr(r.attr),!jgrid.fillSelectOptions(y,P,M,L,null!=r.attr&&r.attr.multiple)&&"string"==typeof r.noFilterText){var W=document.createElement("option");W.value="",W.innerHTML=r.noFilterText,W.selected=!0,_.prepend(W)}void 0!==r.defaultValue&&_.val(r.defaultValue),_.addClass(m),R.push({elem:y,options:r}),A.append(y),jgrid.fullBoolFeedback.call(t,r.selectFilled,"jqGridSelectFilled",{elem:y,options:S.searchoptions||k,cm:S,cmName:S.name,iCol:e,mode:G}),!0===s.autosearch&&_.change(function(){return C(),!1})}break;case"text":if(_=$("<input role='search' type='text' class='"+m+"' name='"+(S.index||S.name)+"' id='"+b(S.name)+"' aria-labelledby='jqgh_"+a.id+"_"+S.name+"' value='"+(void 0!==r.defaultValue?r.defaultValue:"")+"'/>"),A.append(_),S.createColumnIndex&&r.generateDatalist){var U="dl_"+b(S.name),Y=i.jqGrid("generateDatalistFromColumnIndex",S.name);null!=Y&&0<Y.length&&(_.attr("list",U),A.append(Y.attr("id",U)))}r.attr&&_.attr(r.attr),R.push({elem:_[0],options:r}),!0===s.autosearch&&(s.searchOnEnter?_.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(C(),!1):this}):_.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:n&&clearTimeout(n),n=setTimeout(function(){C()},s.autosearchDelay)}}));break;case"custom":A.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(S.index||S.name)+"' id='"+b(S.name)+"'/>");try{if(!$.isFunction(r.custom_element))throw"e1";var X=r.custom_element.call(t,void 0!==r.defaultValue?r.defaultValue:"",r);if(!X)throw"e2";X=$(X).addClass("customelement"),I.find("span[name='"+(S.index||S.name)+"']").append(X)}catch(Q){"e1"===Q&&o.call(t,u,"function 'custom_element' "+h.nodefined,p),"e2"===Q?o.call(t,u,"function 'custom_element' "+h.novalue,p):o.call(t,u,"string"==typeof Q?Q:Q.message,p)}}}F.append(I),F.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){$(this).addClass(f)},function(){$(this).removeClass(f)}),q.append(F),s.searchOperators||T.hide()}),$(r.hDiv).find(">div>.ui-jqgrid-htable>thead").append(q),$.each(R,function(){jgrid.bindEv.call(t,this.elem,this.options)}),s.searchOperators&&($(".soptclass",q).click(function(e){var r=$(this).offset();(function(e,r,o){$("#sopt_menu").remove(),r=parseInt(r,10),o=parseInt(o,10)+18;var n,c,u=0,p=[],h=$(e).data("soper"),m=$(e).data("colname"),v=$(".ui-jqgrid-view").css("font-size")||"11px",b="<ul id='sopt_menu' class='"+getGuiStyles.call(t,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+v+";left:"+r+"px;top:"+o+"px;'>";if(void 0!==(u=a.iColByName[m])){var w,y,_,x,R,q=d[u],S=$.extend({},q.searchoptions);for(S.sopt||(S.sopt=[],S.sopt[0]="select"===q.stype||"checkbox"===q.stype?"eq":s.defaultSearch),$.each(j,function(){p.push(this.oper)}),null!=D&&$.each(D,function(e){p.push(e)}),u=0;u<S.sopt.length;u++)_=S.sopt[u],-1!==(c=$.inArray(_,p))&&(void 0!==(w=j[c])?(x=s.operands[_],R=w.text):null!=D&&(x=(y=D[_]).operand,R=y.text),n=h===_?g:"",b+='<li class="'+getGuiStyles.call(t,"searchToolbar.menuItem","ui-jqgrid-menu-item "+n)+'" role="presentation"><a class="'+getGuiStyles.call(t,"searchToolbar.menuItemButton","g-menu-item")+'" tabindex="0" role="menuitem" value="'+l(_)+'" data-oper="'+l(x)+'"><table><tr><td style="width:25px">'+l(x)+"</td><td>"+l(R)+"</td></tr></table></a></li>");b+="</ul>",$("body").append(b),$("#sopt_menu > li > a").hover(function(){$(this).addClass(f)},function(){$(this).removeClass(f)}).click(function(){var t=$(this).attr("value"),r=$(this).data("oper");if(i.triggerHandler("jqGridToolbarSelectOper",[t,r,e]),$("#sopt_menu").hide(),$(e).data("soper",t).text(r),!0===s.autosearch){var o=$(e).parent().next().children()[0];($(o).val()||"nu"===t||"nn"===t||0<=$.inArray(t,a.customUnaryOperations))&&C()}})}})(this,r.left,r.top),e.stopPropagation()}),$("body").on("click",function(e){"soptclass"!==e.target.className&&$("#sopt_menu").hide()})),$(".clearsearchclass",q).click(function(){var e,t,r=$(this).closest(".ui-search-clear"),i=r.siblings(".ui-search-oper"),o=i.children("a"),l=o.data("soper"),n=parseInt(i.data("colindex"),10),c=r.siblings(".ui-search-input"),u=d[n],p=$.extend({},u.searchoptions||{}),h=p.defaultValue||"";switch(u.stype){case"select":h?c.find("select").val(h):c.find("select")[0].selectedIndex=0;break;case"checkbox":x(c.find("input[type=checkbox]"),-1);break;default:c.find("input").val(h)}("nu"===l||"nn"===l||0<=$.inArray(l,a.customUnaryOperations))&&(e=p.sopt?p.sopt[0]:"select"===u.stype||"checkbox"===u.stype?"eq":s.defaultSearch,t=null!=D&&null!=D[e]?D[e].operand:s.operands[e]||"",o.data("soper",e).text(t)),!0===s.autosearch&&C()}),t.ftoolbar=!0,t.triggerToolbar=C,t.clearToolbar=function(e){var o,l={},n=0;e="boolean"!=typeof e||e,$.each(d,function(){var e,i,s=this,d=$(w(s.name),!0===s.frozen&&!0===a.frozenColumns?r.fhDiv:r.hDiv),c=s.searchoptions||{};switch(void 0!==c.defaultValue&&(e=c.defaultValue),o=s.index||s.name,s.stype){case"checkbox":x(d,-1);break;case"select":if(i=!(0<d.length&&d[0].multiple),d.find("option").each(function(t){if(this.selected=0===t&&i,$(this).val()===e)return this.selected=!0,!1}),void 0!==e)l[o]=e,n++;else try{delete a.postData[o]}catch(u){}break;case"text":if(d.val(e||""),void 0!==e)l[o]=e,n++;else try{delete a.postData[o]}catch(p){}break;case"custom":$.isFunction(c.custom_value)&&0<d.length&&"SPAN"===d[0].nodeName.toUpperCase()&&(void 0===e&&(e=""),c.custom_value.call(t,d.children(".customelement").first(),"set",e))}});var c,u=0<n;if(a.resetsearch=!0,s.stringResult||s.searchOperators||"local"===a.datatype){var p='{"groupOp":"'+s.groupOp+'","rules":[',h=0;$.each(l,function(e,t){0<h&&(p+=","),p+='{"field":"'+e+'",',p+='"op":"eq",',p+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',h++}),p+="]}",a.postData[s.sFilter]=p,$.each([s.sField,s.sValue,s.sOper],function(e,t){a.postData.hasOwnProperty(t)&&delete a.postData[t]})}else $.extend(a.postData,l);a.searchurl&&(c=a.url,i.jqGrid("setGridParam",{url:a.searchurl}));var f="stop"===i.triggerHandler("jqGridToolbarBeforeClear");!f&&$.isFunction(s.beforeClear)&&(f=s.beforeClear.call(t)),f||e&&i.jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[$.extend({page:1},s.reloadGridResetOptions||{})]),c&&i.jqGrid("setGridParam",{url:c}),i.triggerHandler("jqGridToolbarAfterClear"),$.isFunction(s.afterClear)&&s.afterClear.call(t)},t.toggleToolbar=function(){var e=$("tr.ui-search-toolbar",r.hDiv),t=!0===a.frozenColumns&&$("tr.ui-search-toolbar",r.fhDiv);"none"===e.css("display")?(e.show(),t&&t.show()):(e.hide(),t&&t.hide()),!0===a.frozenColumns&&(i.jqGrid("destroyFrozenColumns"),i.jqGrid("setFrozenColumns"))},!0===a.frozenColumns&&(i.jqGrid("destroyFrozenColumns"),i.jqGrid("setFrozenColumns")),i.on("jqGridRefreshFilterValues.filterToolbar"+(s.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var e,r,i,o,l,n,d,c=_(!0)||{};if(s.stringResult||s.searchOperators||"local"===a.datatype||!a.search){for(e in c)if(c.hasOwnProperty(e)&&(r=c[e],n=(i=$(w(e))).closest("th.ui-th-column"),0<i.length&&0<n.length)){if(d=(a.colModel[n[0].cellIndex]||{}).searchoptions||{},"SELECT"===i[0].tagName.toUpperCase()&&i[0].multiple)i.val(r.data.split(a.inFilterSeparator||","));else if(i.is("input[type=checkbox]")){var u=y(d);x(i,r.data===u.on?1:r.data===u.off?0:-1)}else if(0<i.find(".customelement").length&&$.isFunction(d.custom_value)){var p=d.custom_value.call(t,i.find(".customelement").first(),"get");""===r.data&&void 0!==d.defaultValue&&(r.data=d.defaultValue),void 0===p&&(p=""),r.data!==p&&String(r.data)!==String(p)&&d.custom_value.call(t,i.find(".customelement").first(),"set",r.data)}else""===r.data&&void 0!==d.defaultValue&&(r.data=d.defaultValue),$.trim(i.val())!==String(r.data)&&i.val(r.data);(o=i.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",r.op),o.text(s.operands[r.op]||(a.customSortOperations[r.op]||{}).operand)}for(l=0;l<a.colModel.length;l++)e=a.colModel[l].name,c.hasOwnProperty(e)||$(w(e)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var e=this;e.ftoolbar&&(e.triggerToolbar=null,e.clearToolbar=null,e.toggleToolbar=null,e.ftoolbar=!1,$(e.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===e.p.frozenColumns&&$(e).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(e){return void 0===e&&(e=!0),this.each(function(){var t,r,i,a,o,l=this.grid,n=this.p.colModel,s=$("table.ui-jqgrid-htable thead",l.hDiv);if(l){$(this).off(".setGroupHeaders");var d=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),c=l.headers;for(t=0,r=c.length;t<r;t++){o=n[t].hidden?"none":"",i=$(c[t].el).width(c[t].width).css("display",o);try{i.removeAttr("rowSpan")}catch(u){i.attr("rowSpan",1)}d.append(i),0<(a=i.children("span.ui-jqgrid-resize")).length&&(a[0].style.height=""),i.children("div")[0].style.top=""}$(s).children("tr.ui-jqgrid-labels").remove(),$(s).prepend(d),!0===e&&$(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(e){return e=$.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},e||{}),this.each(function(){this.p.groupHeader=e;var t,r,i,a,o,l,n,s,d,c,u,p,h,f,g=this,m=0,v=g.p,b=v.colModel,w=b.length,y=g.grid.headers,_=$("table.ui-jqgrid-htable",g.grid.hDiv),x=jgrid.isCellClassHidden,C=_.children("thead").children("tr.ui-jqgrid-labels"),j=C.last().addClass("jqg-second-row-header"),D=_.children("thead"),R=_.find(".jqg-first-row-header");void 0===R[0]?R=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):R.empty();var q=function(e,t){var r;for(r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0};for($(g).prepend(D),i=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),t=0;t<w;t++)if(l=$(o=y[t].el),r=b[t],n={height:"0",width:y[t].width+"px",display:r.hidden?"none":""},$("<th>",{role:"gridcell"}).css(n).addClass("ui-first-th-"+v.direction+(e.applyLabelClasses?" "+(r.labelClasses||""):"")).appendTo(R),o.style.width="",f=getGuiStyles.call(g,"colHeaders","ui-th-column-header ui-th-"+v.direction+" "+(e.applyLabelClasses&&r.labelClasses||"")),d=q(r.name,e.groupHeaders)){for(c=d.numberOfColumns,u=d.titleText,s=p=0;s<c&&t+s<w;s++)b[t+s].hidden||x(b[t+s].classes)||p++;a=$("<th>").addClass(f).html(u||"&nbsp;"),0<p&&a.attr("colspan",String(p)),v.headertitles&&a.attr("title",a.text()),0===p&&a.hide(),l.before(a),i.append(o),m=c-1}else 0===m?e.useColSpanStyle?l.attr("rowspan",C.length+1):($("<th>").addClass(f).css({display:r.hidden?"none":"","border-top":"0 none"}).insertBefore(l),i.append(o)):(i.append(o),m--);(h=$(g).children("thead")).prepend(R),i.insertAfter(j),_.prepend(h),$(g).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(0===e.length)return 0;var t,r=(e=e[0]).p.colModel,i=r.length,a=-1;for(t=0;t<i&&!0===r[t].frozen;t++)a=t;return a+1},setFrozenColumns:function(e){return e=e||{},this.each(function(){var t=this,r=$(t),i=t.p,a=t.grid;if(a&&null!=i&&!0!==i.frozenColumns){var o,l,n=i.colModel,s=n.length,d=-1,c=!1,u=[],p=jqID(i.id),h=getGuiStyles.call(t,"states.hover");if(!0!==i.subGrid&&!0!==i.treeGrid&&!i.scroll){for(o=0;o<s&&!0===n[o].frozen;o++)c=!0,d=o,u.push("#jqgh_"+p+"_"+jqID(n[o].name));if(i.sortable){l=$(a.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{l.sortable("destroy")}catch(f){}r.jqGrid("setGridParam",{sortable:{options:{items:0<u.length?">th:not(:has("+u.join(",")+"),:hidden)":">th:not(:hidden)"}}}),r.jqGrid("sortableColumns",l)}if(0<=d&&c){var g=i.caption?$(a.cDiv).outerHeight():0,m=$(".ui-jqgrid-htable",i.gView).height();i.toppager&&(g+=$(a.topDiv).outerHeight()),!0===i.toolbar[0]&&"bottom"!==i.toolbar[1]&&(g+=$(a.uDiv).outerHeight()),a.fhDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===i.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+g+"px;height:"+m+"px;' class='"+getGuiStyles.call(t,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),a.fbDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===i.direction?"right:0;":"left:0;")+"top:"+(parseInt(g,10)+parseInt(m,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),$(i.gView).append(a.fhDiv);var v=$(".ui-jqgrid-htable",i.gView).clone(!0),b=v[0].tHead.rows;if(i.groupHeader){$(b[0].cells).filter(":gt("+d+")").remove(),$(b).filter(".jqg-third-row-header").each(function(){$(this).children("th[id]").each(function(){var e,r=$(this).attr("id");r&&r.substr(0,t.id.length+1)===t.id+"_"&&(e=r.substr(t.id.length+1),i.iColByName[e]>d&&$(this).remove())})});var w,y=-1,_=-1;$(b).filter(".jqg-second-row-header").children("th").each(function(){if(w=parseInt($(this).attr("colspan")||1,10),1<parseInt($(this).attr("rowspan")||1,10)?(y++,_++):w&&(y+=w,_++),y===d)return!1}),y!==d&&(_=d),$(b).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){$(this).children(":gt("+_+")").remove()})}else $(b).each(function(){$(this).children(":gt("+d+")").remove()});if($(v).width(1),$(a.fhDiv).append(v).scroll(function(){this.scrollLeft=0}),i.footerrow){var x=$(".ui-jqgrid-bdiv",i.gView).height();a.fsDiv=$("<div style='position:absolute;"+("rtl"===i.direction?"right:0;":"left:0;")+"top:"+(parseInt(g,10)+parseInt(m,10)+parseInt(x,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),$(i.gView).append(a.fsDiv);var C=$(".ui-jqgrid-ftable",i.gView).clone(!0);$("tr",C).each(function(){$("td:gt("+d+")",this).remove()}),$(C).width(1),$(a.fsDiv).append(C)}$(i.gView).append(a.fbDiv),$(a.bDiv).scroll(function(){$(a.fbDiv).scrollTop($(this).scrollTop())}),$(a.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(r){a.bDiv.scrollTop+=$.isFunction(e.mouseWheel)?e.mouseWheel.call(t,r):"mousewheel"===r.type?-r.originalEvent.wheelDelta/10:6*r.originalEvent.detail}),!0===i.hoverrows&&$(i.idSel).off("mouseover.jqGrid mouseout.jqGrid");var j=function(e,t){var r=e.height();1<=Math.abs(r-t)&&0<t&&(e.height(t),1<=Math.abs(t-(r=e.height()))&&e.height(t+Math.round(t-r)))},D=function(e,t){var r=e.width();1<=Math.abs(r-t)&&(e.width(t),1<=Math.abs(t-(r=e.width()))&&e.width(t+Math.round(t-r)))},R=function(e,t,r,a){var l,n,s,d,c,u,p,h,f,g,m,v,b=$(t).position().top;if(null!=e&&0<e.length){if(e[0].scrollTop=t.scrollTop,e.css("rtl"===i.direction?{top:b,right:0}:{top:b,left:0}),s=e.children("table").children("thead").children("tr"),0===(d=$(t).children("div").children("table").children("thead").children("tr")).length&&0<e.children("table").length&&(s=$(e.children("table")[0].rows),d=$($(t).children("div").children("table")[0].rows)),g=0<(n=Math.min(s.length,d.length))?$(s[0]).position().top:0,m=0<n?$(d[0]).position().top:0,0<=r){for(0<=a&&(n=Math.min(a+1,n)),l=r;l<n;l++)if("none"!==(c=$(d[l])).css("display")&&c.is(":visible")){if(b=c.position().top,p=(u=$(s[l])).position().top,h=c.height(),null!=i.groupHeader&&i.groupHeader.useColSpanStyle)for(v=c[0].cells,o=0;o<v.length;o++)null!=(f=v[o])&&"TH"===f.nodeName.toUpperCase()&&(h=Math.max(h,$(f).height()));j(u,h+(b-m)+(g-p))}}j(e,t.clientHeight)}},q={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},S={header:q,resizeFooter:!0,body:q};r.on("jqGridAfterGridComplete.setFrozenColumns",function(){$(i.idSel+"_frozen").remove(),$(a.fbDiv).height(a.hDiv.clientHeight);var e=$(this).clone(!0),t=e[0].rows,o=r[0].rows;if($(t).filter("tr[role=row]").each(function(){$(this.cells).filter("td[role=gridcell]:gt("+d+")").remove()}),a.fbRows=t,e.width(1).attr("id",i.id+"_frozen"),e.appendTo(a.fbDiv),!0===i.hoverrows){var l=function(e,t,r){$(e)[t](h),$(r[e.rowIndex])[t](h)};$(t).filter(".jqgrow").hover(function(){l(this,"addClass",o)},function(){l(this,"removeClass",o)}),$(o).filter(".jqgrow").hover(function(){l(this,"addClass",t)},function(){l(this,"removeClass",t)})}R(a.fhDiv,a.hDiv,0,-1),R(a.fbDiv,a.bDiv,0,-1),a.sDiv&&R(a.fsDiv,a.sDiv,0,-1)});var G=function(e){$(a.fbDiv).scrollTop($(a.bDiv).scrollTop()),e.header.resizeDiv&&R(a.fhDiv,a.hDiv,e.header.resizedRows.iRowStart,e.header.resizedRows.iRowEnd),e.body.resizeDiv&&R(a.fbDiv,a.bDiv,e.body.resizedRows.iRowStart,e.body.resizedRows.iRowEnd),e.resizeFooter&&a.sDiv&&e.resizeFooter&&R(a.fsDiv,a.sDiv,0,-1);var t=a.fhDiv[0].clientWidth;e.header.resizeDiv&&null!=a.fhDiv&&1<=a.fhDiv.length&&j($(a.fhDiv),a.hDiv.clientHeight),e.body.resizeDiv&&null!=a.fbDiv&&0<a.fbDiv.length&&D($(a.fbDiv),t),e.resizeFooter&&null!=a.fsDiv&&0<=a.fsDiv.length&&D($(a.fsDiv),t)};$(i.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){G(S)},50)}),r.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var i=r.jqGrid("getInd",t);G({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:i,iRowEnd:i}}})}),r.on("jqGridResizeStop.setFrozenColumns",function(){G(S)}),r.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){G(t||S)}),a.hDiv.loading||setTimeout(function(){r.triggerHandler("jqGridAfterGridComplete")},0),i.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=$(this),t=this.grid,r=this.p,i=jqID(r.id);if(t&&!0===r.frozenColumns){if($(t.fhDiv).remove(),$(t.fbDiv).off(".setFrozenColumns"),$(t.fbDiv).remove(),t.fhDiv=null,t.fbDiv=null,t.fbRows=null,r.footerrow&&($(t.fsDiv).remove(),t.fsDiv=null),e.off(".setFrozenColumns"),!0===r.hoverrows){var a,o=getGuiStyles.call(this,"states.hover");e.on("mouseover.jqGrid",function(e){a=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(a).attr("class")&&$(a).addClass(o)}).on("mouseout.jqGrid",function(e){a=$(e.target).closest("tr.jqgrow"),$(a).removeClass(o)})}if(r.frozenColumns=!1,r.sortable){var l=$(t.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");l.sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+i+"_cb,#jqgh_"+i+"_rn,#jqgh_"+i+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",l)}}})}}),$.fn.jqFilter=function(e){if("string"==typeof e){var t=$.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var r=$.makeArray(arguments).slice(1);return t.apply(this,r)}var i=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"},],groupButton:!0,ruleButtons:!0,direction:"ltr"},jgrid.filter,e||{});return this.each(function(){if(!this.filter){null!==(this.p=i).filter&&void 0!==i.filter||(i.filter={groupOp:i.groupOps[0].op,rules:[],groups:[]});var e,t,r=i.columns.length,a=/msie/i.test(navigator.userAgent)&&!window.opera,o=$.isFunction,l=null!=jgrid.defaults&&o(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert,n=function(){return $("#"+jgrid.jqID(i.id))[0]||null},s=function(e,t){return $(n()).jqGrid("getGuiStyles",e,t||"")},d=function(e){return $(n()).jqGrid("getGridRes","search."+e)},c=function(e){var t=n(),r=t.p.iColByName[e];return void 0!==r?{cm:t.p.colModel[r],iCol:r}:void 0!==(r=t.p.iPropByName[e])?{cm:t.p.additionalProperties[r],iCol:r,isAddProp:!0}:{cm:null,iCol:-1}},u=s("states.error"),p=s("dialog.content");if(i.initFilter=$.extend(!0,{},i.filter),r){for(e=0;e<r;e++)(t=i.columns[e]).stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.cmName=t.name,t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={});i.showQuery&&$(this).append("<table class='queryresult "+p+"' style='display:block;max-width:440px;border:0px none;' dir='"+i.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var h=function(e,t){var r=[!0,""],a=n();if(o(t.searchrules))r=t.searchrules.call(a,e,t);else if(jgrid&&jgrid.checkValues)try{r=jgrid.checkValues.call(a,e,-1,t.searchrules,t.label)}catch(l){}r&&r.length&&!1===r[0]&&(i.error=!r[0],i.errmsg=r[1])};this.onchange=function(){return i.error=!1,i.errmsg="",!!o(i.onChange)&&i.onChange.call(n(),i,this)},this.reDraw=function(){$("table.group:first",this).remove();var e=this.createTableForGroup(i.filter,null);$(this).append(e),o(i.afterRedraw)&&i.afterRedraw.call(n(),i,this)},this.createTableForGroup=function(e,t){var r,a=this,o=$("<table class='"+s("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),l="left";"rtl"===i.direction&&(l="right",o.attr("dir","rtl")),null===t&&o.append("<tr class='error' style='display:none;'><th colspan='5' class='"+u+"' align='"+l+"'></th></tr>");var n=$("<tr></tr>");o.append(n);var c=$("<th colspan='5' align='"+l+"'></th>");if(n.append(c),!0===i.ruleButtons){var p=$("<select class='"+s("searchDialog.operationSelect","opsel")+"'></select>");c.append(p);var h,f="";for(r=0;r<i.groupOps.length;r++)h=e.groupOp===a.p.groupOps[r].op?" selected='selected'":"",f+="<option value='"+a.p.groupOps[r].op+"'"+h+">"+a.p.groupOps[r].text+"</option>";p.append(f).on("change",function(){e.groupOp=$(p).val(),a.onchange()})}var g,m,v,b="<span></span>";if(i.groupButton&&(b=$("<input type='button' value='+ {}' title='"+d("addGroupTitle")+"' class='"+s("searchDialog.addGroupButton","add-group")+"'/>")).on("click",function(){return void 0===e.groups&&(e.groups=[]),e.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),a.reDraw(),a.onchange(),!1}),c.append(b),!0===i.ruleButtons){var w,y=$("<input type='button' value='+' title='"+d("addRuleTitle")+"' class='"+s("searchDialog.addRuleButton","add-rule ui-add")+"'/>");y.on("click",function(){var t,i,o;for(void 0===e.rules&&(e.rules=[]),r=0;r<a.p.columns.length;r++)if(t=void 0===a.p.columns[r].search||a.p.columns[r].search,i=!0===a.p.columns[r].hidden,!0===a.p.columns[r].searchoptions.searchhidden&&t||t&&!i){w=a.p.columns[r];break}return o=w.searchoptions.sopt?w.searchoptions.sopt:a.p.sopt?a.p.sopt:-1!==$.inArray(w.searchtype,a.p.strarr)?a.p.stropts:a.p.numopts,e.rules.push({field:w.name,op:o[0],data:""}),a.reDraw(),!1}),c.append(y)}if(null!==t){var _=$("<input type='button' value='-' title='"+d("deleteGroupTitle")+"' class='"+s("searchDialog.deleteGroupButton","delete-group")+"'/>");c.append(_),_.on("click",function(){for(r=0;r<t.groups.length;r++)if(t.groups[r]===e){t.groups.splice(r,1);break}return a.reDraw(),a.onchange(),!1})}if(void 0!==e.groups)for(r=0;r<e.groups.length;r++)g=$("<tr></tr>"),o.append(g),m=$("<td class='first'></td>"),g.append(m),(v=$("<td colspan='4'></td>")).append(this.createTableForGroup(e.groups[r],e)),g.append(v);if(void 0===e.groupOp&&(e.groupOp=a.p.groupOps[0].op),void 0!==e.rules)for(r=0;r<e.rules.length;r++)o.append(this.createTableRowForRule(e.rules[r],e));return o},this.createTableRowForRule=function(e,t){var r,l,u,p,h=this,f=n(),g=$("<tr></tr>"),m="";g.append("<td class='first'></td>");var v=$("<td class='columns'></td>");g.append(v);var b,w=$("<select class='"+s("searchDialog.label","selectLabel")+"'></select>"),y=[];v.append(w),w.on("change",function(){e.field=$(w).val();var t,r,i=$(this).parents("tr:first");for(r=0;r<h.p.columns.length;r++)if(h.p.columns[r].name===e.field){t=h.p.columns[r];break}if(t){var n=$.extend({},t.editoptions||{});delete n.readonly,delete n.disabled;var d=$.extend({},n||{},t.searchoptions||{},c(t.cmName),{id:jgrid.randId(),name:t.name,mode:"search"});d.column=t,a&&"text"===t.inputtype&&(d.size||(d.size=10));var u=jgrid.createEl.call(f,t.inputtype,$.extend({},d,d.attr||{}),"",!0,h.p.ajaxSelectOptions||{},!0);$(u).addClass(s("searchDialog.elem","input-elm")),l=d.sopt?d.sopt:h.p.sopt?h.p.sopt:-1!==$.inArray(t.searchtype,h.p.strarr)?h.p.stropts:h.p.numopts;var p,g,m,v="",_=0;for(y=[],$.each(h.p.ops,function(){y.push(this.oper)}),h.p.cops&&$.each(h.p.cops,function(e){y.push(e)}),r=0;r<l.length;r++)g=l[r],-1!==(b=$.inArray(l[r],y))&&(m=void 0!==(p=h.p.ops[b])?p.text:h.p.cops[g].text,0===_&&(e.op=g),v+="<option value='"+g+"'>"+m+"</option>",_++);if($(".selectopts",i).empty().append(v),$(".selectopts",i)[0].selectedIndex=0,jgrid.msie&&9>jgrid.msiever()){var x=parseInt($("select.selectopts",i)[0].offsetWidth,10)+1;$(".selectopts",i).width(x),$(".selectopts",i).css("width","auto")}if($(".data",i).empty().append(u),t.createColumnIndex&&d.generateDatalist){var C="dl_"+u.id,j=$(f).jqGrid("generateDatalistFromColumnIndex",t.name);null!=j&&0<j.length&&($(u).attr("list",C),$(".data",i).append(j.attr("id",C)))}jgrid.bindEv.call(f,u,d),$(".input-elm",i).on("change",d,function(t){var r=t.target,i=t.data.column;e.data=i&&"custom"===i.inputtype&&o(i.searchoptions.custom_value)?i.searchoptions.custom_value.call(f,$(this).find(".customelement").first(),"get"):r.value,$(r).is("input[type=checkbox]")&&!$(r).is(":checked")&&(e.data=$(r).data("offval")),h.onchange()}),setTimeout(function(){e.data=$(u).val(),h.onchange()},0)}});var _,x,C=0;for(r=0;r<h.p.columns.length;r++)_=void 0===h.p.columns[r].search||h.p.columns[r].search,x=!0===h.p.columns[r].hidden,(!0===h.p.columns[r].searchoptions.searchhidden&&_||_&&!x)&&(p="",e.field===h.p.columns[r].name&&(p=" selected='selected'",C=r),m+="<option value='"+h.p.columns[r].name+"'"+p+">"+h.p.columns[r].label+"</option>");w.append(m);var j=$("<td class='operators'></td>");g.append(j),u=i.columns[C],a&&"text"===u.inputtype&&(u.searchoptions.size||(u.searchoptions.size=10));var D=$.extend({},u.editoptions||{});delete D.readonly,delete D.disabled;var R=$.extend({},D,u.searchoptions||{},c(u.cmName),{id:jgrid.randId(),name:u.name,mode:"search"});R.column=u;var q=jgrid.createEl.call(f,u.inputtype,$.extend({},R,R.attr||{}),e.data,!0,h.p.ajaxSelectOptions||{},!0);("nu"===e.op||"nn"===e.op||0<=$.inArray(e.op,f.p.customUnaryOperations))&&($(q).attr("readonly","true"),$(q).attr("disabled","true"));var S,G,O=$("<select class='"+s("searchDialog.operator","selectopts")+"'></select>");for(j.append(O),O.on("change",function(){e.op=$(O).val();var t=$(this).parents("tr:first"),r=$(".input-elm",t)[0];"nu"===e.op||"nn"===e.op||0<=$.inArray(e.op,f.p.customUnaryOperations)?(e.data="","SELECT"!==r.tagName.toUpperCase()&&(r.value=""),r.setAttribute("readonly","true"),r.setAttribute("disabled","true")):("SELECT"===r.tagName.toUpperCase()&&(e.data=r.value),r.removeAttribute("readonly"),r.removeAttribute("disabled")),h.onchange()}),l=u.searchoptions.sopt?u.searchoptions.sopt:h.p.sopt?h.p.sopt:-1!==$.inArray(u.searchtype,h.p.strarr)?h.p.stropts:h.p.numopts,m="",$.each(h.p.ops,function(){y.push(this.oper)}),h.p.cops&&$.each(h.p.cops,function(e){y.push(e)}),r=0;r<l.length;r++)G=l[r],-1!==(b=$.inArray(l[r],y))&&(S=h.p.ops[b],m+="<option value='"+G+"'"+(p=e.op===G?" selected='selected'":"")+">"+(void 0!==S?S.text:h.p.cops[G].text)+"</option>");O.append(m);var k=$("<td class='data'></td>");if(g.append(k),k.append(q),u.createColumnIndex&&u.searchoptions.generateDatalist){var F="dl_"+q.id,I=$(f).jqGrid("generateDatalistFromColumnIndex",u.name);null!=I&&0<I.length&&($(q).attr("list",F),k.append(I.attr("id",F)))}jgrid.bindEv.call(f,q,u.searchoptions),$(q).addClass(s("searchDialog.elem","input-elm")).on("change",function(){e.data="custom"===u.inputtype?u.searchoptions.custom_value.call(f,$(this).find(".customelement").first(),"get"):$(this).val(),$(this).is("input[type=checkbox]")&&!$(this).is(":checked")&&(e.data=$(this).data("offval")),$.isArray(e.data)&&(e.data=e.data.join(i.inFilterSeparator||",")),h.onchange()});var E=$("<td></td>");if(g.append(E),!0===i.ruleButtons){var N=$("<input type='button' value='-' title='"+d("deleteRuleTitle")+"' class='"+s("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>");E.append(N),N.on("click",function(){for(r=0;r<t.rules.length;r++)if(t.rules[r]===e){t.rules.splice(r,1);break}return h.reDraw(),h.onchange(),!1})}return g},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){1<r.length&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(i){l(i)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)1<r.length&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(a){l(a)}return"()"==(r+=")")?"":r},this.getStringForRule=function(e){var t,r,a,l="",s="",d=e.data;for(t=0;t<i.ops.length;t++)if(i.ops[t].oper===e.op){l=i.operands.hasOwnProperty(e.op)?i.operands[e.op]:"",s=i.ops[t].oper;break}if(""===s&&null!=i.cops){for(a in i.cops)if(i.cops.hasOwnProperty(a)&&(s=a,l=i.cops[a].operand,o(i.cops[a].buildQueryValue)))return i.cops[a].buildQueryValue.call(i,{cmName:e.field,searchValue:d,operand:l})}for(t=0;t<i.columns.length;t++)if(i.columns[t].name===e.field){r=i.columns[t];break}return null==r?"":("bw"!==s&&"bn"!==s||(d+="%"),"ew"!==s&&"en"!==s||(d="%"+d),"cn"!==s&&"nc"!==s||(d="%"+d+"%"),"in"!==s&&"ni"!==s||(d=" ("+d+")"),i.errorcheck&&h(e.data,r),-1!==$.inArray(r.searchtype,["int","integer","float","number","currency"])||"nn"===s||"nu"===s||0<=$.inArray(s,n().p.customUnaryOperations)?e.field+" "+l+" "+d:e.field+" "+l+' "'+d+'"')},this.resetFilter=function(){i.filter=$.extend(!0,{},i.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+u,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+u,this).html(i.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)},this.toString=function(){var e=this;function t(t){if(e.p.errorcheck){var r,i;for(r=0;r<e.p.columns.length;r++)if(e.p.columns[r].name===t.field){i=e.p.columns[r];break}i&&h(t.data,i)}return t.op+"(item."+t.field+",'"+t.data+"')"}return function e(r){var i,a="(";if(void 0!==r.groups)for(i=0;i<r.groups.length;i++)1<a.length&&("OR"===r.groupOp?a+=" || ":a+=" && "),a+=e(r.groups[i]);if(void 0!==r.rules)for(i=0;i<r.rules.length;i++)1<a.length&&("OR"===r.groupOp?a+=" || ":a+=" && "),a+=t(r.rules[i]);return"()"==(a+=")")?"":a}(i.filter)},this.reDraw(),i.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=$.parseJSON(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}});var xmlJsonClass={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var r=this.removeWhite(e),i=this.toObj(r),a=this.toJson(i,e.nodeName,"	");return"{\n"+t+(t?a.replace(/\t/g,t):a.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var r,i=function(e,t,r){var a,o,l,n,s="";if(e instanceof Array){if(0===e.length)s+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(a=0,o=e.length;a<o;a+=1)s+=r+i(e[a],t,r+"	")+"\n"}else if("object"==typeof e){for(n in l=!1,s+=r+"<"+t,e)e.hasOwnProperty(n)&&("@"===n.charAt(0)?s+=" "+n.substr(1)+'="'+e[n].toString()+'"':l=!0);if(s+=l?">":"/>",l){for(n in e)e.hasOwnProperty(n)&&("#text"===n?s+=e[n]:"#cdata"===n?s+="<![CDATA["+e[n]+"]]>":"@"!==n.charAt(0)&&(s+=i(e[n],n,r+"	")));s+=("\n"===s.charAt(s.length-1)?r:"")+"</"+t+">"}}else"function"==typeof e?s+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),'""'===e.toString()||0===e.toString().length?s+=r+"<"+t+">__EMPTY_STRING_</"+t+">":s+=r+"<"+t+">"+e.toString()+"</"+t+">");return s},a="";for(r in e)e.hasOwnProperty(r)&&(a+=i(e[r],r,""));return t?a.replace(/\t/g,t):a.replace(/\t|\n/g,"")},toObj:function(e){var t,r,i={},a=/function/i,o=0,l=0,n=!1;if(1===e.nodeType){if(e.attributes.length)for(t=0;t<e.attributes.length;t+=1)i["@"+e.attributes[t].nodeName]=(e.attributes[t].nodeValue||"").toString();if(e.firstChild){for(r=e.firstChild;r;r=r.nextSibling)1===r.nodeType?n=!0:3===r.nodeType&&r.nodeValue.match(/[^ \f\n\r\t\v]/)?o+=1:4===r.nodeType&&(l+=1);if(n){if(o<2&&l<2)for(this.removeWhite(e),r=e.firstChild;r;r=r.nextSibling)3===r.nodeType?i["#text"]=this.escape(r.nodeValue):4===r.nodeType?a.test(r.nodeValue)?i[r.nodeName]=[i[r.nodeName],r.nodeValue]:i["#cdata"]=this.escape(r.nodeValue):i[r.nodeName]?i[r.nodeName]instanceof Array?i[r.nodeName][i[r.nodeName].length]=this.toObj(r):i[r.nodeName]=[i[r.nodeName],this.toObj(r)]:i[r.nodeName]=this.toObj(r);else e.attributes.length?i["#text"]=this.escape(this.innerXml(e)):i=this.escape(this.innerXml(e))}else if(o)e.attributes.length?i["#text"]=this.escape(this.innerXml(e)):"__EMPTY_ARRAY_"===(i=this.escape(this.innerXml(e)))?i="[]":"__EMPTY_STRING_"===i&&(i="");else if(l){if(1<l)i=this.escape(this.innerXml(e));else for(r=e.firstChild;r;r=r.nextSibling){if(a.test(e.firstChild.nodeValue)){i=e.firstChild.nodeValue;break}i["#cdata"]=this.escape(r.nodeValue)}}}e.attributes.length||e.firstChild||(i=null)}else 9===e.nodeType?i=this.toObj(e.documentElement):(null!=$.jgrid&&null!=$.jgrid.defaults&&$.isFunction($.jgrid.defaults.fatalError)?$.jgrid.defaults.fatalError:alert)("unhandled node type: "+e.nodeType);return i},toJson:function(e,t,r,i){void 0===i&&(i=!0);var a,o,l,n=t?'"'+t+'"':"",s="	",d="\n",c=[],u=[];if(i||(d=s=""),"[]"===e)n+=t?":[]":"[]";else if(e instanceof Array){for(o=0,a=e.length;o<a;o+=1)c[o]=this.toJson(e[o],"",r+s,i);n+=(t?":[":"[")+(1<c.length?d+r+s+c.join(","+d+r+s)+d+r:c.join(""))+"]"}else if(null===e)n+=(t&&":")+"null";else if("object"==typeof e){for(l in e)e.hasOwnProperty(l)&&(u[u.length]=this.toJson(e[l],l,r+s,i));n+=(t?":{":"{")+(1<u.length?d+r+s+u.join(","+d+r+s)+d+r:u.join(""))+"}"}else n+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return n},innerXml:function(e){var t,r="",i=function(e){var t,r,a="";if(1===e.nodeType){for(a+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)a+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(a+=">",r=e.firstChild;r;r=r.nextSibling)a+=i(r);a+="</"+e.nodeName+">"}else a+="/>"}else 3===e.nodeType?a+=e.nodeValue:4===e.nodeType&&(a+="<![CDATA["+e.nodeValue+"]]>");return a};if(e.hasOwnProperty("innerHTML"))r=e.innerHTML;else for(t=e.firstChild;t;t=t.nextSibling)r+=i(t);return r},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,r=e.firstChild;r;)3===r.nodeType?r.nodeValue.match(/[^ \f\n\r\t\v]/)?r=r.nextSibling:(t=r.nextSibling,e.removeChild(r),r=t):(1===r.nodeType&&this.removeWhite(r),r=r.nextSibling);return e}};window.xmlJsonClass=xmlJsonClass;var jgridFeedback=jgrid.feedback,fullBoolFeedback=jgrid.fullBoolFeedback,builderFmButon=jgrid.builderFmButon,addFormIcon=function(e,t,r){var i;!0===t[0]&&(i="<span class='"+mergeCssClasses("fm-button-icon",r,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(i):e.addClass("fm-button-icon-left").prepend(i))},getGuiStateStyles=function(e){return getGuiStyles.call(this,"states."+e)},hideRowsWithoutVissibleCells=function(e){e.find("tr[data-rowpos]").each(function(){var e=0;$(this).children("td").each(function(){"hidden"!==$(this).css("visibility")&&e++}),e||$(this).hide()})},isEmptyString=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)};jgrid.extend({searchGrid:function(e){return this.each(function(){var t=this,r=$(t),i=t.p;if(t.grid&&null!=i){var a=$.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:i.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},base.getGridRes.call(r,"search"),jgrid.search||{},i.searching||{},e||{}),o="fbox_"+i.id,l=a.commonIconClass,n={themodal:"searchmod"+o,modalhead:"searchhd"+o,modalcontent:"searchcnt"+o,resizeAlso:o},s="#"+jqID(n.themodal),d=i.gBox,c=i.gView,u=$.each,p=i.postData[a.sFilter],h=function(){var e=$.makeArray(arguments);return e.unshift("Search"),e.unshift("Filter"),e.unshift(a),jgridFeedback.apply(t,e)},f=function(){jgrid.hideModal(s,{gb:d,jqm:a.jqModal,onClose:a.onClose,removemodal:a.removemodal})};if("string"==typeof p&&(p=""!==$.trim(p)?$.parseJSON(p):void 0),$(s).remove(),void 0!==$(s)[0])q($("#fbox_"+jqID(i.id)));else{var g=$("<div><div id='"+o+"' class='"+getGuiStyles.call(t,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(c);"rtl"===i.direction&&g.attr("dir","rtl");var m,v,b="",w="",y=!1,_=-1,x=$.extend([],i.colModel),C=builderFmButon.call(t,o+"_search",a.Find,mergeCssClasses(l,a.findDialogIcon),"right"),j=builderFmButon.call(t,o+"_reset",a.Reset,mergeCssClasses(l,a.resetDialogIcon),"left");if(a.showQuery&&(b=builderFmButon.call(t,o+"_query","Query",mergeCssClasses(l,a.queryDialogIcon),"left")+"&#160;"),a.searchForAdditionalProperties&&u(i.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,x.push(e)}),a.columns.length?m=(x=a.columns)[_=0].index||x[0].name:u(x,function(e,t){if(t.label||(t.label=t.isAddProp?t.name:i.colNames[e]),!y){var r=void 0===t.search||t.search,a=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!a)&&(y=!0,m=t.index||t.name,_=e)}}),!p&&m||!1===a.multipleSearch){var D="eq";0<=_&&x[_].searchoptions&&x[_].searchoptions.sopt?D=x[_].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(D=a.sopt[0]),p={groupOp:"AND",rules:[{field:m,op:D,data:""}]}}y=!1,a.tmplNames&&a.tmplNames.length&&(y=!0,w=a.tmplLabel,w+="<select class='ui-template'>",w+="<option value='default'>Default</option>",u(a.tmplNames,function(e,t){w+="<option value='"+e+"'>"+t+"</option>"}),w+="</select>"),v="<div class='"+getGuiStyles.call(t,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+o+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(t,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+i.direction+"'  style='float:"+("rtl"===i.direction?"right":"left")+";'>"+j+w+"</td><td class='EditButton EditButton-"+i.direction+"'>"+b+C+"</td></tr></tbody></table></div>",o=jqID(o),a.gbox=d,a.height="auto",$(o="#"+o).jqFilter({columns:x,filter:a.loadDefaults?p:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,ops:a.odata,cops:i.customSortOperations,operands:a.operands,ajaxSelectOptions:i.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(e,r){e.showQuery&&$(".query",r).text(r.toUserFriendlyString()),fullBoolFeedback.call(t,a.afterChange,"jqGridFilterAfterChange",$(o),a,e,r)},direction:i.direction,id:i.id}),g.append(v),y&&a.tmplFilters&&a.tmplFilters.length&&$(".ui-template",g).on("change",function(){var e=$(this).val();return"default"===e?$(o).jqFilter("addFilter",p):$(o).jqFilter("addFilter",a.tmplFilters[parseInt(e,10)]),!1}),!0===a.multipleGroup&&(a.multipleSearch=!0),h("onInitialize",$(o)),a.layer?jgrid.createModal.call(t,n,g,a,c,$(d)[0],"#"+jqID(a.layer),{position:"relative"}):jgrid.createModal.call(t,n,g,a,c,$(d)[0]),(a.searchOnEnter||a.closeOnEscape)&&$(s).keydown(function(e){var t=$(e.target);return!a.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?a.closeOnEscape&&27===e.which?($("#"+jqID(n.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($(o+"_search").click(),!1)}),b&&$(o+"_query").on("click",function(){return $(".queryresult",g).toggle(),!1}),void 0===a.stringResult&&(a.stringResult=a.multipleSearch),$(o+"_search").on("click",function(){var e,l={},n="",s=$(o),d=s.find(".input-elm");if(d.filter(":focus")&&(d=d.filter(":focus")),d.change(),e=s.jqFilter("filterData"),a.errorcheck&&(s[0].hideError(),a.showQuery||s.jqFilter("toSQLString"),s[0].p.error))return s[0].showError(),!1;if(a.stringResult||"local"===i.datatype){try{n=JSON.stringify(e)}catch(c){}"string"==typeof n&&(l[a.sFilter]=n,u([a.sField,a.sValue,a.sOper],function(){l[this]=""}))}else a.multipleSearch?(l[a.sFilter]=e,u([a.sField,a.sValue,a.sOper],function(){l[this]=""})):(l[a.sField]=e.rules[0].field,l[a.sValue]=e.rules[0].data,l[a.sOper]=e.rules[0].op,l[a.sFilter]="");return $.extend(i.postData,l),fullBoolFeedback.call(t,a.onSearch,"jqGridFilterSearch",i.filters)&&(i.search=!0,r.trigger("reloadGrid",[$.extend({page:1},a.reloadGridSearchOptions||{})])),a.closeAfterSearch&&f(),!1}),$(o+"_reset").on("click",function(){var e={},l=$(o);return i.search=!1,(i.resetsearch=!0,!1===a.multipleSearch)?e[a.sField]=e[a.sValue]=e[a.sOper]="":e[a.sFilter]="",l[0].resetFilter(),y&&$(".ui-template",g).val("default"),$.extend(i.postData,e),fullBoolFeedback.call(t,a.onReset,"jqGridFilterReset")&&r.trigger("reloadGrid",[$.extend({page:1},a.reloadGridResetOptions||{})]),a.closeAfterReset&&f(),!1}),q($(o));var R=getGuiStateStyles.call(t,"hover");$(".fm-button:not(."+getGuiStateStyles.call(t,"disabled").split(" ").join(".")+")",g).hover(function(){$(this).addClass(R)},function(){$(this).removeClass(R)})}}function q(e){h("beforeShow",e)&&($(s).data("onClose",a.onClose),jgrid.viewModal.call(t,s,{gbox:d,jqm:a.jqModal,overlay:a.overlay,modal:a.modal,overlayClass:a.overlayClass,toTop:a.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),h("afterShow",e))}})},editGridRow:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p;if(r.grid&&null!=a&&e){var o,l,n=a.id,s=base.getGridRes,d=base.setSelection,c=$.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",labelswidth:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:getGuiStyles.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:s.call(i,"defaults.savetext")||"Saving..."},s.call(i,"edit"),jgrid.edit,a.formEditing||{},t||{}),u="FrmGrid_"+n,p=u,h="TblGrid_"+n,f="#"+jqID(h),g=f+"_2",m={themodal:"editmod"+n,modalhead:"edithd"+n,modalcontent:"editcnt"+n,resizeAlso:u},v="#"+jqID(m.themodal),b=a.gBox,w=a.colModel,y=a.iColByName,_=1,x=0,C=c.commonIconClass,j=function(){jgrid.hideModal(v,{gb:b,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal})},D=s.call(i,"errors.errcap"),R=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("AddEdit"),e.unshift(c),jgridFeedback.apply(r,e)},q=getGuiStateStyles.call(r,"hover"),S=getGuiStateStyles.call(r,"disabled"),G=getGuiStateStyles.call(r,"select"),O=getGuiStateStyles.call(r,"active"),k=getGuiStateStyles.call(r,"error");$(v).remove(),u="#"+jqID(u),"new"===e?(e="_empty",l="add",c.caption=c.addCaption):(c.caption=c.editCaption,l="edit");var F=!0;!c.checkOnUpdate||!0!==c.jqModal&&void 0!==c.jqModal||c.modal||(F=!1);var I=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px",E=isNaN(c.datawidth)?c.datawidth:c.datawidth+"px",N=$("<form name='FormPost' id='"+p+"' class='FormGrid' onSubmit='return false;' style='width:"+E+";overflow:auto;position:relative;height:"+I+";'></form>").data("disabled",!1),T=$("<table id='"+h+"' class='EditTable'><tbody></tbody></table>");$(w).each(function(){var e=this.formoptions;_=Math.max(_,e&&e.colpos||0),x=Math.max(x,e&&e.rowpos||0)}),$(N).append(T);var A=$("<tr id='FormError' style='display:none'><td class='"+k+"' colspan='"+2*_+"'>&#160;</td></tr>");if(A[0].rp=0,$(T).append(A),(A=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*_+"'>"+(c.topinfo||"&#160;")+"</td></tr>"))[0].rp=0,$(T).append(A),R("beforeInitData",N,l)){!function(){var t=jgrid.detectRowEditing.call(r,e);if(null!=t){if("inlineEditing"===t.mode)base.restoreRow.call(i,e);else{var a=t.savedRow,o=r.rows[a.id];base.restoreCell.call(i,a.id,a.ic),$(o.cells[a.ic]).removeClass("edit-cell "+G),$(o).addClass(G).attr({"aria-selected":"true",tabindex:"0"})}}}();var B="rtl"===a.direction,z=B?"nData":"pData",P=B?"pData":"nData";!function(e,t,o){var l,s=0,d=[],p=!1,h=$(t),f=String(c.labelswidth)+(!c.labelswidth||isNaN(c.labelswidth)?"":"px"),g="<td class='CaptionTD"+(f?"' style='width:"+f+";":"")+"'>&#160;</td><td class='DataTD'>&#160;</td>",m="";for(l=1;l<=o;l++)m+=g;if("_empty"!==e&&(p=base.getInd.call(i,e)),$(w).each(function(t){var l,n,f,g,v,b=this,w=b.name,y=b.editable,_=!1,x=!1,C="_empty"===e?"addForm":"editForm";switch($.isFunction(y)&&(y=y.call(r,{rowid:e,iCol:t,iRow:p,cmName:w,cm:b,mode:C})),n=!(b.editrules&&!0===b.editrules.edithidden||!0!==b.hidden&&"hidden"!==y),String(y).toLowerCase()){case"hidden":y=!0;break;case"disabled":_=y=!0;break;case"readonly":x=y=!0}if("cb"!==w&&"subgrid"!==w&&!0===y&&"rn"!==w){if(!1===p)g="";else{l=$(r.rows[p].cells[t]);try{g=$.unformat.call(r,l,{rowId:e,colModel:b},t)}catch(j){g=b.edittype&&"textarea"===b.edittype?l.text():l.html()}isEmptyString(g)&&(g="")}var D=$.extend({},b.editoptions||{},{id:w,name:w,rowId:e,mode:C,cm:b,iCol:t}),R=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},b.formoptions||{}),q=parseInt(R.rowpos,10)||s+1,G=parseInt(2*(parseInt(R.colpos,10)||1),10);if("_empty"===e&&D.defaultValue&&(g=$.isFunction(D.defaultValue)?D.defaultValue.call(r):D.defaultValue),b.edittype||(b.edittype="text"),a.autoEncodeOnEdit&&(g=jgrid.oldDecodePostedData(g)),v=jgrid.createEl.call(r,b.edittype,D,g,!1,$.extend({},jgrid.ajaxOptions,a.ajaxSelectOptions||{})),(c.checkOnSubmit||c.checkOnUpdate)&&(c._savedData[w]=g),$(v).addClass("FormElement"),-1<$.inArray(b.edittype,["text","textarea","checkbox","password","select"])&&$(v).addClass(getGuiStyles.call(r,"dialog.dataField")),f=h.find("tr[data-rowpos="+q+"]"),R.rowabove){var O=$("<tr><td class='contentinfo' colspan='"+2*o+"'>"+R.rowcontent+"</td></tr>");h.append(O),O[0].rp=q}0===f.length&&(f=$("<tr data-rowpos='"+q+"'></tr>").addClass("FormData").attr("id","tr_"+w),$(f).append(m),h.append(f),f[0].rp=q);var k=$("td:eq("+(G-2)+")",f[0]),F=$("td:eq("+(G-1)+")",f[0]);k.html(void 0===R.label?a.colNames[t]:R.label||"&#160;");var I=F[isEmptyString(F.html())?"html":"append"](R.elmprefix);if(I.append(v).append(R.elmsuffix),"INPUT"===v.tagName.toUpperCase()&&b.createColumnIndex&&D.generateDatalist){var E=i.jqGrid("generateDatalistFromColumnIndex",b.name);null!=E&&0<E.length&&($(v).attr("list","dl_"+v.id),I.append(E.attr("id","dl_"+v.id)))}_?(k.addClass(S),F.addClass(S),$(v).prop("readonly",!0),$(v).prop("disabled",!0)):x&&$(v).prop("readonly",!0),"custom"===b.edittype&&$.isFunction(D.custom_value)&&D.custom_value.call(r,$("#"+jqID(w),u),"set",g),jgrid.bindEv.call(r,v,D),n&&k.add(F).css("visibility","hidden"),d[s]=t,s++}}),hideRowsWithoutVissibleCells(h),0<s){var v=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*o-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+n+"_id' value='"+e+"'/></td></tr>");v[0].rp=s+999,h.append(v),(c.checkOnSubmit||c.checkOnUpdate)&&(c._savedData[n+"_id"]=e)}}(e,T,_);var M=builderFmButon.call(r,z,"",mergeCssClasses(C,c.prevIcon),"","left"),L=builderFmButon.call(r,P,"",mergeCssClasses(C,c.nextIcon),"","right"),V=builderFmButon.call(r,"sData",c.bSubmit),H=builderFmButon.call(r,"cData",c.bCancel),W="<div class='"+getGuiStyles.call(r,"dialog.footer")+"'><table class='EditTable' id='"+h+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(r,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+a.direction+"'>"+(B?L+M:M+L)+"</td><td class='EditButton EditButton-"+a.direction+"'>"+V+"&#160;"+H+"</td></tr>";if(W+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(c.bottominfo||"&#160;")+"</td></tr>",W+="</tbody></table></div>",0<x){var U=[];$.each($(T)[0].rows,function(e,t){U[e]=t}),U.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(U,function(e,t){$("tbody",T).append(t)})}c.gbox=b;var Y=!1;!0===c.closeOnEscape&&(c.closeOnEscape=!1,Y=!0);var X=$("<div></div>").append($("<div class='"+getGuiStyles.call(r,"dialog.body")+"'></div>").append(N)).append(W);if(jgrid.createModal.call(r,m,X,c,a.gView,$(b)[0]),c.topinfo&&$(".tinfo",f).show(),c.bottominfo&&$(".binfo",g).show(),W=X=null,$(v).keydown(function(e){var t,r,i=(e.target.tagName||"").toUpperCase();if(!0===$(u).data("disabled"))return!1;if(13===e.which&&"TEXTAREA"!==i){if(r=(t=$(g).find(":focus")).attr("id"),0<t.length&&0<=$.inArray(r,["pData","nData","cData"]))return t.trigger("click"),!1;if(!0===c.savekey[0]&&13===c.savekey[1])return $("#sData",g).trigger("click"),!1}if(!0===c.savekey[0]&&e.which===c.savekey[1]&&"TEXTAREA"!==i)return $("#sData",g).trigger("click"),!1;if(27===e.which)return er()&&Y&&j(),!1;if(!0===c.navkeys[0]){if("_empty"===$("#id_g",f).val())return!0;if(e.which===c.navkeys[1])return $("#pData",g).trigger("click"),!1;if(e.which===c.navkeys[2])return $("#nData",g).trigger("click"),!1}}),c.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span",v).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close",v).off("click").click(function(){return er()&&j(),!1})),addFormIcon($("#sData",g),c.saveicon,C),addFormIcon($("#cData",g),c.closeicon,C),c.checkOnSubmit||c.checkOnUpdate){V=builderFmButon.call(r,"sNew",c.bYes),L=builderFmButon.call(r,"nNew",c.bNo),H=builderFmButon.call(r,"cNew",c.bExit);var Q=c.zIndex||999;Q++,$("<div class='"+c.overlayClass+" jqgrid-overlay confirm' style='z-index:"+Q+";display:none;'>&#160;</div><div class='"+getGuiStyles.call(r,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(Q+1)+"'>"+c.saveData+"<br/><br/>"+V+L+H+"</div>").insertAfter(u),$("#sNew",v).click(function(){return ee(),$(u).data("disabled",!1),$(".confirm",v).hide(),!1}),$("#nNew",v).click(function(){return $(".confirm",v).hide(),$(u).data("disabled",!1),setTimeout(function(){$(u).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),$("#cNew",v).click(function(){return $(".confirm",v).hide(),$(u).data("disabled",!1),j(),!1})}R("onInitializeForm",$(u),l),"_empty"!==e&&c.viewPagerButtons?$("#pData,#nData",g).show():$("#pData,#nData",g).hide(),R("beforeShowForm",$(u),l),$(v).data("onClose",c.onClose),jgrid.viewModal.call(r,v,{gbox:b,jqm:c.jqModal,overlay:c.overlay,modal:c.modal,overlayClass:c.overlayClass,toTop:c.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),F||$("."+jqID(c.overlayClass)).click(function(){return er()&&j(),!1}),$(".fm-button",v).hover(function(){$(this).addClass(q)},function(){$(this).removeClass(q)}),$("#sData",g).click(function(){return o={},$("#FormError",f).hide(),J(),"_empty"===o[n+"_id"]?ee():!0===c.checkOnSubmit&&et(o,c._savedData)?($(u).data("disabled",!0),$(".confirm",v).show()):ee(),!1}),$("#cData",g).click(function(){return er()&&j(),!1}),$("#nData",g).click(function(){if(!er())return!1;$("#FormError",f).hide();var e=ea();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!R("onclickPgButtons","next",$(u),e[1][e[0]]))return!1;K(e[1][e[0]+1],u),d.call(i,e[1][e[0]+1]),R("afterclickPgButtons","next",$(u),e[1][e[0]+1]),ei(e[0]+1,e)}return!1}),$("#pData",g).click(function(){if(!er())return!1;$("#FormError",f).hide();var e=ea();if(-1!==e[0]&&e[1][e[0]-1]){if(!R("onclickPgButtons","prev",$(u),e[1][e[0]])||hasOneFromClasses($("#"+jqID(e[1][e[0]-1])),S))return!1;K(e[1][e[0]-1],u),d.call(i,e[1][e[0]-1]),R("afterclickPgButtons","prev",$(u),e[1][e[0]-1]),ei(e[0]-1,e)}return!1}),R("afterShowForm",$(u),l);var Z=ea();ei(Z[0],Z)}}function J(){return $(f+" > tbody > tr > td .FormElement").each(function(){var e,t,a=$(".customelement",this),l=a.length?a.attr("name"):this.name,n=y[l],d=void 0!==n&&w[n]||{},u=d.editoptions||{};if(a.length&&$.isFunction(u.custom_value)){try{if(o[l]=u.custom_value.call(r,$("#"+jqID(l),f),"get"),void 0===o[l])throw"e1"}catch(p){"e1"===p?jgrid.info_dialog.call(r,D,"function 'custom_value' "+c.msg.novalue,c.bClose):jgrid.info_dialog.call(r,D,p.message,c.bClose)}return!0}switch(t=$(this)[0].type){case"checkbox":var h="string"==typeof u.value?u.value.split(":"):["Yes","No"];o[l]=$(this).is(":checked")?h[0]:h[1];break;case"select-one":o[l]=$("option:selected",this).val();break;case"select-multiple":o[l]=$(this).val(),o[l]=o[l]?o[l].join(","):"";var g=[];$("option:selected",this).each(function(e,t){g[e]=$(t).text()});break;case"date":o[l]=$(this).val(),3===String(o[l]).split("-").length&&(e=(d.formatoptions||{}).newformat||s.call(i,"formatter.date.newformat"),o[l]=jgrid.parseDate.call(i[0],"Y-m-d",o[l],e));break;default:void 0!==t&&0>$.inArray(t,c.skipPostTypes)&&(o[l]=$(this).val())}}),!0}function K(e,t){var o,l,s,d,u,p=0;(c.checkOnSubmit||c.checkOnUpdate)&&(c._savedData={},c._savedData[n+"_id"]=e);var h=a.colModel;if("_empty"===e)return $(h).each(function(){o=this.name,s=$.extend({},this.editoptions||{}),(l=$("#"+jqID(o),t))&&l.length&&null!==l[0]&&(d="","custom"===this.edittype&&$.isFunction(s.custom_value)?s.custom_value.call(r,l,"set",d):s.defaultValue?(d=$.isFunction(s.defaultValue)?s.defaultValue.call(r):s.defaultValue,"checkbox"===l[0].type?0>(u=d.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)&&""!==u?(l[0].checked=!0,l[0].defaultChecked=!0,l[0].value=d):(l[0].checked=!1,l[0].defaultChecked=!1):l.val(d)):"checkbox"===l[0].type?(l[0].checked=!1,l[0].defaultChecked=!1,d=$(l).data("offval")):l[0].type&&"select"===l[0].type.substr(0,6)?l[0].selectedIndex=0:l.val(d),(!0===c.checkOnSubmit||c.checkOnUpdate)&&(c._savedData[o]=d))}),void $("#id_g",t).val(e);var g=base.getInd.call(i,e,!0);g&&($(g.cells).filter("td[role=gridcell]").each(function(i){var l;if("cb"!==(o=h[i].name)&&"subgrid"!==o&&"rn"!==o&&!0===h[i].editable){try{l=$.unformat.call(r,$(this),{rowId:e,colModel:h[i]},i)}catch(n){l="textarea"===h[i].edittype?$(this).text():$(this).html()}switch(a.autoEncodeOnEdit&&(l=jgrid.oldDecodePostedData(l)),(!0===c.checkOnSubmit||c.checkOnUpdate)&&(c._savedData[o]=l),o="#"+jqID(o),h[i].edittype){case"password":case"text":case"button":case"image":case"textarea":isEmptyString(l)&&(l=""),$(o,t).val(l);break;case"select":var s=l.split(",");s=$.map(s,function(e){return $.trim(e)}),$(o+" option",t).each(function(){var e,t=this,r=$(t),a=$.trim(r.val());if(h[i].editoptions.multiple||s[0]!==a?h[i].editoptions.multiple&&-1<(e=$.inArray(a,s))?(s.splice(e,1),t.selected=!0):t.selected=!1:(s.splice(0,1),t.selected=!0),0===s.length)return!1}),0<s.length&&$(o+" option",t).each(function(){var e,t=$(this),r=$.trim(t.text());if(h[i].editoptions.multiple||$.trim(l)!==r&&s[0]!==r?h[i].editoptions.multiple&&-1<(e=$.inArray(r,s))&&(s.splice(e,1),this.selected=!0):(s.splice(0,1),this.selected=!0),0===s.length)return!1});break;case"checkbox":l=String(l),l=h[i].editoptions&&h[i].editoptions.value?h[i].editoptions.value.split(":")[0]===l:0>(l=l.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)&&""!==l,$(o,t).prop({checked:l,defaultChecked:l});break;case"custom":try{if(!h[i].editoptions||!$.isFunction(h[i].editoptions.custom_value))throw"e1";h[i].editoptions.custom_value.call(r,$(o,t),"set",l)}catch(d){"e1"===d?jgrid.info_dialog.call(r,D,"function 'custom_value' "+c.msg.nodefined,c.bClose):jgrid.info_dialog.call(r,D,d.message,c.bClose)}}p++}}),0<p&&$("#id_g",f).val(e))}function ee(){var t,s,p,h,m,v,b,y,_,x=[!0,"",""],C=x,D={},R=a.prmNames,q=base.getInd.call(i,e),S=!1===q?null:r.rows[q],G=i.triggerHandler("jqGridAddEditBeforeCheckValues",[o,$(u),l]);for(p in G&&"object"==typeof G&&(o=G),q=!1===q?-1:q,$.isFunction(c.beforeCheckValues)&&(G=c.beforeCheckValues.call(r,o,$(u),l))&&"object"==typeof G&&(o=G),o)if(o.hasOwnProperty(p)&&(y=a.iColByName[p],null!=(C=jgrid.checkValues.call(r,o[p],p,void 0,void 0,{oldValue:"_empty"===e?null:base.getCell.call(i,e,y),newValue:o[p],cmName:p,rowid:e,cm:w[y],iCol:y,iRow:q,tr:S,td:null==S?null:S.cells[y],mode:"_empty"===e?"addForm":"editForm"}))&&!0!==C||(C=x),!1===C[0]))break;if(_=c.url||a.editurl,$.each(w,function(e,t){var i=t.name;o.hasOwnProperty(i)&&("date"!==t.formatter||null!=t.formatoptions&&!0===t.formatoptions.sendFormatted||(o[i]=$.unformat.date.call(r,o[i],t)),"clientArray"!==_&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&""===o[i]&&(o[i]="null"))}),C[0]&&(void 0===(D=i.triggerHandler("jqGridAddEditClickSubmit",[c,o,l]))&&$.isFunction(c.onclickSubmit)&&(D=c.onclickSubmit.call(r,c,o,l)||{}),null!=(C=i.triggerHandler("jqGridAddEditBeforeSubmit",[o,$(u),l]))&&!0!==C||(C=x),C[0]&&$.isFunction(c.beforeSubmit)&&(null!=(C=c.beforeSubmit.call(r,o,$(u),l))&&!0!==C||(C=x))),C[0]&&!c.processing){if(c.processing=!0,$("#sData",g).addClass(O),v=c.url||a.editurl,s=R.oper,t="clientArray"===v&&!1!==a.keyName?a.keyName:R.id,o[s]="_empty"===$.trim(o[n+"_id"])?R.addoper:R.editoper,o[s]!==R.addoper?o[t]=o[n+"_id"]:void 0===o[t]&&(o[t]=o[n+"_id"]),delete o[n+"_id"],o=$.extend(o,c.editData,D),!0===a.treeGrid){for(m in o[s]===R.addoper&&(h=a.selrow,o["adjacency"===a.treeGridModel?a.treeReader.parent_id_field:"parent_id"]=h),a.treeReader)if(a.treeReader.hasOwnProperty(m)&&(b=a.treeReader[m],o.hasOwnProperty(b))){if(o[s]===R.addoper&&"parent_id_field"===m)continue;delete o[b]}}o[t]=jgrid.stripPref(a.idPrefix,o[t]),a.autoEncodeOnEdit&&$.each(o,function(e,t){$.isFunction(t)||(o[e]=jgrid.oldEncodePostedData(t))});var k=$.extend({url:$.isFunction(v)?v.call(r,o[t],l,o,c):v,type:$.isFunction(c.mtype)?c.mtype.call(r,l,c,o[t],o):c.mtype,data:jgrid.serializeFeedback.call(r,$.isFunction(c.serializeEditData)?c.serializeEditData:a.serializeEditData,"jqGridAddEditSerializeEditData",o),complete:function(e,p){if(i.jqGrid("progressBar",{method:"hide",loadtype:c.saveui}),$("#sData",g).removeClass(O),o[t]=$("#id_g",f).val(),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(C[0]=!1,C[1]=i.triggerHandler("jqGridAddEditErrorTextFormat",[e,l]),$.isFunction(c.errorTextFormat)?C[1]=c.errorTextFormat.call(r,e,l):C[1]=p+" Status: '"+e.statusText+"'. Error code: "+e.status):(null!=(C=i.triggerHandler("jqGridAddEditAfterSubmit",[e,o,l]))&&!0!==C||(C=x),C[0]&&$.isFunction(c.afterSubmit)&&(null!=(C=c.afterSubmit.call(r,e,o,l))&&!0!==C||(C=x))),!1===C[0])$("#FormError>td",f).html(C[1]),$("#FormError",f).show();else{a.autoEncodeOnEdit&&$.each(o,function(e,t){o[e]=jgrid.oldDecodePostedData(t)});var m,v=[$.extend({},c.reloadGridOptions||{})];if(o[s]===R.addoper?(C[2]||(C[2]=jgrid.randId()),null==o[t]||"_empty"===o[t]||o[s]===R.addoper?o[t]=C[2]:C[2]=o[t],c.reloadAfterSubmit?i.trigger("reloadGrid",v):!0===a.treeGrid?base.addChildNode.call(i,C[2],h,o):base.addRowData.call(i,C[2],o,c.addedrow),c.closeAfterAdd?(!0!==a.treeGrid&&d.call(i,C[2]),j()):c.clearAfterAdd&&K("_empty",u)):(c.reloadAfterSubmit?(i.trigger("reloadGrid",v),c.closeAfterEdit||setTimeout(function(){d.call(i,o[t])},1e3)):!0===a.treeGrid?base.setTreeRow.call(i,o[t],o):base.setRowData.call(i,o[t],o),c.closeAfterEdit&&j()),$.isFunction(c.afterComplete)){var b=e;setTimeout(function(){i.triggerHandler("jqGridAddEditAfterComplete",[b,o,$(u),l]),c.afterComplete.call(r,b,o,$(u),l),b=null},50)}if((c.checkOnSubmit||c.checkOnUpdate)&&($(u).data("disabled",!1),"_empty"!==c._savedData[n+"_id"]))for(m in c._savedData)c._savedData.hasOwnProperty(m)&&o[m]&&(c._savedData[m]=o[m])}c.processing=!1;try{$(u).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(w){}}},jgrid.ajaxOptions,c.ajaxEditOptions);if(k.url||c.useDataProxy||($.isFunction(a.dataProxy)?c.useDataProxy=!0:(C[0]=!1,C[1]+=" "+jgrid.errors.nourl)),C[0]){if(i.jqGrid("progressBar",{method:"show",loadtype:c.saveui,htmlcontent:c.savetext}),c.useDataProxy){var F=a.dataProxy.call(r,k,"set_"+n);void 0===F&&(F=[!0,""]),!1===F[0]?(C[0]=!1,C[1]=F[1]||"Error deleting the selected row!"):(k.data.oper===R.addoper&&c.closeAfterAdd&&j(),k.data.oper===R.editoper&&c.closeAfterEdit&&j())}else"clientArray"===k.url?(c.reloadAfterSubmit=!1,o=k.data,k.complete({status:200,statusText:""},"")):$.ajax(k)}}!1===C[0]&&($("#FormError>td",f).html(C[1]),$("#FormError",f).show())}function et(e,t){var r,i=!1;for(r in e)if(e.hasOwnProperty(r)&&String(e[r])!==String(t[r])){i=!0;break}return i}function er(){var e=!0;return $("#FormError",f).hide(),c.checkOnUpdate&&(o={},J(),et(o,c._savedData)&&($(u).data("disabled",!0),$(".confirm",v).show(),e=!1)),e}function ei(e,t){var r=t[1].length-1;0===e?$("#pData",g).addClass(S):void 0!==t[1][e-1]&&hasOneFromClasses($("#"+jqID(t[1][e-1])),S)?$("#pData",g).addClass(S):$("#pData",g).removeClass(S),e===r?$("#nData",g).addClass(S):void 0!==t[1][e+1]&&hasOneFromClasses($("#"+jqID(t[1][e+1])),S)?$("#nData",g).addClass(S):$("#nData",g).removeClass(S)}function ea(){var e=base.getDataIDs.call(i),t=$("#id_g",f).val();return[$.inArray(t,e),e]}})},viewGridRow:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p;if(r.grid&&null!=a&&e){var o=a.id,l=$.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},base.getGridRes.call(i,"view"),jgrid.view||{},a.formViewing||{},t||{}),n="#ViewGrid_"+jqID(o),s="#ViewTbl_"+jqID(o),d=s+"_2",c="ViewGrid_"+o,u="ViewTbl_"+o,p=l.commonIconClass,h={themodal:"viewmod"+o,modalhead:"viewhd"+o,modalcontent:"viewcnt"+o,resizeAlso:c},f="#"+jqID(h.themodal),g=a.gBox,m=a.colModel,v=1,b=0,w=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("View"),e.unshift(l),jgridFeedback.apply(r,e)},y=function(){jgrid.hideModal(f,{gb:g,jqm:l.jqModal,onClose:l.onClose,removemodal:l.removemodal})},_=getGuiStateStyles.call(r,"hover"),x=getGuiStateStyles.call(r,"disabled"),C=isNaN(l.dataheight)?l.dataheight:l.dataheight+"px",j=isNaN(l.datawidth)?l.datawidth:l.datawidth+"px",D=$("<div class='"+getGuiStyles.call(r,"dialog.body")+"'><form name='FormPost' id='"+c+"' class='FormGrid' style='width:"+j+";overflow:auto;position:relative;height:"+C+";'></form></div>"),R=D.children("form.FormGrid"),q=$("<table id='"+u+"' class='EditTable'><tbody></tbody></table>");if($(f).remove(),$(m).each(function(){var e=this.formoptions;v=Math.max(v,e&&e.colpos||0),b=Math.max(b,e&&e.rowpos||0)}),R.append(q),w("beforeInitData",R)){!function(e,t,o){var n,s,d,c,u,p,h,f,g=0,v=[],b=base.getInd.call(i,e),w=getGuiStyles.call(r,"dialog.viewData"),y=$(t),_=getGuiStyles.call(r,"dialog.viewLabel"),x=String(l.labelswidth)+(!l.labelswidth||isNaN(l.labelswidth)?"":"px"),C="<td class='"+getGuiStyles.call(r,"dialog.viewCellLabel","CaptionTD form-view-label")+(x?"' style='width:"+x+";":"")+"'>&#160;</td><td class='"+getGuiStyles.call(r,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",j="",D=["integer","number","currency"],R=0,q=0;for(u=0;u<o;u++)j+=C;if($(m).each(function(){var e=this;(s=(!e.editrules||!0!==e.editrules.edithidden)&&!0===e.hidden)||"right"!==e.align||(e.formatter&&-1!==$.inArray(e.formatter,D)?R=Math.max(R,parseInt(e.width,10)):q=Math.max(q,parseInt(e.width,10)))}),p=0!==R?R:0!==q?q:0,$(m).each(function(e){var t=this;if(n=t.name,h=!1,s=(!t.editrules||!0!==t.editrules.edithidden)&&!0===t.hidden,f="boolean"!=typeof t.viewable||t.viewable,"cb"!==n&&"subgrid"!==n&&"rn"!==n&&f){c=!1===b?"":jgrid.getDataFieldOfCell.call(r,r.rows[b],e).html(),h="right"===t.align&&0!==p;var i=$.extend({},{rowabove:!1,rowcontent:""},t.formoptions||{}),l=parseInt(i.rowpos,10)||g+1,u=parseInt(2*(parseInt(i.colpos,10)||1),10);if(i.rowabove){var m=$("<tr><td class='contentinfo' colspan='"+2*o+"'>"+i.rowcontent+"</td></tr>");y.append(m),m[0].rp=l}0===(d=y.find("tr[data-rowpos="+l+"]")).length&&((d=$("<tr data-rowpos='"+l+"'></tr>").addClass("FormData").attr("id","trv_"+n)).append(j),y.append(d),d[0].rp=l);var x=void 0===i.label?a.colNames[e]:i.label,C=$("td:eq("+(u-1)+")",d[0]),D=$("td:eq("+(u-2)+")",d[0]);D.html("<label for='"+n+"'"+(_?" class='"+_+"'>":">")+(x||"&nbsp;")+"</label>"),C[isEmptyString(C.html())?"html":"append"]("<span id='"+n+"'"+(w?" class='"+w+"'>":">")+(c||"&nbsp;")+"</span>").attr("id","v_"+n),h&&$("td:eq("+(u-1)+") span",d[0]).css({"text-align":"right",width:p+"px"}),s&&D.add(C).css("visibility","hidden"),v[g]=e,g++}}),hideRowsWithoutVissibleCells(y),0<g){var S=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*o-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");S[0].rp=g+99,y.append(S)}}(e,q,v);var S="rtl"===a.direction,G=S?"nData":"pData",O=S?"pData":"nData",k=builderFmButon.call(r,G,"",mergeCssClasses(p,l.prevIcon),"","left"),F=builderFmButon.call(r,O,"",mergeCssClasses(p,l.nextIcon),"","right"),I=builderFmButon.call(r,"cData",l.bClose);if(0<b){var E=[];$.each($(q)[0].rows,function(e,t){E[e]=t}),E.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(E,function(e,t){$("tbody",q).append(t)})}l.gbox=g;var N=$("<div></div>").append(D).append("<div class='"+getGuiStyles.call(r,"dialog.footer")+"'><table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+a.direction+"' width='"+(l.labelswidth||"auto")+"'>"+(S?F+k:k+F)+"</td><td class='EditButton EditButton-"+a.direction+"'>"+I+"</td></tr></tbody></table></div>");jgrid.createModal.call(r,h,N,l,a.gView,$(a.gView)[0]),l.viewPagerButtons||$("#pData, #nData",d).hide(),N=null,$(f).keydown(function(e){var t,r;if(!0===$(n).data("disabled"))return!1;if(13===e.which&&(r=(t=$(d).find(":focus")).attr("id"),0<t.length&&0<=$.inArray(r,["pData","nData","cData"])))return t.trigger("click"),!1;if(27===e.which)return l.closeOnEscape&&y(),!1;if(!0===l.navkeys[0]){if(e.which===l.navkeys[1])return $("#pData",d).trigger("click"),!1;if(e.which===l.navkeys[2])return $("#nData",d).trigger("click"),!1}}),addFormIcon($("#cData",d),l.closeicon,p),w("beforeShowForm",$(n)),jgrid.viewModal.call(r,f,{gbox:g,jqm:l.jqModal,overlay:l.overlay,toTop:l.toTop,modal:l.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+x.split(" ").join(".")+")",d).hover(function(){$(this).addClass(_)},function(){$(this).removeClass(_)}),A(),$("#cData",d).click(function(){return y(),!1}),$("#nData",d).click(function(){$("#FormError",s).hide();var e=P();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!w("onclickPgButtons","next",$(n),e[1][e[0]]))return!1;B(e[1][e[0]+1]),base.setSelection.call(i,e[1][e[0]+1]),w("afterclickPgButtons","next",$(n),e[1][e[0]+1]),z(e[0]+1,e)}return A(),!1}),$("#pData",d).click(function(){$("#FormError",s).hide();var e=P();if(-1!==e[0]&&e[1][e[0]-1]){if(!w("onclickPgButtons","prev",$(n),e[1][e[0]]))return!1;B(e[1][e[0]-1]),base.setSelection.call(i,e[1][e[0]-1]),w("afterclickPgButtons","prev",$(n),e[1][e[0]-1]),z(e[0]-1,e)}return A(),!1});var T=P();z(T[0],T)}}function A(){!0!==l.closeOnEscape&&!0!==l.navkeys[0]||setTimeout(function(){$("#cData").focus()},0)}function B(e){var t,a,o=0,l=base.getInd.call(i,e,!0);l&&($("td",l).each(function(e){"cb"!==(t=(a=m[e]).name)&&"subgrid"!==t&&"rn"!==t&&(t=jqID("v_"+t),$("#"+t+" span",s).html(jgrid.getDataFieldOfCell.call(r,l,e).html()),o++)}),0<o&&$("#id_g",s).val(e))}function z(e,t){var r=t[1].length-1;0===e?$("#pData",d).addClass(x):void 0!==t[1][e-1]&&hasOneFromClasses($("#"+jqID(t[1][e-1])),x)?$("#pData",d).addClass(x):$("#pData",d).removeClass(x),e===r?$("#nData",d).addClass(x):void 0!==t[1][e+1]&&hasOneFromClasses($("#"+jqID(t[1][e+1])),x)?$("#nData",d).addClass(x):$("#nData",d).removeClass(x)}function P(){var e=base.getDataIDs.call(i),t=$("#id_g",s).val();return[$.inArray(t,e),e]}})},delGridRow:function(e,t){return this.each(function(){var r=this,i=r.p,a=$(r);if(r.grid&&null!=i&&e){var o,l,n,s,d=i.id,c=$.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},idSeparator:",",onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1,delui:"disable",deltext:base.getGridRes.call(a,"defaults.deltext")||"Deleting..."},base.getGridRes.call(a,"del"),jgrid.del||{},i.formDeleting||{},t||{}),u="DelTbl_"+d,p="#DelTbl_"+jqID(d),h={themodal:"delmod"+d,modalhead:"delhd"+d,modalcontent:"delcnt"+d,resizeAlso:u},f="#"+jqID(h.themodal),g=i.gBox,m=c.commonIconClass,v=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("Delete"),e.unshift(c),jgridFeedback.apply(r,e)},b=getGuiStateStyles.call(r,"hover"),w=getGuiStateStyles.call(r,"active"),y=getGuiStateStyles.call(r,"error");if($.isArray(e)||(e=[String(e)]),void 0!==$(f)[0]){if(!v("beforeInitData",$(p)))return;$("#DelData>td",p).text(e.join(c.idSeparator)).data("rowids",e),$("#DelError",p).hide(),!0===c.processing&&(c.processing=!1,$("#dData",p).removeClass(w)),v("beforeShowForm",$(p)),jgrid.viewModal.call(r,f,{gbox:g,jqm:c.jqModal,jqM:!1,overlay:c.overlay,toTop:c.toTop,modal:c.modal}),v("afterShowForm",$(p))}else{var _=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px",x=isNaN(c.datawidth)?c.datawidth:c.datawidth+"px",C="<div class='"+getGuiStyles.call(r,"dialog.body")+"'><div id='"+u+"' class='formdata' style='width:"+x+";overflow:auto;position:relative;height:"+_+";'>";C+="<table class='DelTable'><tbody>",C+="<tr id='DelError' style='display:none'><td class='"+y+"'></td></tr>",C+="<tr id='DelData' style='display:none'><td >"+e.join(c.idSeparator)+"</td></tr>",C+="<tr><td class='delmsg'>"+c.msg+"</td></tr>",C+="</tbody></table></div></div>";var j=builderFmButon.call(r,"dData",c.bSubmit),D=builderFmButon.call(r,"eData",c.bCancel);if(C+="<div class='"+getGuiStyles.call(r,"dialog.footer")+"'><table class='EditTable' id='"+u+"_2'><tbody><tr><td><hr class='"+getGuiStyles.call(r,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+i.direction+"'>"+j+"&#160;"+D+"</td></tr></tbody></table></div>",c.gbox=g,jgrid.createModal.call(r,h,C,c,i.gView,$(i.gView)[0]),$("#DelData>td",p).data("rowids",e),!v("beforeInitData",$(C)))return;$(".fm-button",p+"_2").hover(function(){$(this).addClass(b)},function(){$(this).removeClass(b)}),addFormIcon($("#dData",p+"_2"),c.delicon,m),addFormIcon($("#eData",p+"_2"),c.cancelicon,m),$("#dData",p+"_2").click(function(){var e,t=[!0,""],u=$("#DelData>td",p),h=u.text(),m=u.data("rowids"),b={};if($.isFunction(c.onclickSubmit)&&(b=c.onclickSubmit.call(r,c,h,m)||{}),$.isFunction(c.beforeSubmit)&&(t=c.beforeSubmit.call(r,h,m)||t),t[0]&&!c.processing){if(c.processing=!0,n=i.prmNames,(o=$.extend({},c.delData,b))[s=n.oper]=n.deloper,l=n.id,!(h=m.slice()).length)return!1;for(e in h)h.hasOwnProperty(e)&&(h[e]=jgrid.stripPref(i.idPrefix,h[e]));o[l]=h.join(c.idSeparator),$(this).addClass(w);var y=c.url||i.editurl,_=$.extend({url:$.isFunction(y)?y.call(r,o[l],o,c,m):y,type:c.mtype,data:$.isFunction(c.serializeDelData)?c.serializeDelData.call(r,o,m):o,complete:function(e,l){var n;if(a.jqGrid("progressBar",{method:"hide",loadtype:c.delui}),$("#dData",p+"_2").removeClass(w),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(t[0]=!1,$.isFunction(c.errorTextFormat)?t[1]=c.errorTextFormat.call(r,e):t[1]=l+" Status: '"+e.statusText+"'. Error code: "+e.status):$.isFunction(c.afterSubmit)&&(t=c.afterSubmit.call(r,e,o,m)||[!0]),!1===t[0])$("#DelError>td",p).html(t[1]),$("#DelError",p).show();else{if("local"===i.datatype||!0===i.treeGrid||!c.reloadAfterSubmit){if(!0===i.treeGrid)try{base.delTreeNode.call(a,m[0])}catch(s){}else for(m=m.slice(),n=0;n<m.length;n++)base.delRowData.call(a,m[n])}c.reloadAfterSubmit&&a.trigger("reloadGrid",[$.extend({},c.reloadGridOptions||{})]),setTimeout(function(){v("afterComplete",e,h,$(p),m)},50)}c.processing=!1,t[0]&&jgrid.hideModal(f,{gb:g,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal})}},jgrid.ajaxOptions,c.ajaxDelOptions);if(_.url||c.useDataProxy||($.isFunction(i.dataProxy)?c.useDataProxy=!0:(t[0]=!1,t[1]+=" "+jgrid.errors.nourl)),t[0]){if(a.jqGrid("progressBar",{method:"show",loadtype:c.delui,htmlcontent:c.deltext}),c.useDataProxy){var x=i.dataProxy.call(r,_,"del_"+d);void 0===x&&(x=[!0,""]),!1===x[0]?(t[0]=!1,t[1]=x[1]||"Error deleting the selected row!"):jgrid.hideModal(f,{gb:g,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal})}else"clientArray"===_.url?(o=_.data,_.complete({status:200,statusText:""},"")):$.ajax(_)}}return!1===t[0]&&($("#DelError>td",p).html(t[1]),$("#DelError",p).show()),!1}),$("#eData",p+"_2").click(function(){return jgrid.hideModal(f,{gb:g,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal}),!1}),v("beforeShowForm",$(p)),jgrid.viewModal.call(r,f,{gbox:g,jqm:c.jqModal,overlay:c.overlay,toTop:c.toTop,modal:c.modal}),v("afterShowForm",$(p))}!0===c.closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+jqID(h.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(e,t,r,i,a,o,l){return"object"==typeof e&&(l=o,o=a,a=i,i=r,r=t,t=e,e=void 0),i=i||{},r=r||{},l=l||{},a=a||{},o=o||{},this.each(function(){var n=this,s=n.p,d=$(n);if(n.grid&&null!=s&&!(n.nav&&0<$(e).find(".navtable").length)){var c=s.id,u=$.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},base.getGridRes.call(d,"nav"),jgrid.nav||{},s.navOptions||{},t||{});u.position=u.position||("rtl"===s.direction?"right":"left");var p,h,f,g=s.idSel,m=s.gBox,v=u.commonIconClass,b={themodal:"alertmod_"+c,modalhead:"alerthd_"+c,modalcontent:"alertcnt_"+c},w=function(){var e=document.documentElement,t=window,r=1024,i=768,a=d.closest(".ui-jqgrid").offset();void 0===$("#"+jqID(b.themodal))[0]&&(u.alerttop||u.alertleft||(void 0!==t.innerWidth?(r=t.innerWidth,i=t.innerHeight):null!=e&&void 0!==e.clientWidth&&0!==e.clientWidth&&(r=e.clientWidth,i=e.clientHeight),r=r/2-parseInt(u.alertwidth,10)/2-a.left+(void 0!==t.pageXOffset?t.pageXOffset:(e||document.body.parentNode||document.body).scrollLeft),i=i/2-25-a.top+(void 0!==t.pageYOffset?t.pageYOffset:(e||document.body.parentNode||document.body).scrollTop)),jgrid.createModal.call(n,b,"<div class='"+getGuiStyles.call(n,"dialog.body")+"'><div>"+u.alerttext+"</div></div>",{gbox:m,jqModal:u.jqModal,drag:!0,resize:!0,caption:u.alertcap,top:null!=u.alerttop?u.alerttop:i,left:null!=u.alertleft?u.alertleft:r,width:u.alertwidth,height:u.alertheight,closeOnEscape:u.closeOnEscape,zIndex:u.alertzIndex,removemodal:u.removemodal},s.gView,$(m)[0],!1)),jgrid.viewModal.call(n,"#"+jqID(b.themodal),{gbox:m,toTop:u.alertToTop,jqm:u.jqModal});var o=$("#"+jqID(b.modalhead)).find(".ui-jqdialog-titlebar-close");o.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){o.focus()},50)},y=function(e){var t;if(13===e.which&&0<(t=$(this).find(".ui-pg-button").filter(":focus")).length){var r=t[0].id,i=r.substr(0,0<$(this).closest(".ui-jqgrid-toppager").length?r.length-c.length-5:r.length-c.length-1)+"mod"+s.id,a=$(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(0>$.inArray(i,a))return t.trigger("click"),!1}},_=getGuiStateStyles.call(n,"hover"),x=getGuiStateStyles.call(n,"disabled"),C=getGuiStyles.call(n,"navButton","ui-pg-button");if(n.grid){n.modalAlert=w,void 0===e&&(s.pager?(e=s.pager,s.toppager&&(u.cloneToTop=!0)):s.toppager&&(e=s.toppager));var j,D,R,q,S,G,O,k=1,F=["left","center","right"],I="<div class='"+getGuiStyles.call(n,"navButton","ui-pg-button "+getGuiStateStyles.call(n,"disabled"))+"'><span class='ui-separator'></span></div>",E=function(){hasOneFromClasses(this,x)||$(this).addClass(_)},N=function(){$(this).removeClass(_)},T=function(){return hasOneFromClasses(this,x)||($.isFunction(u.addfunc)?u.addfunc.call(n,i):base.editGridRow.call(d,"new",i)),!1},A=function(e,t,r){if(!hasOneFromClasses(this,x)){var i=s.selrow;i?$.isFunction(e)?e.call(n,i,r):base[t].call(d,i,r):w()}return!1},B=function(){return A.call(this,u.editfunc,"editGridRow",r)},z=function(){return A.call(this,u.viewfunc,"viewGridRow",l)},P=function(){var e;return hasOneFromClasses(this,x)||(s.multiselect?0===(e=s.selarrrow).length&&(e=null):e=s.selrow,e?$.isFunction(u.delfunc)?u.delfunc.call(n,e,a):base.delGridRow.call(d,e,a):w()),!1},M=function(){return hasOneFromClasses(this,x)||($.isFunction(u.searchfunc)?u.searchfunc.call(n,o):base.searchGrid.call(d,o)),!1},L=function(){if(!hasOneFromClasses(this,x)){$.isFunction(u.beforeRefresh)&&u.beforeRefresh.call(n),s.search=!1,s.resetsearch=!0;try{if("currentfilter"!==u.refreshstate){s.postData.filters="";try{$("#fbox_"+g).jqFilter("resetFilter")}catch(e){}$.isFunction(n.clearToolbar)&&n.clearToolbar(!1)}}catch(t){}switch(u.refreshstate){case"firstpage":d.trigger("reloadGrid",[$.extend({},u.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":d.trigger("reloadGrid",[$.extend({},u.reloadGridOptions||{},{current:!0})])}$.isFunction(u.afterRefresh)&&u.afterRefresh.call(n)}return!1},V=function(e,t,r){var i=$("<div class='"+C+"' tabindex='0' role='button'></div>"),a=u[e+"icon"],o=$.trim(u[e+"text"]);return i.append("<div class='ui-pg-div'><span class='"+(u.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",v,a):mergeCssClasses(v,a))+"'></span>"+(o?"<span class='ui-pg-button-text"+(u.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+o+"</span>":"")+"</div>"),$(f).append(i),i.attr({title:u[e+"title"]||"",id:t||e+"_"+q}).click(r).hover(E,N),i};for(u.cloneToTop&&s.toppager&&(k=2),j=0;j<k;j++){if(f=$("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===s.direction?"right":"left")+";table-layout:auto;'></div>"),0===j?(q=c,(R=e)===s.toppager&&(q+="_top",k=1)):(R=s.toppager,q=c+"_top"),u.add&&V("add",i.id,T),u.edit&&V("edit",r.id,B),u.view&&V("view",l.id,z),u.del&&V("del",a.id,P),(u.add||u.edit||u.del||u.view)&&$(f).append(I),u.search&&(D=V("search",o.id,M),o.showOnLoad&&!0===o.showOnLoad&&$(D,f).click()),u.refresh&&V("refresh","",L),h=$(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$("body").append("<div id='testpg2' class='"+getGuiStyles.call(n,"gBox","ui-jqgrid")+"' style='font-size:"+h+";visibility:hidden;' ></div>"),p=$(f).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(R+"_"+u.position,R).append(f),u.hideEmptyPagerParts)for(S=0;S<F.length;S++)F[S]===u.position||(0===(O=$(R+"_"+F[S],R)).length||0===O[0].childNodes.length?O.hide():1!==O[0].childNodes.length||$(G=O[0].firstChild).is("table.ui-pg-table")&&(0===G.rows||0===G.rows[0].cells.length)&&O.hide());s._nvtd&&(p>s._nvtd[0]&&($(R+"_"+u.position,R).width(p),s._nvtd[0]=p),s._nvtd[1]=p),n.nav=!0,f.on("keydown.jqGrid",y)}d.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(e,t){return"object"==typeof e&&(t=e,e=void 0),this.each(function(){var r=this,i=r.p;if(r.grid){var a=$.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},base.getGridRes.call($(r),"nav"),jgrid.nav||{},i.navOptions||{},t||{}),o=a.id,l=getGuiStateStyles.call(r,"hover"),n=getGuiStateStyles.call(r,"disabled"),s=getGuiStyles.call(r,"navButton","ui-pg-button");if(void 0===e){if(i.pager){if(base.navButtonAdd.call($(r),i.pager,a),!i.toppager)return;e=i.toppager,o&&(o+="_top")}else i.toppager&&(e=i.toppager)}"string"==typeof e&&0!==e.indexOf("#")&&(e="#"+jqID(e));var d=$(".navtable",e),c=a.commonIconClass;if(0<d.length){if(o&&0<d.find("#"+jqID(o)).length)return;var u=$("<div tabindex='0' role='button'></div>");"NONE"===a.buttonicon.toString().toUpperCase()?$(u).addClass(s).append("<div class='ui-pg-div'>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"):$(u).addClass(s).append("<div class='ui-pg-div'><span class='"+(a.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",c,a.buttonicon):mergeCssClasses(c,a.buttonicon))+"'></span>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"),o&&$(u).attr("id",o),"first"===a.position&&0<d.children("div.ui-pg-button").length?d.children("div.ui-pg-button").first().before(u):d.append(u),$(u,d).attr("title",a.title||"").click(function(e){return hasOneFromClasses(this,n)||$.isFunction(a.onClickButton)&&a.onClickButton.call(r,a,e),!1}).hover(function(){hasOneFromClasses(this,n)||$(this).addClass(l)},function(){$(this).removeClass(l)}),$(r).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(e,t){return t=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{}),this.each(function(){if(this.grid){var r=this.p,i=getGuiStyles.call(this,"navButton","ui-pg-button "+getGuiStateStyles.call(this,"disabled"));if(void 0===e){if(r.pager){if(base.navSeparatorAdd.call($(this),r.pager,t),!r.toppager)return;e=r.toppager}else r.toppager&&(e=r.toppager)}"string"==typeof e&&0!==e.indexOf("#")&&(e="#"+jqID(e));var a=$(".navtable",e);if(0<a.length){var o="<div class='"+i+"'><span class='"+t.sepclass+"'></span>"+t.sepcontent+"</div>";"first"===t.position?0===a.children("div.ui-pg-button").length?a.append(o):a.children("div.ui-pg-button").first().before(o):a.append(o)}}})},GridToForm:function(e,t){return this.each(function(){var r,i,a,o;if(this.grid){var l=base.getRowData.call($(this),e);if(l){for(r in l)if(l.hasOwnProperty(r)){if((i=$("[name="+jqID(r)+"]",t)).is("input:radio")||i.is("input:checkbox"))for(a=0;a<i.length;a++)(o=$(i[a])).prop("checked",o.val()===String(l[r]));else i.val(isEmptyString(l[r])?"":l[r])}}}})},FormToGrid:function(e,t,r,i){return this.each(function(){if(this.grid){r||(r="set"),i||(i="first");var a=$(t).serializeArray(),o={};$.each(a,function(e,t){o[t.name]=t.value}),"add"===r?base.addRowData.call($(this),e,o,i):"set"===r&&base.setRowData.call($(this),e,o)}})}}),jgrid.extend({groupingSetup:function(){return this.each(function(){var e,t,r,i,a,o=this.p,l=o.colModel,n=o.groupingView,s=function(){return""};if(null!==n&&("object"==typeof n||$.isFunction(n))){if(n.groupField.length){for(void 0===n.visibiltyOnNextGrouping&&(n.visibiltyOnNextGrouping=[]),n.lastvalues=[],n._locgr||(n.groups=[]),n.counters=[],e=0;e<n.groupField.length;e++)n.groupOrder[e]||(n.groupOrder[e]="asc"),n.groupText[e]||(n.groupText[e]="{0}"),"boolean"!=typeof n.groupColumnShow[e]&&(n.groupColumnShow[e]=!0),"boolean"!=typeof n.groupSummary[e]&&(n.groupSummary[e]=!1),n.groupSummaryPos[e]||(n.groupSummaryPos[e]="footer"),i=l[o.iColByName[n.groupField[e]]],!0===n.groupColumnShow[e]?(n.visibiltyOnNextGrouping[e]=!0,null!=i&&!0===i.hidden&&base.showCol.call($(this),n.groupField[e])):(n.visibiltyOnNextGrouping[e]=$("#"+jgrid.jqID(o.id+"_"+n.groupField[e])).is(":visible"),null!=i&&!0!==i.hidden&&base.hideCol.call($(this),n.groupField[e]));for(n.summary=[],n.hideFirstGroupCol&&(n.formatDisplayField[0]=function(e){return e}),t=0,r=l.length;t<r;t++)i=l[t],n.hideFirstGroupCol&&(i.hidden||n.groupField[0]!==i.name||(i.formatter=s)),i.summaryType&&(a={nm:i.name,st:i.summaryType,v:"",sr:i.summaryRound,srt:i.summaryRoundType||"round"},i.summaryDivider&&(a.sd=i.summaryDivider,a.vd=""),n.summary.push(a))}else o.grouping=!1}else o.grouping=!1})},groupingPrepare:function(e,t){return this.each(function(){var r,i,a,o,l,n,s,d,c,u=this,p=u.p,h=p.groupingView,f=h.groups,g=h.counters,m=h.lastvalues,v=h.isInTheSameGroup,b=h.groupField.length,w=!1,y=base.groupingCalculations.handler,_=function(){var t,r,i;for(t=0;t<l.summary.length;t++)r=l.summary[t],i=$.isArray(r.st)?r.st[o.idx]:r.st,$.isFunction(i)?r.v=i.call(u,r.v,r.nm,e,o):(r.v=y.call($(u),i,r.v,r.nm,r.sr,r.srt,e),"avg"===i.toLowerCase()&&r.sd&&(r.vd=y.call($(u),i,r.vd,r.sd,r.sr,r.srt,e)));return l.summary},x=function(e,t){if(null==e&&h.useDefaultValuesOnGrouping){var r,i=void 0!==p.iColByName[t]?p.colModel[p.iColByName[t]]:p.additionalProperties[p.iPropByName[t]];null!=i&&null!=i.formatter&&(null!=i.formatoptions&&void 0!==i.formatoptions.defaultValue?e=i.formatoptions.defaultValue:"string"==typeof i.formatter&&void 0!==(r=$(u).jqGrid("getGridRes","formatter."+i.formatter+".defaultValue"))&&(e=r))}return e};for(r=0;r<b;r++)if(s=x(e[n=h.groupField[r]],n),null==(c=null==(d=h.displayField[r])?null:x(e[d],d))&&(c=s),void 0!==s){for(a=[],i=0;i<=r;i++)a.push(e[h.groupField[i]]);for(o={idx:r,dataIndex:n,value:s,displayValue:c,startRow:t,cnt:1,keys:a,summary:[]},l={cnt:1,pos:f.length,summary:$.extend(!0,[],h.summary)},0===t?(f.push(o),m[r]=s,g[r]=l):"object"==typeof s||($.isArray(v)&&$.isFunction(v[r])?v[r].call(u,m[r],s,r,h):m[r]===s)?w?(f.push(o),m[r]=s,g[r]=l):((l=g[r]).cnt+=1,f[l.pos].cnt=l.cnt):(f.push(o),m[r]=s,w=!0,g[r]=l),f[l.pos].summary=_(),i=l.pos-1;0<=i;i--)if(f[i].idx<f[l.pos].idx){f[l.pos].parentGroupIndex=i,f[l.pos].parentGroup=f[i];break}}}),this},getGroupHeaderIndex:function(e,t){var r=this[0].p,i=t?$(t).closest("tr.jqgroup"):$("#"+jgrid.jqID(e)),a=parseInt(i.data("jqgrouplevel"),10),o=r.id+"ghead_"+a+"_";return isNaN(a)||!i.hasClass("jqgroup")||e.length<=o.length?-1:parseInt(e.substring(o.length),10)},groupingToggle:function(e,t){return this.each(function(){var r,i,a,o=this,l=o.p,n=l.groupingView,s=n.minusicon,d=n.plusicon,c=t?$(t).closest("tr.jqgroup"):$("#"+jgrid.jqID(e)),u=function(e){return e.find(">td>span.tree-wrap")},p=!0,h=!1,f=[],g=function(e){var t,r=e.length;for(t=0;t<r;t++)f.push(e[t])},m=parseInt(c.data("jqgrouplevel"),10);for(l.frozenColumns&&0<c.length&&(i=c[0].rowIndex,c=(c=$(o.rows[i])).add(o.grid.fbRows[i])),a=u(c),jgrid.hasAllClasses(a,s)?(a.removeClass(s).addClass(d),h=!0):a.removeClass(d).addClass(s),c=c.next();c.length;c=c.next())if(c.hasClass("jqfoot")){if(r=parseInt(c.data("jqfootlevel"),10),h){if(r=parseInt(c.data("jqfootlevel"),10),(!n.showSummaryOnHide&&r===m||m<r)&&g(c),r<m)break}else if((r===m||n.showSummaryOnHide&&r===m+1)&&g(c),r<=m)break}else if(c.hasClass("jqgroup")){if(r=parseInt(c.data("jqgrouplevel"),10),h){if(r<=m)break;g(c)}else{if(r<=m)break;r===m+1&&(u(c).removeClass(s).addClass(d),g(c)),p=!1}}else(h||p)&&g(c);$(f).css("display",h?"none":""),l.frozenColumns&&$(o).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:i,iRowEnd:c.length?c[0].rowIndex-1:-1}}},]),o.fixScrollOffsetAndhBoxPadding(),$(o).triggerHandler("jqGridGroupingClickGroup",[e,h]),$.isFunction(l.onClickGroup)&&l.onClickGroup.call(o,e,h)}),!1},groupingRender:function(e,t){var r="",i=this[0],a=i.p,o=0,l=[],n=a.groupingView,s=$.makeArray(n.groupSummary),d=n.groupField.length,c=n.groups,u=a.colModel,p=u.length,h=a.page,f="jqGridShowHideCol.groupingRender",g=function(e){return base.getGuiStyles.call(i,"gridRow",e)},m=g("jqgroup ui-row-"+a.direction),v=g("jqfoot ui-row-"+a.direction);function b(e,t,r,o,l){var s,d,h,f,g,m,v,b,w,y,_,x,C,j=c[e],D="",R=0,q=!0;if(0!==t&&0!==c[e].idx){for(s=e;0<=s;s--)if(c[s].idx===c[e].idx-t){j=c[s];break}}for(d=j.cnt,_=void 0===l?o:0;_<p;_++){for(h="&#160;",y=u[_],b=0;b<j.summary.length;b++)if(w=j.summary[b],x=$.isArray(w.st)?w.st[r.idx]:w.st,C=$.isArray(y.summaryTpl)?y.summaryTpl[r.idx]:y.summaryTpl||"{0}",w.nm===y.name){"string"==typeof x&&"avg"===x.toLowerCase()&&(w.sd&&w.vd?w.v=w.v/w.vd:w.v&&0<d&&(w.v=w.v/d));try{w.groupCount=j.cnt,w.groupIndex=j.dataIndex,w.groupValue=j.value,m=i.formatter("",w.v,_,w)}catch(S){m=w.v}h=jgrid.format(C,m),y.summaryFormat&&(h=y.summaryFormat.call(i,r,h,m,y,w));break}g=f=!1,void 0!==l&&q&&(y.hidden||(h=l,q=!1,1<o&&(f=!0,R=o-1),g=y.align,y.align="rtl"===a.direction?"right":"left",n.iconColumnName=y.name)),v=!1,0<R&&!y.hidden&&"&#160;"===h?(v=!0,g&&(y.align=g),R--):(D+="<td role='gridcell' "+i.formatCol(_,1,"")+(f?"colspan='"+o+"'":"")+">"+h+"</td>",f=!1,g&&(y.align=g),v&&(y.hidden=!1,R--))}return D}return $.each(u,function(e,t){var r;for(r=0;r<d;r++)if(n.groupField[r]===t.name){l[r]=e;break}}),s.reverse(),$.each(c,function(f,g){var w,y,_,x,C,j,D,R,q=a.id+"ghead_"+g.idx,S=q+"_"+f,G=$.isFunction(n.groupCollapse)?n.groupCollapse.call(i,{group:g,rowid:S}):n.groupCollapse,O=1,k=0,F=d-1===g.idx,I=null!=g.parentGroup&&g.parentGroup.collapsed,E="<span style='cursor:pointer;margin-"+("rtl"===a.direction?"right:":"left:")+12*g.idx+"px;' class='"+n.commonIconClass+" "+(G?n.plusicon:n.minusicon)+" tree-wrap'></span>";if(n._locgr&&!(g.startRow+g.cnt>(h-1)*t&&g.startRow<h*t))return!0;I&&(G=!0),void 0!==G&&(g.collapsed=G),o++;try{$.isArray(n.formatDisplayField)&&$.isFunction(n.formatDisplayField[g.idx])?(g.displayValue=n.formatDisplayField[g.idx].call(i,g.displayValue,g.value,u[l[g.idx]],g.idx,g,f),w=g.displayValue):w=i.formatter(S,g.displayValue,l[g.idx],g.value,g)}catch(N){w=g.displayValue}if(r+="<tr id='"+S+"' data-jqgrouplevel='"+g.idx+"' "+(G&&I?"style='display:none;' ":"")+"role='row' class='"+m+" "+q+"'>","string"!=typeof(R=$.isFunction(n.groupText[g.idx])?n.groupText[g.idx].call(i,w,g.cnt,g.summary):jgrid.template(n.groupText[g.idx],w,g.cnt,g.summary))&&"number"!=typeof R&&(R=w),"header"===n.groupSummaryPos[g.idx]?(O=1,"cb"!==u[0].name&&"cb"!==u[1].name||O++,"subgrid"!==u[0].name&&"subgrid"!==u[1].name||O++,r+=b(f,0,g,O,E+"<span class='cell-wrapper'>"+R+"</span>")):r+="<td role='gridcell' style='padding-left:"+12*g.idx+"px;' colspan='"+p+"'>"+E+R+"</td>",r+="</tr>",F){for(j=c[f+1],C=g.startRow,D=void 0!==j?j.startRow:c[f].startRow+c[f].cnt,n._locgr&&(k=(h-1)*t)>g.startRow&&(C=k),_=C;_<D&&e[_-k];_++)r+=e[_-k].join("");if("header"!==n.groupSummaryPos[g.idx]){if(void 0!==j){for(y=0;y<n.groupField.length&&j.dataIndex!==n.groupField[y];y++);o=n.groupField.length-y}for(x=0;x<o;x++)s[x]&&(r+="<tr data-jqfootlevel='"+(g.idx-x)+(G&&(0<g.idx-x||!n.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+v+"'>",r+=b(f,x,c[g.idx-x],0),r+="</tr>");o=y}}}),this.off(f).on(f,function(){var e,t,r,o,l=a.iColByName[n.iconColumnName];if(0<=$.inArray("header",n.groupSummaryPos)){for(o=0;o<u.length;o++)if(!u[o].hidden){r=o;break}if(void 0===r||l===r)return;for(e=0;e<i.rows.length;e++)$(t=i.rows[e]).hasClass("jqgroup")&&($(t.cells[r]).html(t.cells[l].innerHTML),$(t.cells[l]).html("&nbsp;"));n.iconColumnName=u[r].name}}),r},groupingGroupBy:function(e,t){return this.each(function(){var r,i,a=this.p,o=a.groupingView;for("string"==typeof e&&(e=[e]),a.grouping=!0,o._locgr=!1,void 0===o.visibiltyOnNextGrouping&&(o.visibiltyOnNextGrouping=[]),r=0;r<o.groupField.length;r++)i=a.colModel[a.iColByName[o.groupField[r]]],!o.groupColumnShow[r]&&o.visibiltyOnNextGrouping[r]&&null!=i&&!0===i.hidden&&base.showCol.call($(this),o.groupField[r]);for(r=0;r<e.length;r++)o.visibiltyOnNextGrouping[r]=$(a.idSel+"_"+jgrid.jqID(e[r])).is(":visible");a.groupingView=$.extend(a.groupingView,t||{}),o.groupField=e,$(this).trigger("reloadGrid")})},groupingRemove:function(e){return this.each(function(){var t,r=this.p,i=this.tBodies[0],a=r.groupingView;if(void 0===e&&(e=!0),r.grouping=!1,!0===e){for(t=0;t<a.groupField.length;t++)!a.groupColumnShow[t]&&a.visibiltyOnNextGrouping[t]&&base.showCol.call($(this),a.groupField);$("tr.jqgroup, tr.jqfoot",i).remove(),$("tr.jqgrow",i).filter(":hidden").show()}else $(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,a,o){var l,n,s={sum:function(){return parseFloat(t||0)+parseFloat(o[r]||0)},min:function(){return""===t?parseFloat(o[r]||0):Math.min(parseFloat(t),parseFloat(o[r]||0))},max:function(){return""===t?parseFloat(o[r]||0):Math.max(parseFloat(t),parseFloat(o[r]||0))},count:function(){return""===t&&(t=0),o.hasOwnProperty(r)?t+1:0},avg:function(){return s.sum()}};if(!s[e])throw"jqGrid Grouping No such method: "+e;return l=s[e](),null!=i&&(l="fixed"===a?l.toFixed(i):Math.round(l*(n=Math.pow(10,i)))/n),l}}}),$.jgrid.extend({jqGridImport:function(e){return e=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},e||{}),this.each(function(){var t,r=this,i=function(e,t){var i,a,o,l,n=$(t.xmlGrid.config,e)[0],s=$(t.xmlGrid.data,e)[0];if(xmlJsonClass.xml2json){for(o in i=xmlJsonClass.xml2json(n," "),i=$.parseJSON(i))i.hasOwnProperty(o)&&(a=i[o]);void 0!==a&&(s?(l=i.grid.datatype,i.grid.datatype="xmlstring",i.grid.datastr=e,$(r).jqGrid(a).jqGrid("setGridParam",{datatype:l})):$(r).jqGrid(a))}else(null!=jgrid.defaults&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("xml2json or parse are not present")},a=function(e,t){if(e&&"string"==typeof e){var i,a=$.parseJSON(e),o=a[t.jsonGrid.config],l=a[t.jsonGrid.data];l?(i=o.datatype,o.datatype="jsonstring",o.datastr=l,$(r).jqGrid(o).jqGrid("setGridParam",{datatype:i})):$(r).jqGrid(o)}};switch(e.imptype){case"xml":$.ajax($.extend({url:e.impurl,type:e.mtype,data:e.impData,dataType:"xml",context:e,complete:function(e){!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(i(e.responseXML,this),$(r).triggerHandler("jqGridImportComplete",[e,this]),$.isFunction(this.importComplete)&&this.importComplete(e))}},e.ajaxOptions));break;case"xmlstring":e.impstring&&"string"==typeof e.impstring&&(t=$.parseXML(e.impstring))&&(i(t,e),$(r).triggerHandler("jqGridImportComplete",[t,e]),$.isFunction(e.importComplete)&&e.importComplete(t),e.impstring=null);break;case"json":$.ajax($.extend({url:e.impurl,type:e.mtype,data:e.impData,dataType:"json",context:e,complete:function(e){try{!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(a(e.responseText,this),$(r).triggerHandler("jqGridImportComplete",[e,this]),$.isFunction(this.importComplete)&&this.importComplete(e))}catch(t){}}},e.ajaxOptions));break;case"jsonstring":e.impstring&&"string"==typeof e.impstring&&(a(e.impstring,e),$(r).triggerHandler("jqGridImportComplete",[e.impstring,e]),$.isFunction(e.importComplete)&&e.importComplete(e.impstring),e.impstring=null)}})},jqGridExport:function(e){e=$.extend({exptype:"xmlstring",root:"grid",ident:"	"},e||{});var t=null;return this.each(function(){if(this.grid){var r,i=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(i.rownumbers&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.multiselect&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.subGrid&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.knv=null,i.treeGrid)for(r in i.treeReader)i.treeReader.hasOwnProperty(r)&&(i.colNames.splice(i.colNames.length-1),i.colModel.splice(i.colModel.length-1));switch(e.exptype){case"xmlstring":t="<"+e.root+">"+xmlJsonClass.json2xml(i,e.ident)+"</"+e.root+">";break;case"jsonstring":t="{"+xmlJsonClass.toJson(i,e.root,e.ident,!1)+"}",void 0!==i.postData.filters&&(t=(t=t.replace(/filters":"/,'filters":')).replace(/\}\]\}"/,"}]}"))}}}),t},excelExport:function(e){return e=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},e||{}),this.each(function(){var t;this.grid&&"remote"===e.exptype&&((t=$.extend({},this.p.postData,e.exportOptions))[e.oper]=e.tag,window.location=e.url+(null!=e.url&&0<=e.url.indexOf("?")?"&":"?")+$.param(t))})}});var editFeedback=function(e){var t=$.makeArray(arguments).slice(1);return t.unshift(""),t.unshift("Inline"),t.unshift(e),jgrid.feedback.apply(this,t)};jgrid.inlineEdit=jgrid.inlineEdit||{},jgrid.extend({editRow:function(e,t,r,i,a,o,l,n,s,d){var c={},u=$.makeArray(arguments).slice(1);return"object"===$.type(u[0])?c=u[0]:(void 0!==t&&(c.keys=t),$.isFunction(r)&&(c.oneditfunc=r),$.isFunction(i)&&(c.successfunc=i),void 0!==a&&(c.url=a),null!=o&&(c.extraparam=o),$.isFunction(l)&&(c.aftersavefunc=l),$.isFunction(n)&&(c.errorfunc=n),$.isFunction(s)&&(c.afterrestorefunc=s),$.isFunction(d)&&(c.beforeEditRow=d)),this.each(function(){var t=this,r=$(t),i=t.p,a=0,o=null,l={},n={},s=i.colModel,d=i.prmNames;if(t.grid){var u=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},jgrid.inlineEdit,i.inlineEditing||{},c),p=r.jqGrid("getInd",e,!0),h=u.focusField,f="object"==typeof h&&null!=h?$(h.target||h).closest("tr.jqgrow>td")[0]:null;if(!1!==p&&(u.extraparam[d.oper]===d.addoper||editFeedback.call(t,u,"beforeEditRow",u,e))&&"0"===($(p).attr("editable")||"0")&&!$(p).hasClass("not-editable-row")){var g=jgrid.detectRowEditing.call(t,e);if(null!=g&&"cellEditing"===g.mode){var m=g.savedRow,v=t.rows[m.id],b=getGuiStateStyles.call(t,"select");r.jqGrid("restoreCell",m.id,m.ic),$(v.cells[m.ic]).removeClass("edit-cell "+b),$(v).addClass(b).attr({"aria-selected":"true",tabindex:"0"})}if(jgrid.enumEditableCells.call(t,p,$(p).hasClass("jqgrid-new-row")?"add":"edit",function(r){var s,d,c,u=r.cm,p=$(r.dataElement),h=r.dataWidth,f=u.name,g=u.edittype,m=r.iCol,v=u.editoptions||{};if(n[f]=r.editable,"hidden"!==r.editable){try{s=$.unformat.call(this,r.td,{rowId:e,colModel:u},m)}catch(b){s="textarea"===g?p.text():p.html()}l[f]=s,p.html(""),d=$.extend({},v,{id:e+"_"+f,name:f,rowId:e,mode:r.mode,cm:u,iCol:m}),("&nbsp;"===s||"&#160;"===s||1===s.length&&160===s.charCodeAt(0))&&(s=""),c=jgrid.createEl.call(t,g,d,s,!0,$.extend({},jgrid.ajaxOptions,i.ajaxSelectOptions||{})),$(c).addClass("editable"),p.append(c),h&&$(c).width(r.dataWidth),jgrid.bindEv.call(t,c,d),"select"===g&&!0===v.multiple&&void 0===v.dataUrl&&jgrid.msie&&$(c).width($(c).width()),null===o&&(o=m),a++}}),0<a){if(l.id=e,i.savedRow.push(l),i.editingInfo[e]={mode:"inlineEditing",savedRow:l,editable:n},$(p).attr("editable","1"),h&&("number"==typeof h&&parseInt(h,10)<=s.length?o=h:"string"==typeof h?o=i.iColByName[h]:null!=f&&(o=f.cellIndex),setTimeout(function(){var e=r.jqGrid("getNumberOfFrozenColumns"),a=function(r){return i.frozenColumns&&0<e&&o<e?t.grid.fbRows[p.rowIndex].cells[r]:p.cells[r]},l=function(e){return $(e).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},n=function(){return l(i.frozenColumns&&0<e?t.grid.fbRows[p.rowIndex]:p).first()},s=l(a(o));0<s.length?s.first().focus():"number"==typeof u.defaultFocusField||"string"==typeof u.defaultFocusField?(0===(s=l(a("number"==typeof u.defaultFocusField?u.defaultFocusField:i.iColByName[u.defaultFocusField]))).length&&(s=n()),s.first().focus()):n().focus()},0)),!0===u.keys){var w=$(p);i.frozenColumns&&(w=w.add(t.grid.fbRows[p.rowIndex])),w.on("keydown",function(t){return 27===t.keyCode?(r.jqGrid("restoreRow",e,u.afterrestorefunc),!1):13===t.keyCode?"TEXTAREA"===t.target.tagName||(r.jqGrid("saveRow",e,u),!1):void 0})}fullBoolFeedback.call(t,u.oneditfunc,"jqGridInlineEditRow",e,u)}}}})},saveRow:function(e,t,r,i,a,o,l,n){var s,d=$.makeArray(arguments).slice(1),c={},u=this[0],p=$(u),h=null!=u?u.p:null,f=jgrid.info_dialog,g=$.isFunction,m=null!=jgrid.defaults&&g(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert;if(u.grid&&null!=h){"object"===$.type(d[0])?c=d[0]:(g(t)&&(c.successfunc=t),void 0!==r&&(c.url=r),void 0!==i&&(c.extraparam=i),g(a)&&(c.aftersavefunc=a),g(o)&&(c.errorfunc=o),g(l)&&(c.afterrestorefunc=l),g(n)&&(c.beforeSaveRow=n));var v=function(e){return p.jqGrid("getGridRes",e)};c=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:v("defaults.savetext")||"Saving..."},jgrid.inlineEdit,h.inlineEditing||{},c);var b,w,y,_,x,C,j,D,R={},q={},S={},G=p.jqGrid("getInd",e,!0),O=$(G),k=h.prmNames,F=v("errors.errcap"),I=v("edit.bClose"),E=function(e,t){try{var r=jgrid.getRelativeRect.call(u,t);f.call(u,F,e,I,{top:r.top,left:r.left+$(u).closest(".ui-jqgrid").offset().left})}catch(i){m(e)}};if(!1!==G&&(s=c.extraparam[k.oper]===k.addoper?"add":"edit",editFeedback.call(u,c,"beforeSaveRow",c,e,s)&&(b=O.attr("editable"),c.url=c.url||h.editurl,j="clientArray"!==c.url,"1"===b))){if(C=$.jgrid.detectRowEditing.call(u,e),jgrid.enumEditableCells.call(u,G,O.hasClass("jqgrid-new-row")?"add":"edit",function(e){var t=e.cm,r=t.formatter,i=t.editoptions||{},a=t.formatoptions||{},o={},l=jgrid.getEditedValue.call(u,$(e.dataElement),t,o,e.editable);if("select"===t.edittype&&"select"!==t.formatter&&(q[t.name]=o.text),null!=(x=jgrid.checkValues.call(u,l,e.iCol,void 0,void 0,$.extend(e,{oldValue:null!=C?C.savedRow[t.name]:null,newValue:l,oldRowData:null!=C?C.savedRow:null})))&&!1===x[0])return D=!0,E(x[1],e.td),!1;"date"===r&&!0!==a.sendFormatted&&(l=$.unformat.date.call(u,l,t)),j&&!0===i.NullIfEmpty&&""===l&&(l="null"),R[t.name]=l}),D)return;k=h.prmNames,N=!1===h.keyName?k.id:h.keyName,R&&(R[k.oper]=k.editoper,void 0!==R[N]&&""!==R[N]||(R[N]=jgrid.stripPref(h.idPrefix,e)),R=$.extend({},R,h.inlineData||{},c.extraparam));var N,T={options:c,rowid:e,tr:G,iRow:G.rowIndex,savedRow:C.savedRow,newData:R,mode:s};if(!editFeedback.call(u,c,"saveRowValidation",T))return void(T.errorText&&E(T.errorText,G));if(j)p.jqGrid("progressBar",{method:"show",loadtype:c.saveui,htmlcontent:c.savetext}),(S=$.extend({},R,S))[N]=jgrid.stripPref(h.idPrefix,S[N]),h.autoEncodeOnEdit&&$.each(S,function(e,t){g(t)||(S[e]=jgrid.oldEncodePostedData(t))}),G.id===h.idPrefix+S[N]||null==k.idold||S.hasOwnProperty(k.idold)||(S[k.idold]=jgrid.stripPref(h.idPrefix,G.id)),$.ajax($.extend({url:g(c.url)?c.url.call(u,S[N],s,S,c):c.url,data:jgrid.serializeFeedback.call(u,g(c.serializeSaveData)?c.serializeSaveData:h.serializeRowData,"jqGridInlineSerializeSaveData",S),type:g(c.mtype)?c.mtype.call(u,s,c,S[N],S):c.mtype,complete:function(t,r){var i,a,o;if(p.jqGrid("progressBar",{method:"hide",loadtype:c.saveui}),(t.status<300||304===t.status)&&(0!==t.status||4!==t.readyState)){if(null!=(a=p.triggerHandler("jqGridInlineSuccessSaveRow",[t,e,c,s,S]))&&!0!==a||(a=[!0,R]),a[0]&&g(c.successfunc)&&(a=c.successfunc.call(u,t,e,c,s,S)),$.isArray(a)?(i=a[0],R=a[1]||R):i=a,!0===i){for(h.autoEncodeOnEdit&&$.each(R,function(e,t){R[e]=jgrid.oldDecodePostedData(t)}),R=$.extend({},R,q),p.jqGrid("setRowData",e,R),O.attr("editable","0"),o=0;o<h.savedRow.length;o++)if(String(h.savedRow[o].id)===String(e)){y=o;break}0<=y&&(h.savedRow.splice(y,1),delete h.editingInfo[e]),fullBoolFeedback.call(u,c.aftersavefunc,"jqGridInlineAfterSaveRow",e,t,R,c),null!=a[2]?p.jqGrid("changeRowid",e,h.idPrefix+a[2]):G.id!==h.idPrefix+R[N]&&p.jqGrid("changeRowid",G.id,h.idPrefix+R[N]),O.removeClass("jqgrid-new-row").off("keydown")}else fullBoolFeedback.call(u,c.errorfunc,"jqGridInlineErrorSaveRow",e,t,r,null,c),!0===c.restoreAfterError&&p.jqGrid("restoreRow",e,c.afterrestorefunc)}},error:function(t,r,i){if(p.triggerHandler("jqGridInlineErrorSaveRow",[e,t,r,i,c]),g(c.errorfunc))c.errorfunc.call(u,e,t,r,i);else{var a=t.responseText||t.statusText;try{f.call(u,F,'<div class="'+getGuiStateStyles.call(u,"error")+'">'+a+"</div>",I,{buttonalign:"right"})}catch(o){m(a)}}!0===c.restoreAfterError&&p.jqGrid("restoreRow",e,c.afterrestorefunc)}},jgrid.ajaxOptions,h.ajaxRowOptions,c.ajaxSaveOptions||{}));else{for(R=$.extend({},R,q),_=p.jqGrid("setRowData",e,R),O.attr("editable","0"),w=0;w<h.savedRow.length;w++)if(String(h.savedRow[w].id)===String(e)){y=w;break}0<=y&&(h.savedRow.splice(y,1),delete h.editingInfo[e]),fullBoolFeedback.call(u,c.aftersavefunc,"jqGridInlineAfterSaveRow",e,_,R,c),O.removeClass("jqgrid-new-row").off("keydown"),G.id!==h.idPrefix+R[N]&&p.jqGrid("changeRowid",G.id,h.idPrefix+R[N])}}}},restoreRow:function(e,t){var r=$.makeArray(arguments).slice(1),i={};return"object"===$.type(r[0])?i=r[0]:$.isFunction(t)&&(i.afterrestorefunc=t),this.each(function(){var t,r=this,a=$(r),o=r.p,l=-1,n={};if(r.grid){var s=$.extend(!0,{},jgrid.inlineEdit,o.inlineEditing||{},i),d=a.jqGrid("getInd",e,!0);if(!1!==d&&editFeedback.call(r,s,"beforeCancelRow",s,e)){for(t=0;t<o.savedRow.length;t++)if(String(o.savedRow[t].id)===String(e)){l=t;break}if(0<=l){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+jgrid.jqID(d.id)).datepicker("hide")}catch(c){}$.each(o.colModel,function(){var e=this.name;o.savedRow[l].hasOwnProperty(e)&&(n[e]=o.savedRow[l][e],this.formatter&&"date"===this.formatter&&(null==this.formatoptions||!0!==this.formatoptions.sendFormatted)&&(n[e]=$.unformat.date.call(r,n[e],this)))}),a.jqGrid("setRowData",e,n),$(d).attr("editable","0").off("keydown"),o.savedRow.splice(l,1),delete o.editingInfo[e],$("#"+jgrid.jqID(e),r).hasClass("jqgrid-new-row")&&setTimeout(function(){a.jqGrid("delRowData",e),a.jqGrid("showAddEditButtons",!1)},0)}fullBoolFeedback.call(r,s.afterrestorefunc,"jqGridInlineAfterRestoreRow",e)}}})},addRow:function(e){return this.each(function(){if(this.grid){var t=this,r=$(t),i=t.p,a=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},jgrid.inlineEdit,i.inlineEditing||{},e||{});if(editFeedback.call(t,a,"beforeAddRow",a.addRowParams)){if(a.rowID=$.isFunction(a.rowID)?a.rowID.call(t,a):null!=a.rowID?a.rowID:jgrid.randId(),!0===a.useDefValues&&$(i.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue;a.initdata[this.name]=$.isFunction(e)?e.call(t,a):e}}),a.rowID=i.idPrefix+a.rowID,r.jqGrid("addRowData",a.rowID,a.initdata,a.position),$("#"+jgrid.jqID(a.rowID),t).addClass("jqgrid-new-row"),a.useFormatter)$("#"+jgrid.jqID(a.rowID)+" .ui-inline-edit",t).click();else{var o=i.prmNames,l=o.oper;a.addRowParams.extraparam[l]=o.addoper,r.jqGrid("editRow",a.rowID,a.addRowParams),r.jqGrid("setSelection",a.rowID)}}}})},inlineNav:function(e,t){return"object"==typeof e&&(t=e,e=void 0),this.each(function(){var r=this,i=$(r),a=r.p;if(this.grid&&null!=a){var o,l=e===a.toppager?a.idSel+"_top":a.idSel,n=e===a.toppager?a.id+"_top":a.id,s=getGuiStateStyles.call(r,"disabled"),d=$.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},i.jqGrid("getGridRes","nav"),jgrid.nav||{},a.navOptions||{},jgrid.inlineNav||{},a.inlineNavOptions||{},t||{}),c=function(){r.modalAlert()};if(void 0===e){if(a.pager){if(i.jqGrid("inlineNav",a.pager,d),!a.toppager)return;e=a.toppager,l=a.idSel+"_top",n=a.id+"_top"}else a.toppager&&(e=a.toppager,l=a.idSel+"_top",n=a.id+"_top")}if(void 0!==e&&!((o=$(e)).length<=0)){if(o.find(".navtable").length<=0&&i.jqGrid("navGrid",e,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),(a._inlinenav=!0)===d.addParams.useFormatter){var u,p,h,f=a.colModel;for(u=0;u<f.length;u++)if(f[u].formatter&&"actions"===f[u].formatter){f[u].formatoptions&&(p={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},h=$.extend(p,f[u].formatoptions),d.addParams.addRowParams={keys:h.keys,oneditfunc:h.onEdit,successfunc:h.onSuccess,url:h.url,extraparam:h.extraparam,aftersavefunc:h.afterSave,errorfunc:h.onError,afterrestorefunc:h.afterRestore});break}}d.add&&i.jqGrid("navButtonAdd",e,{caption:d.addtext,title:d.addtitle,commonIconClass:d.commonIconClass,buttonicon:d.addicon,iconsOverText:d.iconsOverText,id:n+"_iladd",onClickButton:function(){hasOneFromClasses(this,s)||i.jqGrid("addRow",d.addParams)}}),d.edit&&i.jqGrid("navButtonAdd",e,{caption:d.edittext,title:d.edittitle,commonIconClass:d.commonIconClass,buttonicon:d.editicon,iconsOverText:d.iconsOverText,id:n+"_iledit",onClickButton:function(){if(!hasOneFromClasses(this,s)){var e=a.selrow;e?i.jqGrid("editRow",e,d.editParams):c()}}}),d.save&&(i.jqGrid("navButtonAdd",e,{caption:d.savetext,title:d.savetitle,commonIconClass:d.commonIconClass,buttonicon:d.saveicon,iconsOverText:d.iconsOverText,id:n+"_ilsave",onClickButton:function(){if(!hasOneFromClasses(this,s)&&0<a.savedRow.length){var e=a.savedRow[0].id;if(e){var t=a.prmNames,o=t.oper,l=d.editParams;$("#"+jgrid.jqID(e),r).hasClass("jqgrid-new-row")?(d.addParams.addRowParams.extraparam[o]=t.addoper,l=d.addParams.addRowParams):(d.editParams.extraparam||(d.editParams.extraparam={}),d.editParams.extraparam[o]=t.editoper),i.jqGrid("saveRow",e,l)}else c()}}}),$(l+"_ilsave").addClass(s)),d.cancel&&(i.jqGrid("navButtonAdd",e,{caption:d.canceltext,title:d.canceltitle,commonIconClass:d.commonIconClass,buttonicon:d.cancelicon,iconsOverText:d.iconsOverText,id:n+"_ilcancel",onClickButton:function(){if(!hasOneFromClasses(this,s)&&0<a.savedRow.length){var e=a.savedRow[0].id,t=d.editParams;e?($("#"+jgrid.jqID(e),r).hasClass("jqgrid-new-row")&&(t=d.addParams.addRowParams),i.jqGrid("restoreRow",e,t)):c()}}}),$(l+"_ilcancel").addClass(s)),!0===d.restoreAfterSelect&&i.on("jqGridSelectRow",function(e,t){if(0<a.savedRow.length&&!0===a._inlinenav){var r=a.savedRow[0].id;t!==r&&"number"!=typeof r&&i.jqGrid("restoreRow",r,d.editParams)}}),i.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){i.jqGrid("showAddEditButtons",!1)}),i.on("jqGridInlineEditRow",function(e,t){i.jqGrid("showAddEditButtons",!0,t)})}}})},showAddEditButtons:function(e){return this.each(function(){if(this.grid){var t=this.p,r=t.idSel,i=getGuiStateStyles.call(this,"disabled"),a=r+"_ilsave,"+r+"_ilcancel"+(t.toppager?","+r+"_top_ilsave,"+r+"_top_ilcancel":""),o=r+"_iladd,"+r+"_iledit"+(t.toppager?","+r+"_top_iladd,"+r+"_top_iledit":"");$(e?o:a).addClass(i),$(e?a:o).removeClass(i)}})}});var $UiMultiselect=null!=$.ui?$.ui.multiselect:null,reorderSelectedColumns=function(e){if(null!=this.grid&&null!=this.grid.p){var t,r,i,a,o,l=this,n=this.grid.p,s=this.gh,d=this.selectedList,c=this.inGroup,u=d.find("li"),p=u.length-1,h=function(e,t,r){var i,a,o=d.find("li");for(void 0===t&&(t=r?o.length-1:0),i=t;r?0<=i:i<o.length;r?i--:i++)if((a=$(o[i]).data("optionLink"))&&e.call(o[i],parseInt(a.val(),10),i))return i},f=function(){0<=(r=$.inArray(n.colModel[e].name,l.newColOrder))&&l.newColOrder.splice(r,1),u=d.find("li"),t=0,h(function(r,i){if(r===e){for(p=i;0<=t&&t<n.colModel.length&&t!==e&&(n.colModel[t].hidden||n.colModel[t].hidedlg)&&(null==c||c[t]===c[e]);)t++;return l.newColOrder.splice(t,0,n.colModel[e].name),!0}(t=$.inArray(n.colModel[r].name,l.newColOrder,t))<0&&(t=$.inArray(n.colModel[r].name,l.newColOrder)),t++})},g=function(t){if(c[t]===c[e])return $(this).after(u[p]),f(),!0},m=function(t){if(c[t]===c[e])return $(this).before(u[p]),f(),!0},v=function(t){if(c[t]===c[e]&&void 0!==c[t])return s[c[t]].startColumnName=n.colModel[t].name,!0};if(f(),s&&void 0!==s[c[e]]){for(a=s[c[e]],r=0;r<a.numberOfColumns;r++)if(t=n.iColByName[a.startColumnName]+r,!n.colModel[t].hidden&&!n.colModel[t].hidedlg){h(g,p-1,!0),h(m,p+1),h(v);break}}else if(s){if(u=d.find("li"),(r=h(function(t){if(t===e)return!0}))+1>=u.length||r<0)return;if((o=$(u[r+1]).data("optionLink"))&&void 0!==(i=c[parseInt(o.val(),10)])&&(o=$(u[r-1]).data("optionLink"))&&c[parseInt(o.val(),10)]===i){var b=h(function(e){if(c[e]!==i)return!0},r+1);$(u[void 0===b||b>=u.length?u.length-1:b-1]).after(u[p]),f()}}}};if(jgrid.msie&&8===jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),jgrid._multiselect=!1,$UiMultiselect){if($UiMultiselect.prototype._setSelected){var setSelected=$UiMultiselect.prototype._setSelected;$UiMultiselect.prototype._setSelected=function(e,t){var r=setSelected.call(this,e,t),i=this.element,a=parseInt(e.data("optionLink").val(),10);return t&&this.selectedList&&(reorderSelectedColumns.call(this,a),this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(i)})),r}}$UiMultiselect.prototype.destroy&&($UiMultiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),jgrid._multiselect=!0}function Aggregation(e,t,r){if(!(this instanceof Aggregation))return new Aggregation(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=r}function ArrayOfFieldsets(e,t,r,i,a){var o,l,n=i.length,s=this,d=function(e,t){var r=e,i=t;if(null==r&&(r=""),null==i&&(i=""),r=String(r),i=String(i),this.caseSensitive||(r=r.toUpperCase(),i=i.toUpperCase()),r===i){if(e===t)return 0;if(void 0===e)return -1;if(void 0===t)return 1;if(null===e)return -1;if(null===t)return 1}return r<i?-1:1},c=function(e,t){return(e=Number(e))===(t=Number(t))?0:e<t?-1:1},u=function(e,t){return(e=Math.floor(Number(e)))===(t=Math.floor(Number(t)))?0:e<t?-1:1};for(s.items=[],s.indexesOfSourceData=[],s.trimByCollect=e,s.caseSensitive=t,s.skipSort=r,s.fieldLength=n,s.fieldNames=Array(n),s.fieldSortDirection=Array(n),s.fieldCompare=Array(n),o=0;o<n;o++){switch(l=i[o],s.fieldNames[o]=l[a||"dataName"],l.sorttype){case"integer":case"int":s.fieldCompare[o]=u;break;case"number":case"currency":case"float":s.fieldCompare[o]=c;break;default:s.fieldCompare[o]=$.isFunction(l.compare)?l.compare:d}s.fieldSortDirection[o]="desc"===l.sortorder?-1:1}}jgrid.extend({sortableColumns:function(e){return this.each(function(){var t=this,r=t.p,i=jqID(r.id);if(r&&r.sortable&&$.isFunction($.fn.sortable)){var a={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+i+"_cb,#jqgh_"+i+"_rn,#jqgh_"+i+"_subgrid),:hidden)",placeholder:{element:function(e){return $(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},start:function(){t.grid.hDiv.scrollLeft=t.grid.bDiv.scrollLeft},update:function(e,i){var a=$(">th",$(i.item).parent()),o=r.id+"_",l=[];a.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(o,""),t=r.iColByName[e];void 0!==t&&l.push(t)}),$(t).jqGrid("remapColumns",l,!0,!0),$.isFunction(r.sortable.update)&&r.sortable.update(l),setTimeout(function(){r.disableClick=!1},50)}};if(r.sortable.options?$.extend(a,r.sortable.options):$.isFunction(r.sortable)&&(r.sortable={update:r.sortable}),a.start){var o=a.start;a.start=function(e,t){s(),o.call(this,e,t)}}else a.start=s;r.sortable.exclude&&(a.items+=":not("+r.sortable.exclude+")");var l=e.sortable(a),n=l.data("sortable")||l.data("uiSortable")||l.data("ui-sortable");null!=n&&(n.floating=!0)}function s(){r.disableClick=!0}})},columnChooser:function(e){var t,r,i,a,o,l,n,s=this,d=s[0],c=d.p,u=c.colModel,p=u.length,h=c.colNames,f=function(e){return $UiMultiselect&&$UiMultiselect.prototype&&e.data($UiMultiselect.prototype.widgetFullName||$UiMultiselect.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")};if(!$("#colchooser_"+jqID(c.id)).length){if(t=$('<div id="colchooser_'+c.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),r=$("select",t),e=$.extend({width:400,height:240,classname:null,done:function(e){e&&s.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+70,resize:function(){var e=f(r),t=e.container.closest(".ui-dialog-content");0<t.length&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},e.dialog_opts||{})},apply_perm:function(){var t,i,a=Array(c.colModel.length),o={notSkipFrozen:void 0!==e.notSkipFrozen&&e.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(t=0;t<c.colModel.length;t++)a[t]=c.iColByName[l.newColOrder[t]];if($("option",r).each(function(){$(this).is(":selected")?s.jqGrid("showCol",u[this.value].name,o):s.jqGrid("hideCol",u[this.value].name,o)}),e.done&&e.done.call(s,a),c.groupHeader&&("object"==typeof c.groupHeader||$.isFunction(c.groupHeader))){if(s.jqGrid("destroyGroupHeader",!1),c.groupHeader.groupHeaders=l.gh,null!=c.pivotOptions&&null!=c.pivotOptions.colHeaders&&1<c.pivotOptions.colHeaders.length)for(i=c.pivotOptions.colHeaders,t=0;t<i.length;t++)i[t]&&i[t].groupHeaders.length&&s.jqGrid("setGroupHeaders",i[t]);else s.jqGrid("setGroupHeaders",c.groupHeader)}var n=c.autowidth||void 0!==c.widthOrg&&"auto"!==c.widthOrg&&"100%"!==c.widthOrg?c.width:c.tblwidth;n!==c.width&&s.jqGrid("setGridWidth",n,c.shrinkToFit)},cleanup:function(i){C(e.dlog,t,"destroy"),C(e.msel,r,"destroy"),t.remove(),i&&e.done&&e.done.call(s)},msel_opts:{}},s.jqGrid("getGridRes","col"),jgrid.col,e||{}),$.ui&&$UiMultiselect&&$UiMultiselect.defaults){if(!jgrid._multiselect)return void(null!=jgrid.defaults&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");e.msel_opts=$.extend($UiMultiselect.defaults,e.msel_opts)}e.caption&&t.attr("title",e.caption),e.classname&&(t.addClass(e.classname),r.addClass(e.classname)),e.width&&($(">div",t).css({width:e.width,margin:"0 auto"}),r.css("width",e.width)),e.height&&($(">div",t).css("height",e.height),r.css("height",e.height-10)),r.empty();var g,m,v,b,w,y,_=null!=c.groupHeader?c.groupHeader.groupHeaders:0,x={};if(_)for(v=0;v<_.length;v++)for(y=_[v],b=0;b<y.numberOfColumns;b++)x[w=c.iColByName[y.startColumnName]+b]=$.isFunction(e.buildItemText)?e.buildItemText.call(s[0],{iCol:w,cm:u[w],cmName:u[w].name,colName:h[w],groupTitleText:y.titleText}):$.jgrid.stripHtml(y.titleText)+": "+$.jgrid.stripHtml(""===h[w]?u[w].name:h[w]);for(w=0;w<p;w++)void 0===x[w]&&(x[w]=$.isFunction(e.buildItemText)?e.buildItemText.call(s[0],{iCol:w,cm:u[w],cmName:u[w].name,colName:h[w],groupTitleText:null}):$.jgrid.stripHtml(h[w]));if($.each(u,function(e){this.hidedlg||r.append("<option value='"+e+"'"+(c.headertitles||this.headerTitle?" title='"+jgrid.stripHtml("string"==typeof this.headerTitle?this.headerTitle:x[e])+"'":"")+(this.hidden?"":" selected='selected'")+">"+x[e]+"</option>")}),i=$.isFunction(e.dlog_opts)?e.dlog_opts.call(s,e):e.dlog_opts,C(e.dlog,t,i),a=$.isFunction(e.msel_opts)?e.msel_opts.call(s,e):e.msel_opts,C(e.msel,r,a),(o=$("#colchooser_"+jqID(c.id))).css({margin:"auto"}),o.find(">div").css({width:"100%",height:"100%",margin:"auto"}),l=f(r)){if(l.grid=d,_)for(l.gh=$.extend(!0,[],_),l.inGroup=Array(c.colModel.length),g=0;g<_.length;g++)for(m=_[g],w=0;w<m.numberOfColumns;w++)l.inGroup[c.iColByName[m.startColumnName]+w]=g;l.newColOrder=$.map(u,function(e){return e.name}),l.container.css({width:"100%",height:"100%",margin:"auto"}),l.selectedContainer.css({width:100*l.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),l.availableContainer.css({width:100-100*l.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),l.selectedList.css("height","auto"),l.availableList.css("height","auto"),n=Math.min(n=Math.max(l.selectedList.height(),l.availableList.height()),$(window).height()),l.selectedList.css("height",n),l.availableList.css("height",n),null!=l.options&&l.options.sortable&&l.selectedList.on("sortupdate",function(t,r){reorderSelectedColumns.call(l,parseInt(r.item.data("optionLink").val(),10)),r.item.css({width:"",height:""}),$.isFunction(e.sortUpdate)&&e.sortUpdate.call(d,t,r)}),$.isFunction(e.init)&&e.init.call(d,l)}}function C(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}},sortableRows:function(e){return this.each(function(){var t=this,r=t.grid,i=t.p;r&&(i.treeGrid||$.fn.sortable&&((e=$.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},e||{})).start&&$.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&$.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(a,o){if($(o.item).css("border-width","0"),$("td",o.item).each(function(e){this.style.width=r.cols[e].style.width}),i.subGrid){var l=$(o.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",l)}catch(n){}}e._start_&&e._start_.apply(this,[a,o])},e.update=function(r,a){$(a.item).css("border-width",""),!0===i.rownumbers&&$("td.jqgrid-rownum",t.rows).each(function(e){$(this).html(e+1+(parseInt(i.page,10)-1)*parseInt(i.rowNum,10))}),e._update_&&e._update_.apply(this,[r,a])},$(t).sortable(e)))})},gridDnD:function(e){return this.each(function(){var t,r,i=this;if(i.grid&&!i.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(void 0===$("#jqgrid_dnd")[0]&&$("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"!=typeof e||"updateDnD"!==e||!0!==i.p.jqgdnd){if((e=$.extend({drag:function(e){return $.extend({start:function(t,r){var a,o;if(i.p.subGrid){o=$(r.helper).attr("id");try{$(i).jqGrid("collapseSubGridRow",o)}catch(l){}}for(a=0;a<$.data(i,"dnd").connectWith.length;a++)0===$($.data(i,"dnd").connectWith[a]).jqGrid("getGridParam","reccount")&&$($.data(i,"dnd").connectWith[a]).jqGrid("addRowData","jqg_empty_row",{});r.helper.addClass("ui-state-highlight"),$("td",r.helper).each(function(e){this.style.width=i.grid.headers[e].width+"px"}),e.onstart&&$.isFunction(e.onstart)&&e.onstart.call($(i),t,r)},stop:function(t,r){var a,o;for(r.helper.dropped&&!e.dragcopy&&(void 0===(o=$(r.helper).attr("id"))&&(o=$(this).attr("id")),$(i).jqGrid("delRowData",o)),a=0;a<$.data(i,"dnd").connectWith.length;a++)$($.data(i,"dnd").connectWith[a]).jqGrid("delRowData","jqg_empty_row");e.onstop&&$.isFunction(e.onstop)&&e.onstop.call($(i),t,r)}},e.drag_opts||{})},drop:function(e){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow"))return e;var t=$(e).closest("table.ui-jqgrid-btable");if(0<t.length&&void 0!==$.data(t[0],"dnd")){var r=$.data(t[0],"dnd").connectWith;return -1!==$.inArray("#"+jqID(this.id),r)}return!1},drop:function(t,r){if($(r.draggable).hasClass("jqgrow")){var a,o=$(r.draggable).attr("id"),l=r.draggable.parent().parent(),n=l.jqGrid("getRowData",o);if(!e.dropbyname){var s,d,c,u,p={},h=l.jqGrid("getGridParam","colModel"),f=$("#"+jqID(this.id)).jqGrid("getGridParam","colModel");try{for(d=s=0;s<h.length&&d<f.length;s++)if("cb"!==(c=h[s].name)&&"rn"!==c&&"subgrid"!==c){for(;d<f.length;d++)if("cb"!==(u=f[d].name)&&"rn"!==u&&"subgrid"!==u){p[u]=n[c];break}d++}n=p}catch(g){}}if(r.helper.dropped=!0,e.beforedrop&&$.isFunction(e.beforedrop)){var m=e.beforedrop.call(this,t,r,n,$("#"+jqID(i.p.id)),$(this));null!=m&&"object"==typeof m&&(n=m)}r.helper.dropped&&(e.autoid&&($.isFunction(e.autoid)?a=e.autoid.call(this,n,{rowid:o,ev:t,ui:r}):(a=Math.ceil(1e3*Math.random()),a=e.autoidprefix+a)),$("#"+jqID(this.id)).jqGrid("addRowData",a,n,e.droppos),n[i.p.localReader.id]=a),e.ondrop&&$.isFunction(e.ondrop)&&e.ondrop.call(this,t,r,n)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{})).connectWith)for(e.connectWith=e.connectWith.split(","),e.connectWith=$.map(e.connectWith,function(e){return $.trim(e)}),$.data(i,"dnd",e),0===i.p.reccount||i.p.jqgdnd||a(),i.p.jqgdnd=!0,t=0;t<e.connectWith.length;t++)$(r=e.connectWith[t]).droppable($.isFunction(e.drop)?e.drop.call($(i),e):e.drop)}else a()}function a(){var e=$.data(i,"dnd");$("tr.jqgrow:not(.ui-draggable)",i).draggable($.isFunction(e.drag)?e.drag.call($(i),e):e.drag)}})},gridResize:function(e){return this.each(function(){var t,r=this,i=r.grid,a=r.p,o=a.gView+">.ui-jqgrid-bdiv",l=!1,n=a.height;if(i&&$.fn.resizable){if((e=$.extend({},e||{})).alsoResize?(e._alsoResize_=e.alsoResize,delete e.alsoResize):e._alsoResize_=!1,e.stop&&$.isFunction(e.stop)?(e._stop_=e.stop,delete e.stop):e._stop_=!1,e.stop=function(s,d){$(r).jqGrid("setGridWidth",d.size.width,e.shrinkToFit),$(a.gView+">.ui-jqgrid-titlebar").css("width",""),l?($(t).each(function(){$(this).css("height","")}),"auto"!==n&&"100%"!==n||$(i.bDiv).css("height",n)):$(r).jqGrid("setGridParam",{height:$(o).height()}),r.fixScrollOffsetAndhBoxPadding&&r.fixScrollOffsetAndhBoxPadding(),e._stop_&&e._stop_.call(r,s,d)},t=o,"auto"!==n&&"100%"!==n||void 0!==e.handles||(e.handles="e,w"),e.handles){var s=$.map(String(e.handles).split(","),function(e){return $.trim(e)});2===s.length&&("e"===s[0]&&"w"===s[1]||"e"===s[1]&&"w"===s[1])&&(t=a.gView+">div:not(.frozen-div)",l=!0,a.pager&&(t+=","+a.pager))}e._alsoResize_?e.alsoResize=t+","+e._alsoResize_:e.alsoResize=t,delete e._alsoResize_,$(a.gBox).resizable(e)}})}}),Aggregation.prototype.calc=function(e,t,r,i,a){var o=this;if(void 0!==e)switch(o.result=o.result||0,e=parseFloat(e),o.aggregator){case"sum":o.result+=e;break;case"count":o.result++;break;case"avg":o.finilized?(o.count=o.count||0,o.result=(o.result*o.count+e)/(o.count+1)):(o.result+=e,o.count=o.count||0),o.count++;break;case"min":o.result=Math.min(o.result,e);break;case"max":o.result=Math.max(o.result,e);break;default:$.isFunction(o.aggregator)&&(o.result=o.aggregator.call(o.context,{previousResult:o.result,value:e,fieldName:t,item:r,iItem:i,items:a}))}},Aggregation.prototype.getResult=function(e,t,r){var i=this;(void 0!==i.result||r)&&(r&&void 0!==i.result&&(i.result=0,i.count=0),void 0===i.result||i.finilized||"avg"!==i.aggregator||(i.result=i.result/i.count,i.finilized=!0),e[t]=i.result)},ArrayOfFieldsets.prototype.compareVectorsEx=function(e,t){var r,i,a=this.fieldLength;for(r=0;r<a;r++)if(0!==(i=this.fieldCompare[r](e[r],t[r])))return{index:r,result:i};return{index:-1,result:0}},ArrayOfFieldsets.prototype.getIndexOfDifferences=function(e,t){return null===t||null===e?0:this.compareVectorsEx(e,t).index},ArrayOfFieldsets.prototype.compareVectors=function(e,t){var r=this.compareVectorsEx(e,t);return 0<(0<=r.index?this.fieldSortDirection[r.index]:1)?r.result:-r.result},ArrayOfFieldsets.prototype.getItem=function(e){return this.items[e]},ArrayOfFieldsets.prototype.getIndexLength=function(){return this.items.length},ArrayOfFieldsets.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},ArrayOfFieldsets.prototype.createDataIndex=function(e){var t,r,i,a,o,l,n,s,d,c=e.length,u=this.fieldLength,p=this.fieldNames,h=this.indexesOfSourceData,f=this.items;for(t=0;t<c;t++){for(n=e[t],r=Array(u),a=0;a<u;a++)void 0!==(i=n[p[a]])&&("string"==typeof i&&this.trimByCollect&&(i=$.trim(i)),r[a]=i);if(s=0,(d=f.length-1)<0)f.push(r),h.push([t]);else if(0!==(o=this.compareVectors(r,f[d]))){if(1===o||this.skipSort)f.push(r),h.push([t]);else if(1!==(o=this.compareVectors(f[0],r))){if(0!==o)for(;;){if(d-s<2){f.splice(d,0,r),h.splice(d,0,[t]);break}if(l=Math.floor((s+d)/2),0===(o=this.compareVectors(f[l],r))){h[l].push(t);break}1===o?d=l:s=l}else h[0].push(t)}else f.unshift(r),h.unshift([t])}else h[d].push(t)}},jgrid.extend({pivotSetup:function(e,t){var r,i,a,o,l,n,s,d,c,u,p,h,f,g,m,v,b,w,y,_,x,C,j,D,R,q,S,G,O,k=this[0],F=$.isArray,I={},E={groupField:[],groupSummary:[],groupSummaryPos:[]},N={grouping:!0,groupingView:E},T=$.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:e},t||{}),A=e.length,B=T.xDimension,z=T.yDimension,P=T.aggregates,M=T.totalText||T.totals||T.rowTotals||T.totalHeader,L=F(B)?B.length:0,V=F(z)?z.length:0,H=F(P)?P.length:0,W=V-(1===H?1:0),U=[],Y=[],X=[],Q=[],Z=["pivotInfos"],J=Array(H),K=Array(V),ee=function(t,r,i){var a=new ArrayOfFieldsets(T.trimByCollect,T.caseSensitive,r,t);return $.isFunction(i)&&(a.compareVectorsEx=i),a.createDataIndex(e),a},et=function(e,t,r,i,a){var o,l,n;switch(e){case 1:o=z[i].totalText||"{0} {1} {2}",l="y"+a+"t"+i;break;case 2:o=T.totalText||"{0}",l="t";break;default:o=1<H?t.label||"{0}":$.isFunction(z[i].label)?z[i].label:G.getItem(a)[i],l="y"+a}return delete(n=$.extend({},t,{name:l+(1<H?"a"+r:""),label:$.isFunction(o)?o.call(k,2===e?{aggregate:t,iAggregate:r,pivotOptions:T}:1===e?{yIndex:G.getItem(a),aggregate:t,iAggregate:r,yLevel:i,pivotOptions:T}:{yData:G.getItem(a)[i],yIndex:G.getItem(a),yLevel:i,pivotOptions:T}):jgrid.template.apply(k,2===e?[String(o),t.aggregator,t.member,r]:[String(o),t.aggregator,t.member,G.getItem(a)[i],i])})).member,delete n.aggregator,n},er=function(e,t,r){var i,a;for(i=0;i<H;i++)void 0===(a=P[i]).template&&void 0===a.formatter&&T.defaultFormatting&&(a.template="count"===a.aggregator?"integer":"number"),X.push(et(e,a,i,t,r))},ei=function(e,t,r){var i,a,o,n;for(i=W-1;t<=i;i--)if(Y[i]){for(a=0;a<=i;a++)(R=U[a].groupHeaders)[R.length-1].numberOfColumns+=H;for(o=(l=z[i]).totalHeader,n=l.headerOnTop,a=i+1;a<=W-1;a++)U[a].groupHeaders.push({titleText:n&&a===i+1||!n&&a===W-1?$.isFunction(o)?o.call(k,r,i):jgrid.template.call(k,String(o||""),r[i],i):"",startColumnName:"y"+(e-1)+"t"+i+(1===H?"":"a0"),numberOfColumns:H})}},ea=function(e){var r=new Aggregation("count"===P[e].aggregator?"sum":P[e].aggregator,k,t);return r.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},r},eo=function(){var e,t;for(e=W-1;0<=e;e--)if(Y[e])for(null==K[e]&&(K[e]=Array(H)),t=0;t<H;t++)K[e][t]=ea(t)},el=function(e,t,r,i){var a,o,l,n=G.getIndexOfDifferences(t,r);if(null!==r)for(n=Math.max(n,0),a=W-1;n<=a;a--)o="y"+e+"t"+a+(1<H?"a"+i:""),Y[a]&&void 0===j[o]&&((l=K[a][i]).getResult(j,o),j.pivotInfos[o]={colType:1,iA:i,a:P[i],level:a,iRows:l.groupInfo.iRows,rows:l.groupInfo.rows,ys:l.groupInfo.ys,iYs:l.groupInfo.iYs},t!==r&&(K[a][i]=ea(i)))},en=function(t,r,i,a,o,l,n){var s,d,c;if(t!==r)for(s=W-1;0<=s;s--)Y[s]&&((d=K[s][a]).calc(o[i.member],i.member,o,l,e),c=d.groupInfo,0>$.inArray(n,c.iYs)&&(c.iYs.push(n),c.ys.push(t)),0>$.inArray(l,c.iRows)&&(c.iRows.push(l),c.rows.push(o)))};if(0===L||0===H)throw"xDimension or aggregates options are not set!";for(S=ee(B,T.skipSortByX,T.compareVectorsByX),G=ee(z,T.skipSortByY,T.compareVectorsByY),t.xIndex=S,t.yIndex=G,i=0;i<L;i++)n={name:"x"+i,label:null!=(o=B[i]).label?$.isFunction(o.label)?o.label.call(k,o,i,T):o.label:o.dataName,frozen:T.frozenStaticCols},!(i<L-1)||o.skipGrouping||o.additionalProperty||(E.groupField.push(n.name),E.groupSummary.push(T.groupSummary),E.groupSummaryPos.push(T.groupSummaryPos)),delete(n=$.extend(n,o)).dataName,delete n.footerText,o.additionalProperty?Z.push(n.name):(X.push(n),N.sortname=n.name);for(L<2&&(N.grouping=!1),E.hideFirstGroupCol=!0,i=0;i<V;i++)l=z[i],Y.push(!!(l.totals||l.rowTotals||l.totalText||l.totalHeader));for(D=G.getItem(0),er(0,V-1,0),O=G.getIndexLength(),w=1;w<O;w++){for(y=G.getItem(w),i=G.getIndexOfDifferences(y,D),a=W-1;i<=a;a--)Y[a]&&er(1,a,w-1);D=y,er(0,V-1,w)}for(i=W-1;0<=i;i--)Y[i]&&er(1,i,O-1);for(M&&er(2),D=G.getItem(0),a=0;a<W;a++)U.push({useColSpanStyle:T.useColSpanStyle,groupHeaders:[{titleText:$.isFunction(z[a].label)?z[a].label.call(k,{yData:D[a],yIndex:D,yLevel:a,pivotOptions:T}):D[a],startColumnName:1===H?"y0":"y0a0",numberOfColumns:H}]});for(w=1;w<O;w++){for(y=G.getItem(w),ei(w,i=G.getIndexOfDifferences(y,D),D),a=W-1;i<=a;a--)U[a].groupHeaders.push({titleText:$.isFunction(z[a].label)?z[a].label.call(k,{yData:y[a],yIndex:y,yLevel:a,pivotOptions:T}):y[a],startColumnName:"y"+w+(1===H?"":"a0"),numberOfColumns:H});for(a=0;a<i;a++)(R=U[a].groupHeaders)[R.length-1].numberOfColumns+=H;D=y}if(ei(O,0,D),M)for(i=0;i<W;i++)U[i].groupHeaders.push({titleText:i<W-1?"":T.totalHeader||"",startColumnName:"t"+(1===H?"":"a0"),numberOfColumns:H});for(v=S.getIndexLength(),c=0;c<v;c++){for(u=S.getItem(c),j={pivotInfos:p={iX:c,x:u}},i=0;i<L;i++)j["x"+i]=u[i];if(b=S.getIndexesOfSourceData(c),M)for(a=0;a<H;a++)J[a]=ea(a);for(D=null,eo(),w=0;w<O;w++){for(y=G.getItem(w),_=G.getIndexesOfSourceData(w),a=0;a<H;a++){for(null!==D&&el(w-1,y,D,a),x=[],i=0;i<_.length;i++)q=_[i],0<=$.inArray(q,b)&&x.push(q);if(0<x.length){for(h=Array(x.length),f=new Aggregation((C=P[a]).aggregator,k,t),s=0;s<x.length;s++)r=e[i=x[s]],h[s]=r,f.calc(r[C.member],C.member,r,i,e),M&&((g=J[a]).calc(r[C.member],C.member,r,i,e),m=g.groupInfo,0>$.inArray(i,m.iYs)&&(m.iYs.push(w),m.ys.push(y)),0>$.inArray(i,m.iRows)&&(m.iRows.push(i),m.rows.push(r))),en(y,D,C,a,r,i,w);d="y"+w+(1===H?"":"a"+a),f.getResult(j,d),p[d]={colType:0,iY:w,y:y,iA:a,a:C,iRows:x,rows:h}}}D=y}if(null!==D)for(a=0;a<H;a++)el(O-1,D,D,a);if(M)for(a=0;a<H;a++)d="t"+(1===H?"":"a"+a),(g=J[a]).getResult(j,d),m=g.groupInfo,p[d]={colType:2,iA:a,a:P[a],iRows:m.iRows,rows:m.rows,iYs:m.iYs,ys:m.ys};Q.push(j)}if(T.footerTotals||T.colTotals){for(A=Q.length,i=0;i<L;i++)I["x"+i]=B[i].footerText||"";for(i=L;i<X.length;i++){for(d=X[i].name,f=new Aggregation(T.footerAggregator||"sum",k,t),s=0;s<A;s++)j=Q[s],f.calc(j[d],d,j,s,Q);f.getResult(I,d)}}return t.colHeaders=U,{colModel:X,additionalProperties:Z,options:t,rows:Q,groupOptions:N,groupHeaders:U,summary:I}},jqPivot:function(e,t,r,i){return this.each(function(){var a=this,o=$(a),l=$.fn.jqGrid;function n(){var i,n=l.pivotSetup.call(o,e,t),s=n.groupHeaders,d=0<function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}(n.summary),c=n.groupOptions.groupingView,u=jgrid.from.call(a,n.rows);if(!t.skipSortByX)for(i=0;i<c.groupField.length;i++)u.orderBy(c.groupField[i],null!=r&&r.groupingView&&null!=r.groupingView.groupOrder&&"desc"===r.groupingView.groupOrder[i]?"d":"a","text","");if(t.data=e,l.call(o,$.extend(!0,{datastr:$.extend(u.select(),d?{userdata:n.summary}:{}),datatype:"jsonstring",footerrow:d,userDataOnFooter:d,colModel:n.colModel,additionalProperties:n.additionalProperties,pivotOptions:n.options,viewrecords:!0,sortname:t.xDimension[0].dataName},n.groupOptions,r||{})),s.length)for(i=0;i<s.length;i++)s[i]&&s[i].groupHeaders.length&&l.setGroupHeaders.call(o,s[i]);t.frozenStaticCols&&l.setFrozenColumns.call(o)}"string"==typeof e?$.ajax($.extend({url:e,dataType:"json",success:function(t){e=jgrid.getAccessor(t,i&&i.reader?i.reader:"rows"),n()}},i||{})):n()})}});var subGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="subGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},collapseOrExpand=function(e,t){return this.each(function(){if(this.grid&&null!=e&&!0===this.p.subGrid){var r=$(this).jqGrid("getInd",e,!0);$(r).find(">td."+t).trigger("click")}})};jgrid.extend({setSubGrid:function(){return this.each(function(){var e,t=this.p,r=$(this),i=t.subGridModel[0],a=function(e){return r.jqGrid("getIconRes",e)};if(t.subGridOptions=$.extend({commonIconClass:a("subgrid.common"),plusicon:a("subgrid.plus"),minusicon:a("subgrid.minus"),openicon:a("rtl"===t.direction?"subgrid.openRtl":"subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},t.subGridOptions||{}),t.colNames.unshift(""),t.colModel.unshift({name:"subgrid",width:jgrid.cell_width?t.subGridWidth+t.cellLayout:t.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),i)for(i.align=$.extend([],i.align||[]),e=0;e<i.name.length;e++)i.align[e]=i.align[e]||"left"})},addSubGridCell:function(e,t,r,i){var a=this[0],o=a.p.subGridOptions,l=!$.isFunction(o.hasSubgrid)||o.hasSubgrid.call(a,{rowid:r,iRow:t,iCol:e,data:i});return null==a.p?"":"<td role='gridcell' class='"+base.getGuiStyles.call(this,"subgrid.tdStart",l?"ui-sgcollapsed sgcollapsed":"")+"' "+a.formatCol(e,t)+">"+(l?"<div class='"+base.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+jgrid.mergeCssClasses(o.commonIconClass,o.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(e,t){return this.each(function(){var r,i,a,o=this,l=o.p,n=l.subGridModel[0],s=function(e,t){return base.getGuiStyles.call(o,"subgrid."+e,t||"")},d=s("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+l.direction),c=s("rowSubTable","ui-subtblcell"),u=s("row","ui-subgrid ui-row-"+l.direction),p=s("tdWithIcon","subgrid-cell"),h=s("tdData","subgrid-data"),f=function(e,t,r){var i=n.align[r],a=$("<td"+(i?" style='text-align:"+i+";'":"")+"></td>").html(t);e.append(a)},g=function(e,t){var r=l.xmlReader.subgrid;$(r.root+" "+r.row,e).each(function(){var e,i,a=$("<tr class='"+c+"'></tr>");if(!0===r.repeatitems)$(r.cell,this).each(function(e){f(a,$(this).text()||"&#160;",e)});else if(e=n.mapping||n.name)for(i=0;i<e.length;i++)f(a,jgrid.getXmlData(this,e[i])||"&#160;",i);t.append(a)})},m=function(e,t){var r,i,a,o,s,d=l.jsonReader.subgrid,u=jgrid.getAccessor(e,d.root);if(null!=u)for(i=0;i<u.length;i++){if(s=u[i],r=$("<tr class='"+c+"'></tr>"),!0===d.repeatitems)for(d.cell&&(s=s[d.cell]),a=0;a<s.length;a++)f(r,s[a]||"&#160;",a);else if((o=n.mapping||n.name).length)for(a=0;a<o.length;a++)f(r,jgrid.getAccessor(s,o[a])||"&#160;",a);t.append(r)}},v=function(e,t,r){var i,a,c=s("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===l.altRows&&$(o).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),u=$("<table"+(c?" style='width:1px' role='presentation' class='"+c+"'":"")+"><thead></thead><tbody></tbody></table>"),p=$("<tr></tr>");for(o.grid.endReq.call(o),a=0;a<n.name.length;a++)i=$("<th class='"+d+"'></th>").html(n.name[a]).width(n.width[a]),p.append(i);return p.appendTo(u[0].tHead),r(e,$(u[0].tBodies[0])),$("#"+jqID(l.id+"_"+t)).append(u),!1},b=function(){var t,r=$(this).parent("tr")[0],i=r.nextSibling,a=r.id,s=l.id+"_"+a,d=function(e){return jgrid.mergeCssClasses(l.subGridOptions.commonIconClass,l.subGridOptions[e])},c=1;if($.each(l.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||c++}),$(this).hasClass("sgcollapsed")){if(!0!==l.subGridOptions.reloadOnExpand&&(!1!==l.subGridOptions.reloadOnExpand||$(i).hasClass("ui-subgrid")))$(i).show();else{if(t=1<=e?"<td colspan='"+e+"'>&#160;</td>":"",!subGridFeedback.call(o,"beforeExpand",s,a))return;$(r).after("<tr role='row' class='"+u+"'>"+t+"<td class='"+p+"'><span class='"+d("openicon")+"'></span></td><td colspan='"+parseInt(l.colNames.length-c,10)+"' class='"+h+"'><div id='"+s+"' class='tablediv'></div></td></tr>"),$(o).triggerHandler("jqGridSubGridRowExpanded",[s,a]),$.isFunction(l.subGridRowExpanded)?l.subGridRowExpanded.call(o,s,a):function(e){var t,r,i=$(e).attr("id"),a={nd_:new Date().getTime()};if(a[l.prmNames.subgridid]=i,n){if(n.params)for(r=0;r<n.params.length;r++)void 0!==(t=l.iColByName[n.params[r]])&&(a[l.colModel[t].name]=$(e.cells[t]).text().replace(/\&#160\;/gi,""));if(!o.grid.hDiv.loading)switch(o.grid.beginReq.call(o),l.subgridtype||(l.subgridtype=l.datatype),$.isFunction(l.subgridtype)?l.subgridtype.call(o,a):l.subgridtype=l.subgridtype.toLowerCase(),l.subgridtype){case"xml":case"json":$.ajax($.extend({type:l.mtype,url:$.isFunction(l.subGridUrl)?l.subGridUrl.call(o,a):l.subGridUrl,dataType:l.subgridtype,context:i,data:jgrid.serializeFeedback.call(o,l.serializeSubGridData,"jqGridSerializeSubGridData",a),success:function(e){v(e,this,"xml"===l.subgridtype?g:m)},error:function(e,t,r){var i=void 0===l.loadSubgridError?l.loadError:l.loadSubgridError;o.grid.endReq.call(o),$.isFunction(i)&&i.call(o,e,t,r),l.subGridOptions.noEmptySubgridOnError||v(null,this,"xml"===l.subgridtype?g:m)}},jgrid.ajaxOptions,l.ajaxSubgridOptions||{}))}}}(r)}$(this).html("<div class='"+base.getGuiStyles.call(o,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(o,"subgrid.button","sgbutton")+"'><span class='"+d("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),l.subGridOptions.selectOnExpand&&$(o).jqGrid("setSelection",a)}else if($(this).hasClass("sgexpanded")){if(!subGridFeedback.call(o,"beforeCollapse",s,a))return;!0===l.subGridOptions.reloadOnExpand?$(i).remove(".ui-subgrid"):$(i).hasClass("ui-subgrid")&&$(i).hide(),$(this).html("<div class='"+base.getGuiStyles.call(o,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(o,"subgrid.button","sgbutton")+"'><span class='"+d("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),l.subGridOptions.selectOnCollapse&&$(o).jqGrid("setSelection",a)}return!1},w=1;if(o.grid){for(r=o.rows.length,void 0!==t&&0<t&&(r=(w=t)+1);w<r;)$(i=o.rows[w]).hasClass("jqgrow")&&(a=$(i.cells[e])).hasClass("ui-sgcollapsed")&&(l.scroll&&a.off("click"),a.on("click",b)),w++;if(!0===l.subGridOptions.expandOnLoad){var y=l.iColByName.subgrid;$(o.rows).filter(".jqgrow").each(function(e,t){$(t.cells[y]).filter(".sgcollapsed").children(".sgbutton-div").children(".sgbutton").click()})}o.subGridXml=function(e,t){return v(e,t,g)},o.subGridJson=function(e,t){return v(e,t,m)}}})},expandSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return collapseOrExpand.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(e,t){$(e).each(function(){var e,r,i,a,o,l,n,s,d=$(this),c=[],u=[],p=[],h=[],f=[];if(!this.grid){for(d.width("99%"),e=d.width(),r=$("tr td:first-child input[type=checkbox]:first",d),i=$("tr td:first-child input[type=radio]:first",d),o=!(a=0<r.length)&&0<i.length,l=a||o,$("th",d).each(function(){0===c.length&&l?(c.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),u.push("__selection__")):(c.push({name:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),index:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),width:$(this).width()||150}),u.push($(this).html()))}),$("tbody > tr",d).each(function(){var e={},t=0;$("td",$(this)).each(function(){if(0===t&&l){var r=$("input",$(this)),i=r.attr("value");h.push(i||p.length),r.is(":checked")&&f.push(i),e[c[t].name]=r.attr("value")}else e[c[t].name]=$(this).html();t++}),0<t&&p.push(e)}),d.empty(),d.jqGrid($.extend({datatype:"local",width:e,colNames:u,colModel:c,multiselect:a},t||{})),n=0;n<p.length;n++)s=null,0<h.length&&(s=h[n])&&s.replace&&(s=encodeURIComponent(s).replace(/[.\-%]/g,"_")),null===s&&(s=$.jgrid.randId()),d.jqGrid("addRowData",s,p[n]);for(n=0;n<f.length;n++)d.jqGrid("setSelection",f[n])}})};var treeGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="treeGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},getNodeIcons=function(e,t){var r=t[e.treeReader.icon_field],i=e.treeIcons,a=i.plus+" tree-plus",o=i.minus+" tree-minus";return r&&"string"==typeof r&&2===(r=r.split(",")).length&&(o=r[0],a=r[1]),{expanded:o,collapsed:a,common:i.commonIconClass}};jgrid.extend({setTreeNode:function(){return this.each(function(){var e=$(this),t=this.p;if(this.grid&&t.treeGrid){var r=t.treeReader.expanded_field,i=t.treeReader.leaf_field;e.off("jqGridBeforeSelectRow.setTreeNode"),e.on("jqGridBeforeSelectRow.setTreeNode",function(a,o,l){if(null!=l){var n=$(l.target),s=n.closest("tr.jqgrow>td"),d=s.parent(),c=function(){var a=t.data[t._index[stripPref(t.idPrefix,o)]],l=a[r]?"collapse":"expand";a[i]||(base[l+"Row"].call(e,a,d),base[l+"Node"].call(e,a,d))};return n.is("div.treeclick")?c():t.ExpandColClick&&0<s.length&&0<n.closest("span.cell-wrapper",s).length&&c(),!0}})}})},setTreeGrid:function(){return this.each(function(){var e,t,r,i=this.p,a=[],o=["leaf_field","expanded_field","loaded"];if(i.treeGrid){for(t in i.treedatatype||$.extend(this.p,{treedatatype:i.datatype}),i.subGrid=!1,i.altRows=!1,i.pgbuttons=!1,i.pginput=!1,i.gridview=!0,null===i.rowTotal&&(i.rowNum=i.maxRowNum),i.rowList=[],i.treeIcons.plus="rtl"===i.direction?i.treeIcons.plusRtl:i.treeIcons.plusLtr,"nested"===i.treeGridModel?i.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},i.treeReader):"adjacency"===i.treeGridModel&&(i.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},i.treeReader)),i.colModel)if(i.colModel.hasOwnProperty(t))for(r in e=i.colModel[t].name,i.treeReader)i.treeReader.hasOwnProperty(r)&&i.treeReader[r]===e&&a.push(e);$.each(i.treeReader,function(e){var t=String(this);t&&-1===$.inArray(t,a)&&(0<=$.inArray(e,o)?i.additionalProperties.push({name:t,search:!1,convert:function(e){return!0===e||"true"===String(e).toLowerCase()||"1"===String(e)||e}}):i.additionalProperties.push(t))})}})},expandRow:function(e){this.each(function(){var t=$(this),r=this.p;if(this.grid&&r.treeGrid){var i=r.treeReader.expanded_field,a=e[r.localReader.id];if(treeGridFeedback.call(this,"beforeExpandRow",{rowid:a,item:e})){var o=base.getNodeChildren.call(t,e);$(o).each(function(){var e=r.idPrefix+getAccessor(this,r.localReader.id);$(base.getGridRowById.call(t,e)).css("display",""),this[i]&&base.expandRow.call(t,this)}),treeGridFeedback.call(this,"afterExpandRow",{rowid:a,item:e})}}})},collapseRow:function(e){this.each(function(){var t=$(this),r=this.p;if(this.grid&&r.treeGrid){var i=r.treeReader.expanded_field,a=e[r.localReader.id];if(treeGridFeedback.call(this,"beforeCollapseRow",{rowid:a,item:e})){var o=base.getNodeChildren.call(t,e);$(o).each(function(){var e=r.idPrefix+getAccessor(this,r.localReader.id);$(base.getGridRowById.call(t,e)).css("display","none"),this[i]&&base.collapseRow.call(t,this)}),treeGridFeedback.call(this,"afterCollapseRow",{rowid:a,item:e})}}})},getRootNodes:function(){var e=[];return this.each(function(){var t=this.p;if(this.grid&&t.treeGrid)switch(t.treeGridModel){case"nested":var r=t.treeReader.level_field;$(t.data).each(function(){parseInt(this[r],10)===parseInt(t.tree_root_level,10)&&e.push(this)});break;case"adjacency":var i=t.treeReader.parent_id_field;$(t.data).each(function(){null!==this[i]&&"null"!==String(this[i]).toLowerCase()||e.push(this)})}}),e},getNodeDepth:function(e){var t=null;return this.each(function(){var r=this.p;if(this.grid&&r.treeGrid)switch(r.treeGridModel){case"nested":t=parseInt(e[r.treeReader.level_field],10)-parseInt(r.tree_root_level,10);break;case"adjacency":t=base.getNodeAncestors.call($(this),e).length}}),t},getNodeParent:function(e){var t=this[0];if(!t||!t.grid||null==t.p||!t.p.treeGrid||null==e)return null;var r=t.p,i=r.treeReader,a=e[i.parent_id_field];if("nested"===r.treeGridModel){var o=null,l=i.left_field,n=i.right_field,s=i.level_field,d=parseInt(e[l],10),c=parseInt(e[n],10),u=parseInt(e[s],10);return $(r.data).each(function(){if(parseInt(this[s],10)===u-1&&parseInt(this[l],10)<d&&parseInt(this[n],10)>c)return o=this,!1}),o}if(null===a||"null"===a)return null;var p=r._index[a];return void 0!==p?r.data[p]:null},getNodeChildren:function(e){var t=[];return this.each(function(){var r=this.p;if(this.grid&&r.treeGrid)switch(r.treeGridModel){case"nested":var i=r.treeReader.left_field,a=r.treeReader.right_field,o=r.treeReader.level_field,l=parseInt(e[i],10),n=parseInt(e[a],10),s=parseInt(e[o],10);$(r.data).each(function(){parseInt(this[o],10)===s+1&&parseInt(this[i],10)>l&&parseInt(this[a],10)<n&&t.push(this)});break;case"adjacency":var d=r.treeReader.parent_id_field,c=r.localReader.id;$(r.data).each(function(){String(this[d])===String(e[c])&&t.push(this)})}}),t},getFullTreeNode:function(e){var t=[];return this.each(function(){var r,i=this.p;if(this.grid&&i.treeGrid)switch(i.treeGridModel){case"nested":var a=i.treeReader.left_field,o=i.treeReader.right_field,l=i.treeReader.level_field,n=parseInt(e[a],10),s=parseInt(e[o],10),d=parseInt(e[l],10);$(i.data).each(function(){parseInt(this[l],10)>=d&&parseInt(this[a],10)>=n&&parseInt(this[a],10)<=s&&t.push(this)});break;case"adjacency":if(e){t.push(e);var c=i.treeReader.parent_id_field,u=i.localReader.id;$(i.data).each(function(){var e;for(r=t.length,e=0;e<r;e++)if(String(t[e][u])===String(this[c])){t.push(this);break}})}}}),t},getNodeAncestors:function(e){var t=[];return this.each(function(){var r=$(this),i=base.getNodeParent;if(this.grid&&this.p.treeGrid)for(var a=i.call(r,e);a;)t.push(a),a=i.call(r,a)}),t},isVisibleNode:function(e){var t=!0;return this.each(function(){var r=this.p;if(this.grid&&r.treeGrid){var i=base.getNodeAncestors.call($(this),e),a=r.treeReader.expanded_field;$(i).each(function(){if(!(t=t&&this[a]))return!1})}}),t},isNodeLoaded:function(e){var t;return this.each(function(){var r=this.p;if(this.grid&&r.treeGrid){var i=r.treeReader.leaf_field,a=r.treeReader.loaded;t=void 0!==e&&(void 0!==e[a]?e[a]:!!(e[i]||0<base.getNodeChildren.call($(this),e).length))}}),t},expandNode:function(e){return this.each(function(){var t,r,i,a=this,o=a.p;if(a.grid&&o.treeGrid){var l=o.treeReader;if(!e[l.expanded_field]){if(t=getAccessor(e,o.localReader.id),!treeGridFeedback.call(a,"beforeExpandNode",{rowid:t,item:e}))return;r=$("#"+o.idPrefix+jqID(t),a.grid.bDiv)[0],e[l.expanded_field]=!0,i=getNodeIcons(o,e),$("div.treeclick",r).removeClass(i.collapsed).addClass(i.common).addClass(i.expanded),"local"===o.treedatatype||base.isNodeLoaded.call($(a),o.data[o._index[t]])||a.grid.hDiv.loading||(o.treeANode=r.rowIndex,o.datatype=o.treedatatype,base.setGridParam.call($(a),{postData:"nested"===o.treeGridModel?{nodeid:t,n_level:e[l.level_field],n_left:e[l.left_field],n_right:e[l.right_field]}:{nodeid:t,n_level:e[l.level_field],parentid:e[l.parent_id_field]}}),$(a).trigger("reloadGrid"),e[l.loaded]=!0,base.setGridParam.call($(a),{postData:"nested"===o.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),treeGridFeedback.call(a,"afterExpandNode",{rowid:t,item:e})}}})},collapseNode:function(e){return this.each(function(){var t,r=this.p;if(this.grid&&r.treeGrid){var i=r.treeReader.expanded_field;if(e[i]){var a=getAccessor(e,r.localReader.id);if(!treeGridFeedback.call(this,"beforeCollapseNode",{rowid:a,item:e}))return;e[i]=!1,t=getNodeIcons(r,e),$("#"+r.idPrefix+jqID(a),this.grid.bDiv).find("div.treeclick").removeClass(t.expanded).addClass(t.common).addClass(t.collapsed),(!0===r.unloadNodeOnCollapse||$.isFunction(r.unloadNodeOnCollapse)&&r.unloadNodeOnCollapse.call(this,e))&&(e[r.treeReader.loaded]=!1,$(this).jqGrid("delTreeNode",a,!0)),treeGridFeedback.call(this,"afterCollapseNode",{rowid:a,item:e})}}})},SortTree:function(e,t,r,i){return this.each(function(){var a=this,o=a.p,l=$(a);if(a.grid&&o.treeGrid){var n,s,d,c=[],u=base.getRootNodes.call(l),p=jgrid.from.call(a,u);p.orderBy(e,t,r,i);var h=p.select();for(n=0,s=h.length;n<s;n++)d=h[n],c.push(d),base.collectChildrenSortTree.call(l,c,d,e,t,r,i);$.each(c,function(e){var t=getAccessor(this,o.localReader.id);$(a.rows[e]).after(l.find(">tbody>tr#"+jqID(t)))})}})},collectChildrenSortTree:function(e,t,r,i,a,o){return this.each(function(){var l=$(this);if(this.grid&&this.p.treeGrid){var n,s,d,c=base.getNodeChildren.call(l,t),u=jgrid.from.call(this,c);u.orderBy(r,i,a,o);var p=u.select();for(n=0,s=p.length;n<s;n++)d=p[n],e.push(d),base.collectChildrenSortTree.call(l,e,d,r,i,a,o)}})},setTreeRow:function(e,t){var r=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(r=base.setRowData.call($(this),e,t))}),r},delTreeNode:function(e,t){return this.each(function(){var r,i,a,o,l,n=this.p,s=n.localReader.id,d=$(this),c=n.treeReader.left_field,u=n.treeReader.right_field;if(this.grid&&n.treeGrid){var p=n._index[e];if(void 0!==p){i=(r=parseInt(n.data[p][u],10))-parseInt(n.data[p][c],10)+1;var h=base.getFullTreeNode.call(d,n.data[p]);if(0<h.length)for(l=0;l<h.length;l++)t&&e===h[l][s]||base.delRowData.call(d,h[l][s]);if("nested"===n.treeGridModel){if((a=jgrid.from.call(this,n.data).greater(c,r,{stype:"integer"}).select()).length)for(o in a)a.hasOwnProperty(o)&&(a[o][c]=parseInt(a[o][c],10)-i);if((a=jgrid.from.call(this,n.data).greater(u,r,{stype:"integer"}).select()).length)for(o in a)a.hasOwnProperty(o)&&(a[o][u]=parseInt(a[o][u],10)-i)}}}})},addChildNode:function(e,t,r,i){return this.each(function(){if(r){var a,o,l,n,s,d,c,u=this.p,p=$(this),h=base.getInd,f=u.treeIcons.minus+" tree-minus",g=t,m=u.treeReader.expanded_field,v=u.treeReader.leaf_field,b=u.treeReader.level_field,w=u.treeReader.parent_id_field,y=u.treeReader.left_field,_=u.treeReader.right_field,x=u.treeReader.loaded;void 0===i&&(i=!1),null==e&&(e=jgrid.randId());var C,j,D=h.call(p,t);if(d=!1,null==t||""===t)g=t=null,a="last",n=u.tree_root_level;else{a="after",o=u._index[t],t=(l=u.data[o])[u.localReader.id],s=h.call(p,t),n=parseInt(l[b],10)+1;var R,q,S,G=base.getFullTreeNode.call(p,l);if(G.length)for(R=0;R<G.length;R++)S=G[R][u.localReader.id],s<(q=h.call(p,S))&&(s=q,g=S);l[v]&&(d=!0,l[m]=!0,$(this.rows[D]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(u.treeIcons.leaf+" tree-leaf").addClass(u.treeIcons.commonIconClass).addClass(f),u.data[o][v]=!1,l[x]=!0)}if(void 0===r[m]&&(r[m]=!1),void 0===r[x]&&(r[x]=!1),r[b]=n,void 0===r[v]&&(r[v]=!0),"adjacency"===u.treeGridModel&&(r[w]=t),"nested"===u.treeGridModel){if(null!==t){if(c=parseInt(l[_],10),(C=jgrid.from.call(this,u.data).greaterOrEquals(_,c,{stype:"integer"}).select()).length)for(j in C)C.hasOwnProperty(j)&&(C[j][y]=C[j][y]>c?parseInt(C[j][y],10)+2:C[j][y],C[j][_]=C[j][_]>=c?parseInt(C[j][_],10)+2:C[j][_]);r[y]=c,r[_]=c+1}else{if(c=parseInt(base.getCol.call(p,_,!1,"max"),10),(C=jgrid.from.call(this,u.data).greater(y,c,{stype:"integer"}).select()).length)for(j in C)C.hasOwnProperty(j)&&(C[j][y]=parseInt(C[j][y],10)+2);if((C=jgrid.from.call(this,u.data).greater(_,c,{stype:"integer"}).select()).length)for(j in C)C.hasOwnProperty(j)&&(C[j][_]=parseInt(C[j][_],10)+2);r[y]=c+1,r[_]=c+2}}(null===t||base.isNodeLoaded.call(p,l)||d)&&base.addRowData.call(p,e,r,a,g),l&&!l[m]&&i&&$(this.rows[D]).find("div.treeclick").click()}})}});var namespace=".jqGrid",mouseDown="mousedown",mouseMove="mousemove",mouseUp="mouseup",getMouseCoordinates=function(e){var t=e.originalEvent.targetTouches;return t?{x:(t=t[0]).pageX,y:t.pageY}:{x:e.pageX,y:e.pageY}},jqDnR={drag:function(e){var t=e.data,r=t.e,i=t.dnr,a=t.ar,o=t.dnrAr,l=getMouseCoordinates(e);return"move"===i.k?r.css({left:i.X+l.x-i.pX,top:i.Y+l.y-i.pY}):(r.css({width:Math.max(l.x-i.pX+i.W,0),height:Math.max(l.y-i.pY+i.H,0)}),o&&a.css({width:Math.max(l.x-o.pX+o.W,0),height:Math.max(l.y-o.pY+o.H,0)})),!1},stop:function(){$(document).off(mouseMove,jqDnR.drag).off(mouseUp,jqDnR.stop)}},init=function(e,t,r,i){return e.each(function(){(t=t?$(t,e):e).on(mouseDown,{e:e,k:r},function(e){var t,r,a,o,l,n,s=e.data,d={},c=function(e,t){return parseInt(e.css(t),10)||!1},u=function(e){return c(r,e)},p=function(e){return c(o,e)},h=getMouseCoordinates(e);if(!$(e.target).hasClass("ui-jqdialog-titlebar-close")&&!$(e.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(r=s.e,o=!!i&&$(i),"relative"!==r.css("position"))try{r.position(d)}catch(f){}if(a={X:d.left||u("left")||0,Y:d.top||u("top")||0,W:u("width")||r[0].scrollWidth||0,H:u("height")||r[0].scrollHeight||0,pX:h.x,pY:h.y,k:s.k},l=!(!o||"move"===s.k)&&{X:d.left||p("left")||0,Y:d.top||p("top")||0,W:o[0].offsetWidth||p("width")||0,H:o[0].offsetHeight||p("height")||0,pX:h.x,pY:h.y,k:s.k},0<(t=r.find("input.hasDatepicker")).length)try{t.datepicker("hide")}catch(g){}return n={e:r,dnr:a,ar:o,dnrAr:l},$(document).on(mouseMove,n,jqDnR.drag),$(document).on(mouseUp,n,jqDnR.stop),!1}})})};window.PointerEvent?(mouseDown+=namespace+" pointerdown"+namespace,mouseMove+=namespace+" pointermove"+namespace,mouseUp+=namespace+" pointerup"+namespace):window.MSPointerEvent?(mouseDown+=namespace+" mspointerdown"+namespace,mouseMove+=namespace+" mspointermove"+namespace,mouseUp+=namespace+" mspointerup"):(mouseDown+=namespace+" touchstart"+namespace,mouseMove+=namespace+" touchmove"+namespace,mouseUp+=namespace+" touchend"+namespace),$.jqDnR=jqDnR,$.fn.jqDrag=function(e){return init(this,e,"move")},$.fn.jqResize=function(e,t){return init(this,e,"resize",t)};var jqmHash,jqmHashLength=0,createdModals=[],setFocusOnFirstVisibleInput=function(e){try{$(":input:visible",e.w).first().focus()}catch(t){}},setFocus=function(e){setFocusOnFirstVisibleInput(e)},keyOrMouseEventHandler=function(e){var t=jqmHash[createdModals[createdModals.length-1]],r=!$(e.target).parents(".jqmID"+t.s)[0],i=$(e.target).offset(),a=void 0!==e.pageX?e.pageX:i.left,o=void 0!==e.pageY?e.pageY:i.top,l=function(){var e=!1;return $(".jqmID"+t.s).each(function(){var t=$(this),r=t.offset();if(r.top<=o&&o<=r.top+t.height()&&r.left<=a&&a<=r.left+t.width())return e=!0,!1}),e};return!("mousedown"===e.type||!l())||("mousedown"===e.type&&r&&(l()&&(r=!1),r&&!$(e.target).is(":input")&&setFocusOnFirstVisibleInput(t)),!r)},bindOrUnbindEvents=function(e){$(document)[e]("keypress keydown mousedown",keyOrMouseEventHandler)},registerHideOrShow=function(e,t,r){return e.each(function(){var e=this._jqm;$(t).each(function(){this[r]||(this[r]=[],$(this).click(function(){var e,t,r,i=["jqmShow","jqmHide"];for(e=0;e<i.length;e++)for(r in this[t=i[e]])this[t].hasOwnProperty(r)&&jqmHash[this[t][r]]&&jqmHash[this[t][r]].w[t](this);return!1})),this[r].push(e)})})};$.fn.jqm=function(e){var t={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return jqmHash[this._jqm].c=$.extend({},jqmHash[this._jqm].c,e),jqmHash[this._jqm].c;jqmHashLength++,this._jqm=jqmHashLength,jqmHash[jqmHashLength]={c:$.extend(t,$.jqm.params,e),a:!1,w:$(this).addClass("jqmID"+jqmHashLength),s:jqmHashLength},t.trigger&&$(this).jqmAddTrigger(t.trigger)})},$.fn.jqmAddClose=function(e){return registerHideOrShow(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return registerHideOrShow(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function(e,t){var r,i,a,o,l,n=jqmHash[e],s=n.c,d=n.w.parent().offset(),c="."+s.closeClass,u=parseInt(n.w.css("z-index"),10);return u=0<u?u:3e3,r=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":u-1,opacity:s.overlay/100}),n.a||(n.t=t,n.a=!0,n.w.css("z-index",u),$(n.w[0].ownerDocument).data("ui-dialog-overlays")&&n.w.addClass("ui-dialog"),s.modal?(createdModals[0]||setTimeout(function(){bindOrUnbindEvents("bind")},1),createdModals.push(e)):0<s.overlay?s.closeoverlay&&n.w.jqmAddClose(r):r=!1,n.o=!!r&&r.addClass(s.overlayClass).prependTo("body"),s.ajax?(i=s.target||n.w,a=s.ajax,i="string"==typeof i?$(i,n.w):$(i),a="@"===a.substr(0,1)?$(t).attr(a.substring(1)):a,i.html(s.ajaxText).load(a,function(){s.onLoad&&s.onLoad.call(this,n),c&&n.w.jqmAddClose($(c,n.w)),setFocus(n)})):c&&n.w.jqmAddClose($(c,n.w)),s.toTop&&n.o&&(d=n.w.parent().offset(),o=parseFloat(n.w.css("left")||0),l=parseFloat(n.w.css("top")||0),n.w.before('<span id="jqmP'+n.w[0]._jqm+'"></span>').insertAfter(n.o),n.w.css({top:d.top+l,left:d.left+o})),s.onShow?s.onShow(n):n.w.show(),setFocus(n)),!1},close:function(e){var t=jqmHash[e];return t.a&&(t.a=!1,createdModals[0]&&(createdModals.pop(),createdModals[0]||bindOrUnbindEvents("unbind")),t.c.toTop&&t.o&&$("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove())),!1},params:{}},jqmHash=$.jqm.hash,$.fmatter=$.fmatter||{};var fmatter=$.fmatter,getOptionByName=function(e,t){var r=e.formatoptions||{};return r.hasOwnProperty(t)?r[t]:(e.editoptions||{})[t]},encodeAttr=function(e){return String(e).replace(/\'/g,"&#39;")},parseCheckboxOptions=function(e){var t,r,i=e.colModel||e.cm,a=!1!==i.title?" title='"+encodeAttr(e.colName||i.name)+"'":"",o=function(e){return getOptionByName(i,e)},l=o("checkedClass"),n=o("uncheckedClass"),s=o("value"),d="string"==typeof s&&s.split(":")[0]||"Yes",c="string"==typeof s&&s.split(":")[1]||"No",u=function(e){return"<i class='"+encodeAttr(e)+"'"+a+"></i>"},p=o("disabled");void 0===p&&(p=jgrid.formatter.checkbox.disabled);var h=base.getIconRes.call(this,"checkbox.checked"),f=base.getIconRes.call(this,"checkbox.checkedClasses"),g=base.getIconRes.call(this,"checkbox.unchecked");return!0===p&&(l||n||h||g)?(t=u(l||h),r=u(n||g),l=f||l||h):(t="<input type='checkbox' checked='checked'"+(a+=(l="",!0===p)?" disabled='disabled'":"")+" />",r="<input type='checkbox'"+a+" />"),{checkedClasses:l,checked:t,unchecked:r,yes:d,no:c}},yesObject={1:1,x:1,true:1,yes:1,y:1,on:1},noObject={0:1,false:1,no:1,n:1,off:1};$.extend(!0,jgrid,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseInt(t,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseFloat(t)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue,r=parseCheckboxOptions.call(this,e),i=String(t).toLowerCase();return yesObject[i]||i===r.yes.toLowerCase()?t=!0:(noObject[i]||i===r.no.toLowerCase())&&(t=!1),t},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){return{formatter:"actions",width:(null!=this.p&&(base.isInCommonIconClass.call(this,"fa")||base.isInCommonIconClass.call(this,"glyphicon"))?$(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(jgrid.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,title:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),jgrid.cmTemplate.booleanCheckboxFa=jgrid.cmTemplate.booleanCheckbox,$.extend(fmatter,{isObject:function(e){return e&&("object"==typeof e||$.isFunction(e))||!1},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||"string"==typeof e||this.isNumber(e)||"boolean"==typeof e},isEmpty:function(e){return("string"==typeof e||!this.isValue(e))&&(!this.isValue(e)||""===(e=$.trim(e).replace(/&nbsp;/gi,"").replace(/&#160;/gi,"")))},NumberFormat:function(e,t){var r=fmatter.isNumber;if(r(e)||(e*=1),r(e)){var i,a=e<0,o=String(e),l=t.decimalSeparator||".";if(r(t.decimalPlaces)){var n=t.decimalPlaces;if(i=(o=String(Number(Math.round(e+"e"+n)+"e-"+n))).lastIndexOf("."),0<n)for(i<0?i=(o+=l).length-1:"."!==l&&(o=o.replace(".",l));o.length-1-i<n;)o+="0"}if(t.thousandsSeparator){var s=t.thousandsSeparator;i=-1<(i=o.lastIndexOf(l))?i:o.length;var d,c=void 0===t.decimalSeparator?"":o.substring(i),u=-1;for(d=i;0<d;d--)++u%3==0&&d!==i&&(!a||1<d)&&(c=s+c),c=o.charAt(d-1)+c;o=c}return o}return e}});var $FnFmatter=function(e,t,r,i,a){var o=t;r=$.extend({},getGridRes.call($(this),"formatter"),r);try{o=$.fn.fmatter[e].call(this,t,r,i,a)}catch(l){}return o};$.fn.fmatter=$FnFmatter,$FnFmatter.getCellBuilder=function(e,t,r){var i=null!=$.fn.fmatter[e]?$.fn.fmatter[e].getCellBuilder:null;return $.isFunction(i)?i.call(this,$.extend({},getGridRes.call($(this),"formatter"),t),r):null},$FnFmatter.defaultFormat=function(e,t){return fmatter.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"};var defaultFormat=$FnFmatter.defaultFormat,formatCheckboxValue=function(e,t,r){if(void 0===e||fmatter.isEmpty(e)){var i=getOptionByName(r,"defaultValue");void 0===i&&(i=t.no),e=i}return yesObject[e=String(e).toLowerCase()]||e===t.yes.toLowerCase()?t.checked:t.unchecked};$FnFmatter.email=function(e,t){return fmatter.isEmpty(e)?defaultFormat(e,t):"<a href='mailto:"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.checkbox=function(e,t){return formatCheckboxValue(e,parseCheckboxOptions.call(this,t),t.colModel)},$FnFmatter.checkbox.getCellBuilder=function(e){var t,r=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=parseCheckboxOptions.call(this,e),function(e){return formatCheckboxValue(e,t,r)}},$FnFmatter.checkbox.unformat=function(e,t,r){var i=parseCheckboxOptions.call(this,t),a=$(r);return(i.checkedClasses?jgrid.hasAllClasses(a.children("i,svg"),i.checkedClasses):a.children("input").is(":checked"))?i.yes:i.no},$FnFmatter.checkboxFontAwesome4=$FnFmatter.checkbox,$FnFmatter.checkboxFontAwesome4.getCellBuilder=$FnFmatter.checkbox.getCellBuilder,$FnFmatter.checkboxFontAwesome4.unformat=$FnFmatter.checkbox.unformat,$FnFmatter.link=function(e,t){var r=t.colModel,i="",a={target:t.target};return null!=r&&(a=$.extend({},a,r.formatoptions||{})),a.target&&(i="target="+a.target),fmatter.isEmpty(e)?defaultFormat(e,a):"<a "+i+" href='"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.showlink=function(e,t,r){var i,a,o,l=this,n=t.colModel,s={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName,hrefDefaultValue:"#"},d="",c=function(i){return $.isFunction(i)?i.call(l,{cellValue:e,rowid:t.rowId,rowData:r,options:s}):i||""};return null!=n&&(s=$.extend({},s,n.formatoptions||{})),s.target&&(d="target="+c(s.target)),i=c(s.baseLinkUrl)+c(s.showAction),a=s.idName?encodeURIComponent(c(s.idName))+"="+encodeURIComponent(c(s.rowId)||t.rowId):"","object"==typeof(o=c(s.addParam))&&null!==o&&(o=(""!==a?"&":"")+$.param(o)),""==(i+=a||o?"?"+a+o:"")&&(i=c(s.hrefDefaultValue)),"string"==typeof e||fmatter.isNumber(e)||$.isFunction(s.cellValue)?"<a "+d+" href='"+encodeAttr(i)+"'>"+($.isFunction(s.cellValue)?c(s.cellValue):e)+"</a>":defaultFormat(e,s)},$FnFmatter.showlink.getCellBuilder=function(e){var t={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName,hrefDefaultValue:"#"},r=e.colModel;return null!=r&&(t=$.extend({},t,r.formatoptions||{})),function(e,r,i){var a,o,l,n=this,s=r.rowId,d="",c=function(r){return $.isFunction(r)?r.call(n,{cellValue:e,rowid:s,rowData:i,options:t}):r||""};return t.target&&(d="target="+c(t.target)),a=c(t.baseLinkUrl)+c(t.showAction),o=t.idName?encodeURIComponent(c(t.idName))+"="+encodeURIComponent(c(s)||r.rowId):"","object"==typeof(l=c(t.addParam))&&null!==l&&(l=(""!==o?"&":"")+$.param(l)),""==(a+=o||l?"?"+o+l:"")&&(a=c(t.hrefDefaultValue)),"string"==typeof e||fmatter.isNumber(e)||$.isFunction(t.cellValue)?"<a "+d+" href='"+encodeAttr(a)+"'>"+($.isFunction(t.cellValue)?c(t.cellValue):e)+"</a>":defaultFormat(e,t)}},$FnFmatter.showlink.pageFinalization=function(e){var t,r,i,a=$(this),o=this.p,l=o.colModel[e],n=o.autoResizing.wrapperClassName,s=this.rows,d=s.length,c=function(e){var t=$(this).closest("tr.jqgrow>td"),r=t.parent(),i=t[0].cellIndex,l=o.colModel[i];if(0<r.length)return l.formatoptions.onClick.call(a[0],{iCol:i,iRow:r[0].rowIndex,rowid:r.attr("id"),cm:l,cmName:l.name,cellValue:$(this).text(),a:this,event:e})};if(null!=l.formatoptions&&$.isFunction(l.formatoptions.onClick))for(t=0;t<d;t++)$(r=s[t]).hasClass("jqgrow")&&(i=r.cells[e],l.autoResizable&&null!=i&&$(i.firstChild).hasClass(n)&&(i=i.firstChild),null!=i&&$(i.firstChild).on("click",c))};var insertPrefixAndSuffix=function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e},numberHelper=function(e,t,r){var i=t.colModel,a=$.extend({},t[r]);return null!=i&&(a=$.extend({},a,i.formatoptions||{})),fmatter.isEmpty(e)?insertPrefixAndSuffix(a.defaultValue,a):insertPrefixAndSuffix(fmatter.NumberFormat(e,a),a)};$FnFmatter.integer=function(e,t){return numberHelper(e,t,"integer")},$FnFmatter.number=function(e,t){return numberHelper(e,t,"number")},$FnFmatter.currency=function(e,t){return numberHelper(e,t,"currency")};var numberCellBuilder=function(e,t){var r=e.colModel,i=$.extend({},e[t]);null!=r&&(i=$.extend({},i,r.formatoptions||{}));var a=fmatter.NumberFormat,o=i.defaultValue?insertPrefixAndSuffix(i.defaultValue,i):"";return function(e){return fmatter.isEmpty(e)?o:insertPrefixAndSuffix(a(e,i),i)}};$FnFmatter.integer.getCellBuilder=function(e){return numberCellBuilder(e,"integer")},$FnFmatter.number.getCellBuilder=function(e){return numberCellBuilder(e,"number")},$FnFmatter.currency.getCellBuilder=function(e){return numberCellBuilder(e,"currency")},$FnFmatter.date=function(e,t,r,i){var a=t.colModel,o=$.extend({},t.date);return null!=a&&(o=$.extend({},o,a.formatoptions||{})),o.reformatAfterEdit||"edit"!==i?fmatter.isEmpty(e)?defaultFormat(e,o):jgrid.parseDate.call(this,o.srcformat,e,o.newformat,o):defaultFormat(e,o)},$FnFmatter.date.getCellBuilder=function(e,t){var r=$.extend({},e.date);null!=e.colModel&&(r=$.extend({},r,e.colModel.formatoptions||{}));var i=jgrid.parseDate,a=r.srcformat,o=r.newformat;return r.reformatAfterEdit||"edit"!==t?function(e){return fmatter.isEmpty(e)?defaultFormat(e,r):i.call(this,a,e,o,r)}:function(e){return defaultFormat(e,r)}},$FnFmatter.select=function(e,t){var r,i=[],a=t.colModel,o=$.extend({},a.editoptions||{},a.formatoptions||{}),l="function"==typeof o.value?o.value():o.value,n=o.separator||":",s=o.delimiter||";";if(l){var d,c=!0===o.multiple,u=[],p=function(e,t){if(0<t)return e};if(c&&(u=$.map(String(e).split(","),function(e){return $.trim(e)})),"string"==typeof l){var h,f,g=l.split(s);for(h=0;h<g.length;h++)if(2<(d=g[h].split(n)).length&&(d[1]=$.map(d,p).join(n)),f=$.trim(d[0]),o.defaultValue===f&&(r=d[1]),c)-1<$.inArray(f,u)&&i.push(d[1]);else if(f===$.trim(e)){i=[d[1]];break}}else fmatter.isObject(l)&&(r=l[o.defaultValue],i=c?$.map(u,function(e){return l[e]}):[void 0===l[e]?"":l[e]])}return""!==(e=i.join(", "))?e:void 0!==o.defaultValue?r:defaultFormat(e,o)},$FnFmatter.select.getCellBuilder=function(e){var t,r,i,a,o=e.colModel,l=$FnFmatter.defaultFormat,n=$.extend({},o.editoptions||{},o.formatoptions||{}),s="function"==typeof n.value?n.value():n.value,d=n.separator||":",c=n.delimiter||";",u=void 0!==n.defaultValue,p=!0===n.multiple,h={},f=function(e,t){if(0<t)return e};if("string"==typeof s)for(a=(i=s.split(c)).length-1;0<=a;a--)2<(r=i[a].split(d)).length&&(r[1]=$.map(r,f).join(d)),h[$.trim(r[0])]=r[1];else{if(!fmatter.isObject(s))return function(e){return e?String(e):l(e,n)};h=s}return u&&(t=h[n.defaultValue]),p?function(e){var r,i=[],a=$.map(String(e).split(","),function(e){return $.trim(e)});for(r=0;r<a.length;r++)e=a[r],h.hasOwnProperty(e)&&i.push(h[e]);return""!==(e=i.join(", "))?e:u?t:l(e,n)}:function(e){var r=h[String(e)];return""!==r&&void 0!==r?r:u?t:l(e,n)}},$FnFmatter.rowactions=function(e,t){var r,i,a,o,l=$(this).closest("tr.jqgrow>td"),n=l.parent(),s=n.attr("id"),d=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),c=$("#"+jgrid.jqID(d)),u=c[0],p=u.p,h=jgrid.getRelativeRect.call(u,n).top,f=p.colModel[l[0].cellIndex],g=$.extend(!0,{extraparam:{}},jgrid.actionsNav||{},p.actionsNavOptions||{},f.formatoptions||{});switch(void 0!==p.editOptions&&(g.editOptions=$.extend(!0,g.editOptions||{},p.editOptions)),void 0!==p.delOptions&&(g.delOptions=p.delOptions),n.hasClass("jqgrid-new-row")&&(g.extraparam[p.prmNames.oper]=p.prmNames.addoper),o={keys:g.keys,oneditfunc:g.onEdit,successfunc:g.onSuccess,url:g.url,extraparam:g.extraparam,aftersavefunc:g.afterSave,errorfunc:g.onError,afterrestorefunc:g.afterRestore,restoreAfterError:g.restoreAfterError,mtype:g.mtype},!p.multiselect&&s!==p.selrow||p.multiselect&&0>$.inArray(s,p.selarrrow)?c.jqGrid("setSelection",s,!0,e):jgrid.fullBoolFeedback.call(u,"onSelectRow","jqGridSelectRow",s,!0,e),t){case"edit":c.jqGrid("editRow",s,o);break;case"save":c.jqGrid("saveRow",s,o);break;case"cancel":c.jqGrid("restoreRow",s,g.afterRestore);break;case"del":g.delOptions=g.delOptions||{},void 0===g.delOptions.top&&(g.delOptions.top=h),c.jqGrid("delGridRow",s,g.delOptions);break;case"formedit":g.editOptions=g.editOptions||{},void 0===g.editOptions.top&&(g.editOptions.top=h,g.editOptions.recreateForm=!0),c.jqGrid("editGridRow",s,g.editOptions);break;default:if(null!=g.custom&&0<g.custom.length)for(i=g.custom.length,r=0;r<i;r++)(a=g.custom[r]).action===t&&$.isFunction(a.onClick)&&a.onClick.call(u,{rowid:s,event:e,action:t,options:a})}return e.stopPropagation&&e.stopPropagation(),!1},$FnFmatter.actions=function(e,t,r,i){var a,o,l,n=t.rowId,s="",d=$(this),c={},u=getGridRes.call(d,"edit")||{},p=$.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:u.bSubmit||"",canceltitle:u.bCancel||""},getGridRes.call(d,"nav")||{},jgrid.nav||{},this.p.navOptions||{},getGridRes.call(d,"actionsNav")||{},jgrid.actionsNav||{},this.p.actionsNavOptions||{},(t.colModel||{}).formatoptions||{}),h=[{action:"edit",actionName:"formedit",display:p.editformbutton},{action:"edit",display:!p.editformbutton&&p.editbutton},{action:"del",idPrefix:"Delete",display:p.delbutton},{action:"save",display:p.editformbutton||p.editbutton,hidden:!0},{action:"cancel",display:p.editformbutton||p.editbutton,hidden:!0},],f=function(e){var t,r=e.action,i=e.actionName||r,a=void 0!==e.idPrefix?e.idPrefix:r.charAt(0).toUpperCase()+r.substring(1);return"<div title='"+encodeAttr(p[r+"title"])+(e.hidden?"' style='display:none;":"")+"' class='"+encodeAttr(d.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+r))+"' "+(null!==a?"id='j"+encodeAttr(a+"Button_"+n):"")+"' data-jqactionname=\""+i+'" '+(e.noHovering?"":'\' data-jqhovering="1" ')+"><span class='"+encodeAttr((t=r,jgrid.mergeCssClasses(p.commonIconClass,p[t+"icon"])))+"'></span></div>"},g=null!=p.custom?p.custom.length-1:-1;if(void 0===n||fmatter.isEmpty(n))return"";if($.isFunction(p.isDisplayButtons))try{c=p.isDisplayButtons.call(this,p,r,i)||{}}catch(m){}for(;0<=g;)h["first"===(l=p.custom[g--]).position?"unshift":"push"](l);for(a=0,g=h.length;a<g;a++)!1!==(o=$.extend({},h[a],c[h[a].action]||{})).display&&(s+=f(o));return"<div class='"+encodeAttr(d.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+s+"</div>"},$FnFmatter.actions.pageFinalization=function(e){var t,r,i,a,o=$(this),l=this.p,n=l.colModel[e],s=l.autoResizing.wrapperClassName,d=o.jqGrid("getGuiStyles","states.hover"),c=this.rows,u=this.grid.fbRows,p=c.length,h=(a=n.name,function(e,t){var r,i,n=0,s=l.colModel,d=s.length,c=l.iColByName[a];for(i=0;i<d&&!0===s[i].frozen;i++)n=i;null!=t&&null!=t.cells&&(r=$(t.cells[c]).children(".ui-jqgrid-actions"),s[c].frozen&&l.frozenColumns&&c<=n&&(r=r.add($(o[0].grid.fbRows[t.rowIndex].cells[c]).children(".ui-jqgrid-actions"))),e?(r.find(">.ui-inline-edit,>.ui-inline-del").show(),r.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(r.find(">.ui-inline-edit,>.ui-inline-del").hide(),r.find(">.ui-inline-save,>.ui-inline-cancel").show()))}),f=function(e,t){return h(!0,o.jqGrid("getGridRowById",t)),!1},g=function(e,t){return h(!1,o.jqGrid("getGridRowById",t)),!1},m=function(e){1===$(e.target).closest("div.ui-pg-div").data("jqhovering")&&$(this).addClass(d)},v=function(e){1===$(e.target).closest("div.ui-pg-div").data("jqhovering")&&$(this).removeClass(d)},b=function(e){return $FnFmatter.rowactions.call(this,e,$(e.target).closest("div.ui-pg-div").data("jqactionname"))},w=function(e,t){t&&null!=e&&$(e.firstChild).hasClass(s)&&(e=e.firstChild),null!=e&&($(e.firstChild).on("click",b),$(e.firstChild).children("div.ui-pg-div").on("mouseover",m).on("mouseout",v))},y=(i=n.name,function(e,t){var r=l.iColByName[i];w(t.tr.cells[r],l.colModel[r].autoResizable)});for(null!=n.formatoptions&&n.formatoptions.editformbutton||(o.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",f),o.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",f),o.off("jqGridInlineEditRow.jqGridFormatter",g),o.on("jqGridInlineEditRow.jqGridFormatter",g),o.off("jqGridAfterAddRow.jqGridFormatter",y),o.on("jqGridAfterAddRow.jqGridFormatter",y)),t=0;t<p;t++)$(r=c[t]).hasClass("jqgrow")&&(w(r.cells[e],n.autoResizable),null!=u&&null!=u[t]&&w(u[t].cells[e],n.autoResizable))},$.unformat=function(e,t,r,i){var a,o=t.colModel,l=o.formatter,n=this.p,s=o.formatoptions||{},d=o.unformat||$FnFmatter[l]&&$FnFmatter[l].unformat;if(e instanceof jQuery&&0<e.length&&(e=e[0]),n.treeGrid&&null!=e&&$(e.firstChild).hasClass("tree-wrap")&&($(e.lastChild).hasClass("cell-wrapper")||$(e.lastChild).hasClass("cell-wrapperleaf"))&&(e=e.lastChild),o.autoResizable&&null!=e&&$(e.firstChild).hasClass(n.autoResizing.wrapperClassName)&&(e=e.firstChild),void 0!==d&&$.isFunction(d))a=d.call(this,$(e).text(),t,e);else if(void 0!==l&&"string"==typeof l){var c=$(this),u=function(e,t){return void 0!==s[t]?s[t]:getGridRes.call(c,"formatter."+e+"."+t)},p=function(e,t){var r=u(e,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return t.replace(RegExp(r,"g"),"")};switch(l){case"integer":a=p("integer",$(e).text());break;case"number":a=p("number",$(e).text()).replace(u("number","decimalSeparator"),".");break;case"currency":a=$(e).text();var h=u("currency","prefix"),f=u("currency","suffix");h&&h.length&&(a=a.substr(h.length)),f&&f.length&&(a=a.substr(0,a.length-f.length)),a=p("number",a).replace(u("number","decimalSeparator"),".");break;case"checkbox":a=$FnFmatter.checkbox.unformat(e,t,e);break;case"select":a=$.unformat.select(e,t,r,i);break;case"actions":return"";default:a=$(e).text()}}return void 0!==a?a:!0===i?$(e).text():jgrid.htmlDecode($(e).html())},$.unformat.select=function(e,t,r,i){var a=[],o=$(e).text(),l=t.colModel;if(!0===i)return o;var n=$.extend({},l.editoptions||{},l.formatoptions||{}),s=void 0===n.separator?":":n.separator,d=void 0===n.delimiter?";":n.delimiter;if(n.value){var c,u="function"==typeof n.value?n.value():n.value,p=!0===n.multiple,h=[],f=function(e,t){if(0<t)return e};if(p&&(h=o.split(","),h=$.map(h,function(e){return $.trim(e)})),"string"==typeof u){var g,m=u.split(d),v=0;for(g=0;g<m.length;g++)if(2<(c=m[g].split(s)).length&&(c[1]=$.map(c,f).join(s)),p)-1<$.inArray($.trim(c[1]),h)&&(a[v]=c[0],v++);else if($.trim(c[1])===$.trim(o)){a[0]=c[0];break}}else(fmatter.isObject(u)||$.isArray(u))&&(p||(h[0]=o),a=$.map(h,function(e){var t;if($.each(u,function(r,i){if(i===e)return t=r,!1}),void 0!==t)return t}));return a.join(", ")}return o||""},$.unformat.date=function(e,t){var r=$.extend(!0,{},getGridRes.call($(this),"formatter.date"),jgrid.formatter.date||{},t.formatoptions||{});return fmatter.isEmpty(e)?"":jgrid.parseDate.call(this,r.newformat,e,r.srcformat,r)}});